<!DOCTYPE html><html lang="-en -zh-CN" data-default-color-scheme="auto"><head><meta name="google-site-verification" content="LXJ1yIUydqPx39hWuxwWHXx3-aKhuJQL2Ksk1JQVsZM"><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png"><link rel="icon" href="https://github.com/user-attachments/assets/a867a61f-7adf-43e2-a511-c7ce204d93fd"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="HuaiYuan Jing"><meta name="keywords" content="HuaiYuan Jing"><meta name="description" content="Problem 题面In a classroom with n seats, numbered from 0 to n-1, a student must choose the seat with the largest minimum distance to any other occupied seat. If multiple seats satisfy this condition, ch"><meta property="og:type" content="article"><meta property="og:title" content="Interview: Safe Distance | 面试: 安全距离"><meta property="og:url" content="https://huaiyuan-jing.github.io/posts/3dfae82/index.html"><meta property="og:site_name" content="HuaiYuan&#39;s Programming Diary"><meta property="og:description" content="Problem 题面In a classroom with n seats, numbered from 0 to n-1, a student must choose the seat with the largest minimum distance to any other occupied seat. If multiple seats satisfy this condition, ch"><meta property="og:locale"><meta property="og:image" content="https://github.com/user-attachments/assets/b3aea179-9c53-4b9e-8819-76f7d3658c7c"><meta property="article:published_time" content="2025-08-31T05:00:00.000Z"><meta property="article:modified_time" content="2025-09-05T22:01:15.898Z"><meta property="article:author" content="HuaiYuan Jing"><meta property="article:tag" content="Data Structure"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://github.com/user-attachments/assets/b3aea179-9c53-4b9e-8819-76f7d3658c7c"><title>Interview: Safe Distance | 面试: 安全距离 - HuaiYuan&#39;s Programming Diary</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"huaiyuan-jing.github.io",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"https://github.com/user-attachments/assets/b9833017-4a11-4f4b-b6b1-d283c15bd656",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"IzubcGArkHkhcKX0ejKCF5tN-MdYXbMMI",app_key:"Jq398PJV3mcQVeeSc4ddYVbp",server_url:"https://izubcgar.api.lncldglobal.com",path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="HuaiYuan's Programming Diary" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:50vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Programming Diary</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>Home</span></a></li><li class="nav-item"><a class="nav-link" href="/codelib" target="_self"><i class="iconfont icon-books"></i> <span>Codelib</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>Tag</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>About</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>Link</span></a></li><li class="nav-item"><a class="nav-link" href="https://itch.io/embed-upload/14850915" target="_self"><i class="iconfont icon-gitlab-fill"></i> <span>Fox</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://github.com/user-attachments/assets/b3aea179-9c53-4b9e-8819-76f7d3658c7c) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.5)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Interview: Safe Distance | 面试: 安全距离"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> HuaiYuan Jing </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-08-31 00:00" pubdate>Sunday, August 31st 2025, 12:00 am</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i>1.9k words </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i>17 mins </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> times</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Interview: Safe Distance | 面试: 安全距离</h1><div class="markdown-body"><h2 id="Problem-题面"><a href="#Problem-题面" class="headerlink" title="Problem 题面"></a>Problem 题面</h2><p>In a classroom with n seats, numbered from 0 to n-1, a student must choose the seat with the largest minimum distance to any other occupied seat. If multiple seats satisfy this condition, choose the seat with the smallest number.</p><p>Implement a class Room with the following method:</p><p>在一个教室里有 n 个座位, 编号为 0,1,2,…,n−1.<br>当有同学进教室时，他必须选择距离最近的同学之间的距离最大的位置坐下.<br>如果有多个位置满足条件, 选择编号最小的那个.</p><p>实现一个类Room, 包含以下方法:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>):<br>    ...<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:  <span class="hljs-comment"># Return the index of the selected position 返回选中的位置</span><br>    ...<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, pos: <span class="hljs-built_in">int</span></span>):  <span class="hljs-comment"># The person leave the classroom at position pos pos位置上的人离开教室</span><br>    ...<br></code></pre></td></tr></table></figure><h2 id="Code-代码"><a href="#Code-代码" class="headerlink" title="Code 代码"></a>Code 代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Interval</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end, N</span>):<br>        <span class="hljs-variable language_">self</span>.start = start<br>        <span class="hljs-variable language_">self</span>.end = end<br>        <span class="hljs-variable language_">self</span>.N = N<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dist</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.start == -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.end<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.end == <span class="hljs-variable language_">self</span>.N:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span> - <span class="hljs-variable language_">self</span>.start<br>        <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">self</span>.end - <span class="hljs-variable language_">self</span>.start) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.dist() == other.dist():<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.start &lt; other.start<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.dist() &gt; other.dist()<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, N</span>):<br>        <span class="hljs-variable language_">self</span>.N = N<br>        <span class="hljs-variable language_">self</span>.heap = []<br>        <span class="hljs-variable language_">self</span>.start_map = &#123;&#125;<br>        <span class="hljs-variable language_">self</span>.end_map = &#123;&#125;<br>        <span class="hljs-variable language_">self</span>.seated = <span class="hljs-built_in">set</span>()<br><br>        initial = Interval(-<span class="hljs-number">1</span>, N, N)<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, initial)<br>        <span class="hljs-variable language_">self</span>.start_map[-<span class="hljs-number">1</span>] = initial<br>        <span class="hljs-variable language_">self</span>.end_map[N] = initial<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-variable language_">self</span>.heap:<br>            interval = heapq.heappop(<span class="hljs-variable language_">self</span>.heap)<br>            start, end = interval.start, interval.end<br>            <span class="hljs-keyword">if</span> start <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.start_map <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.start_map[start] == interval:<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> start == -<span class="hljs-number">1</span>:<br>            seat = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">elif</span> end == <span class="hljs-variable language_">self</span>.N:<br>            seat = <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            seat = (start + end) // <span class="hljs-number">2</span><br><br>        <span class="hljs-variable language_">self</span>.seated.add(seat)<br><br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[start]<br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[end]<br><br>        left = Interval(start, seat, <span class="hljs-variable language_">self</span>.N)<br>        right = Interval(seat, end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[start] = left<br>        <span class="hljs-variable language_">self</span>.end_map[seat] = left<br>        <span class="hljs-variable language_">self</span>.start_map[seat] = right<br>        <span class="hljs-variable language_">self</span>.end_map[end] = right<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, left)<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, right)<br><br>        <span class="hljs-keyword">return</span> seat<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, p</span>):<br>        <span class="hljs-variable language_">self</span>.seated.remove(p)<br><br>        left = <span class="hljs-variable language_">self</span>.end_map.get(p)<br>        right = <span class="hljs-variable language_">self</span>.start_map.get(p)<br><br>        <span class="hljs-keyword">if</span> left:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[left.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[left.end]<br>        <span class="hljs-keyword">if</span> right:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[right.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[right.end]<br><br>        new_start = left.start <span class="hljs-keyword">if</span> left <span class="hljs-keyword">else</span> p<br>        new_end = right.end <span class="hljs-keyword">if</span> right <span class="hljs-keyword">else</span> p<br>        merged = Interval(new_start, new_end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[new_start] = merged<br>        <span class="hljs-variable language_">self</span>.end_map[new_end] = merged<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, merged)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    room = Room(<span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    room.leave(<span class="hljs-number">4</span>)<br>    <span class="hljs-built_in">print</span>(room.seat())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="Analysis-解析"><a href="#Analysis-解析" class="headerlink" title="Analysis 解析"></a>Analysis 解析</h2><p>The key data structures for this problem are a heap and a dictionary. Initially, analyze the problem. Each time the seat() function is called, a seat must be found that offers the “largest minimum distance between neighboring students.” Although this constraint sounds complicated, it can be translated to: “Find the longest continuous unoccupied seat segment.” For each continuous unoccupied segment, the middle position is the position within that segment that offers the “largest minimum distance between neighboring students.” Thus, the distance is related only to the length of the current segment (specifically, half of the segment length, except for the initial and final segments, where the nearest distance is exactly twice the segment length).</p><p>这题考察的数据结构是堆+字典. 先简单分析一下题目, 每次调用seat()函数时要找到一个”距离最近的同学之间的距离最大”的位置, 尽管这个限制条件读起来相当拗口, 翻译成人话就是: “找出最大的一段连续空着的座位”. 因为对于每个连续空着的座位段, 中间位置就是这个段里”距离最近的同学之间的距离最大”的位置. 所以实际上的距离只和当前段长度有关, 更具体的说是当前段长度的一半 (其中最开始的最后的段是特殊的, 因为两头没有人所以最近的距离不是段长度的一半, 而是刚好一倍).</p><p>Therefore, the problem’s requirements become clear:</p><ol><li>Each call to seat() finds and returns the middle position of the longest continuous unoccupied segment. After returning, the segment is split into two halves at that position.</li><li>Each call to leave() removes the two segments separated by the leave() position and re-merges them.</li></ol><p>所以这题的需求就变得很清晰了:</p><ol><li>每次调用seat就把所有区间里最长的拿出来, 返回中点后把区间从那个位置掰成两半</li><li>每次调用leave就把leave的位置所区分的两个区间都去掉, 重新拼接起来</li></ol><p>The first function can be easily thought of using a heap data structure, but the second function cannot be implemented solely with a heap; it requires a dictionary for additional implementation.</p><p>第一个功能可以很容易想到堆的数据结构, 但是第二个功能只靠堆是无法实现的, 需要通过字典来额外实现</p><h3 id="Initialization-初始化"><a href="#Initialization-初始化" class="headerlink" title="Initialization 初始化"></a>Initialization 初始化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Interval</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end, N</span>):<br>        <span class="hljs-variable language_">self</span>.start = start<br>        <span class="hljs-variable language_">self</span>.end = end<br>        <span class="hljs-variable language_">self</span>.N = N<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dist</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># No need need to divide by 2 because two heads nobody 因为两头没人所以长度不需要除以2</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.start == -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.end<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.end == <span class="hljs-variable language_">self</span>.N:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span> - <span class="hljs-variable language_">self</span>.start<br>        <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">self</span>.end - <span class="hljs-variable language_">self</span>.start) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.dist() == other.dist():<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.start &lt; other.start<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.dist() &gt; other.dist()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, N</span>):<br>    <span class="hljs-variable language_">self</span>.N = N<br>    <span class="hljs-variable language_">self</span>.heap = []<br>    <span class="hljs-variable language_">self</span>.start_map = &#123;&#125;<br>    <span class="hljs-variable language_">self</span>.end_map = &#123;&#125;<br>    <span class="hljs-variable language_">self</span>.seated = <span class="hljs-built_in">set</span>()<br><br>    initial = Interval(-<span class="hljs-number">1</span>, N, N)<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, initial)<br>    <span class="hljs-variable language_">self</span>.start_map[-<span class="hljs-number">1</span>] = initial<br>    <span class="hljs-variable language_">self</span>.end_map[N] = initial<br><br></code></pre></td></tr></table></figure><p>First, design an <code>Interval</code> class to represent each continuous empty seat segment. The <code>dist()</code> function is used to calculate the maximum distance to the nearest classmate within the current segment. <code>__lt__(self, other)</code> is for calling the Python <code>heappush</code> and <code>heappop</code> functions because Python’s heap operations are a min-heap by default, so the definition of <code>__lt__(self, other)</code> is actually the opposite of the actual definition.</p><p>Then, initialize the <code>Room</code> class, where <code>start_map</code> and <code>end_map</code> respectively store <code>Interval</code> objects starting&#x2F;ending at key points. <code>seated</code> is used to record the set of occupied seats.</p><p>首先, 设计一个<code>Interval</code>类, 用于表示每个连续的空座位段. 其中<code>dist()</code>函数用来计算, 当前段内最大的到最近的同学的距离. <code>__lt__(self, other)</code>是为了调用后面python的<code>heappush</code>和<code>heappop</code>函数, 因为python的堆操作默认是小根堆, 所以这里<code>__lt__(self, other)</code>的定义其实是与实际定义相反的.</p><p>然后, 对<code>Room</code>类初始化, 其中<code>start_map</code>和<code>end_map</code>分别存储以key这个点开始&#x2F;结束的<code>Interval</code>.<code>seated</code>则是用来记录已经有人的座位的集合.</p><h3 id="Seat-Function-Seat-函数"><a href="#Seat-Function-Seat-函数" class="headerlink" title="Seat() Function Seat() 函数"></a>Seat() Function Seat() 函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-variable language_">self</span>.heap:<br>        interval = heapq.heappop(<span class="hljs-variable language_">self</span>.heap)<br>        start, end = interval.start, interval.end<br>        <span class="hljs-keyword">if</span> start <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.start_map <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.start_map[start] == interval:  <span class="hljs-comment"># Verify the interval is valid 验证这个区间是存在的</span><br>            <span class="hljs-keyword">return</span> seat<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> start == -<span class="hljs-number">1</span>:<br>        seat = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">elif</span> end == <span class="hljs-variable language_">self</span>.N:<br>        seat = <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        seat = (start + end) // <span class="hljs-number">2</span><br><br>    <span class="hljs-variable language_">self</span>.seated.add(seat)<br><br>    <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[start]<br>    <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[end]<br><br>    left = Interval(start, seat, <span class="hljs-variable language_">self</span>.N)<br>    right = Interval(seat, end, <span class="hljs-variable language_">self</span>.N)<br>    <span class="hljs-variable language_">self</span>.start_map[start] = left<br>    <span class="hljs-variable language_">self</span>.end_map[seat] = left<br>    <span class="hljs-variable language_">self</span>.start_map[seat] = right<br>    <span class="hljs-variable language_">self</span>.end_map[end] = right<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, left)<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, right)<br></code></pre></td></tr></table></figure><p>First, take the largest interval from the <code>heap</code>, and simultaneously use <code>start_map</code> and <code>end_map</code> to determine whether the current interval actually exists (explained in the <code>leave</code> function). After taking out the largest interval, determine the position where the seat should be placed, then split the interval according to the seat’s position and update <code>start_map</code>, <code>end_map</code>, and <code>heap</code>.</p><p>首先从<code>heap</code>里拿出最大的区间, 同时通过<code>start_map</code>和<code>end_map</code>来判断当前取出来的区间是否实际存在 (<code>leave</code>函数中会解释为什么是这样做的). 取出最大区间后判断seat应该摆放的位置, 再把区间根据seat的位置分为两半并更新<code>start_map</code>, <code>end_map</code>与<code>heap</code>.</p><h3 id="Leave-Function-Leave-函数"><a href="#Leave-Function-Leave-函数" class="headerlink" title="Leave() Function Leave() 函数"></a>Leave() Function Leave() 函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    ...<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, p</span>):<br>        <span class="hljs-variable language_">self</span>.seated.remove(p)<br><br>        left = <span class="hljs-variable language_">self</span>.end_map.get(p)<br>        right = <span class="hljs-variable language_">self</span>.start_map.get(p)<br><br>        <span class="hljs-keyword">if</span> left:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[left.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[left.end]<br>        <span class="hljs-keyword">if</span> right:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[right.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[right.end]<br><br>        new_start = left.start <span class="hljs-keyword">if</span> left <span class="hljs-keyword">else</span> p<br>        new_end = right.end <span class="hljs-keyword">if</span> right <span class="hljs-keyword">else</span> p<br>        merged = Interval(new_start, new_end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[new_start] = merged<br>        <span class="hljs-variable language_">self</span>.end_map[new_end] = merged<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, merged)<br></code></pre></td></tr></table></figure><p>First, find the two segments to be merged through <code>start_map</code> and <code>end_map</code>. Then merge these two segments into a new interval and add it to the heap. Theoretically, the algorithm should remove the original two intervals from the heap and then add the new interval to the heap. However, the heap does not natively support this operation, so simply ignore it here because the <code>seat()</code> function implements a verification process that checks whether the current interval corresponds to the intervals in <code>start_map</code> and <code>end_map</code>. If it doesn’t, it means that this interval no longer exists, so the algorithm will simply ignore it. This ensures the correctness of the answer even if the original interval is not deleted.</p><p>首先, 通过<code>start_map</code>和<code>end_map</code>找到需要拼接的两个段. 然后把这两个段合并成一个新的区间, 并将其加入到堆中. 理论上说, 算法应当把原来的两个区间从堆中弹出, 后将新的区间加入堆中。但是堆无法原生支持这种操作, 所以这里干脆直接不处理, 因为在之前的<code>seat()</code>函数中算法实现了一个验证处理, 查看当前取出来的区间是不是<code>start_map</code>和<code>end_map</code>对应的区间. 如果不是说明这个区间已经不存在了, 那么算法就会直接忽略它. 这样就算不删除原区间也不影响答案的正确性.</p><h3 id="Runtime-Analysis-时间复杂度分析"><a href="#Runtime-Analysis-时间复杂度分析" class="headerlink" title="Runtime Analysis 时间复杂度分析"></a>Runtime Analysis 时间复杂度分析</h3><p>算法里所有的堆操作时间复杂度都是<code>O(log n)</code>, 所以总时间复杂度为 <code>O(n log n)</code>, 这里<code>n</code>指的是操作数量.</p><p>All heap operations in the algorithm have a time complexity of <code>O(log n)</code>, so the total time complexity is <code>O(n log n)</code>. Here <code>n</code> is number of operations.</p><h2 id="Conclusion-总结"><a href="#Conclusion-总结" class="headerlink" title="Conclusion 总结"></a>Conclusion 总结</h2><p>This question is a moderately difficult data structure problem that involves slight modifications and optimizations to the original heap operations. It requires a good grasp of basic data structure operations and implementations, and is the type of problem that is easy to come up with an idea for but requires paying attention to many details in the actual implementation.</p><p>这道题是一道难度适中的数据结构题目, 在原本堆操作的基础上稍加修改优化. 需要熟练掌握数据结构的基本操作和实现, 是容易想出思路但是实际写起来需要注意很多细节的类型.</p><h2 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h2><p>Don’t forget about <code>RUST</code> time.</p><p>来点<code>RUST</code></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::&#123;<br>    cmp::Reverse,<br>    collections::&#123;BinaryHeap, HashMap&#125;,<br>&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">room</span> = Room::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    room.<span class="hljs-title function_ invoke__">leave</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Room</span> &#123;<br>    size: <span class="hljs-type">i32</span>,<br>    heap: BinaryHeap&lt;(<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>    start_map: HashMap&lt;<span class="hljs-type">i32</span>, (<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>    end_map: HashMap&lt;<span class="hljs-type">i32</span>, (<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Room</span> &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(size: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">heap</span> = BinaryHeap::<span class="hljs-title function_ invoke__">new</span>();<br>        heap.<span class="hljs-title function_ invoke__">push</span>((size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">start_map</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>        start_map.<span class="hljs-title function_ invoke__">insert</span>(-<span class="hljs-number">1</span>, (size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">end_map</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>        end_map.<span class="hljs-title function_ invoke__">insert</span>(size, (size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        Room &#123;<br>            size,<br>            heap,<br>            start_map,<br>            end_map,<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">dist</span>(&amp;<span class="hljs-keyword">self</span>, x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">if</span> x == -<span class="hljs-number">1</span> || y == <span class="hljs-keyword">self</span>.size &#123;<br>            <span class="hljs-title function_ invoke__">return</span> (y - x).<span class="hljs-title function_ invoke__">abs</span>() - <span class="hljs-number">2</span>;<br>        &#125;<br>        ((y - x).<span class="hljs-title function_ invoke__">abs</span>() - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">seat</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = <span class="hljs-keyword">self</span>.size;<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">len</span>() &gt; <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">interval</span> = <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">pop</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">contains_key</span>(&amp;interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>)<br>                &amp;&amp; *<span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">get</span>(&amp;interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>() == interval<br>            &#123;<br>                x = interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>;<br>                y = interval.<span class="hljs-number">2</span> .<span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">seat</span> = <span class="hljs-keyword">if</span> x == -<span class="hljs-number">1</span> &#123;<br>            <span class="hljs-number">0</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> y == <span class="hljs-keyword">self</span>.size &#123;<br>                <span class="hljs-keyword">self</span>.size - <span class="hljs-number">1</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                (x + y) / <span class="hljs-number">2</span><br>            &#125;<br>        &#125;;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">left</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(x, seat), <span class="hljs-title function_ invoke__">Reverse</span>(x), <span class="hljs-title function_ invoke__">Reverse</span>(seat));<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">right</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(seat, y), <span class="hljs-title function_ invoke__">Reverse</span>(seat), <span class="hljs-title function_ invoke__">Reverse</span>(y));<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(x, left);<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(seat, right);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(seat, left);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(y, right);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(left);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(right);<br>        seat<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">leave</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, pos: <span class="hljs-type">i32</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">left</span> = <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">get</span>(&amp;pos).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-number">1</span> .<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">right</span> = <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">get</span>(&amp;pos).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-number">2</span> .<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;pos);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;pos);<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;left);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;right);<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">merge</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(left, right), <span class="hljs-title function_ invoke__">Reverse</span>(left), <span class="hljs-title function_ invoke__">Reverse</span>(right));<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(left, merge);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(right, merge);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(merge);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></div><hr><div><div class="post-metas my-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Data-Structure/" class="print-no-link">#Data Structure</a></div></div><div class="license-box my-3"><div class="license-title"><div>Interview: Safe Distance | 面试: 安全距离</div><div>https://huaiyuan-jing.github.io/posts/3dfae82/</div></div><div class="license-meta"><div class="license-meta-item"><div>Beitragsautor</div><div>HuaiYuan Jing</div></div><div class="license-meta-item license-meta-date"><div>Veröffentlicht am</div><div>August 31, 2025</div></div><div class="license-meta-item"><div>Urheberrechtshinweis</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - Attribution"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/bd9f93f7/" title="How to setup and encrypt POSTEO mail service | 如何申请并加密POSTEO mail服务"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">How to setup and encrypt POSTEO mail service | 如何申请并加密POSTEO mail服务</span> <span class="visible-mobile">Vorheriger</span></a></article><article class="post-next col-6"><a href="/posts/3911b54c/" title="LeetCode: Integer to English Words | 力扣: 整数转换英文表示"><span class="hidden-mobile">LeetCode: Integer to English Words | 力扣: 整数转换英文表示</span> <span class="visible-mobile">Nächster</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.loadComments("#gitalk-container",(function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js",(function(){var a=Object.assign({clientID:"Ov23li2yI04wDQ7Iy4xP",clientSecret:"d89a07029a388e53e47b4ab798955aaab2557e28",repo:"huaiyuan-jing.github.io",owner:"Huaiyuan-Jing",admin:"Huaiyuan-Jing",language:"en",labels:["Gitalk"],perPage:10,pagerDirection:"last",distractionFreeMode:!1,createIssueManually:!1,proxy:"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token"},{id:"799a2f2dd06f88ebd0fa513412ed781f"});new Gitalk(a).render("gitalk-container")}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>Inhaltsverzeichnis</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">Suchen</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">Stichwort</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">Total Visited <span id="leancloud-site-pv"></span> Times </span><span id="leancloud-site-uv-container" style="display:none">Total <span id="leancloud-site-uv"></span> Unique Visitors</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script>window.MathJax?(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise()):window.MathJax={tex:{inlineMath:{"[+]":[["$","$"]]}},loader:{load:["ui/lazy"]},options:{renderActions:{insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(t=>{let e=t.parentNode;"li"===e.nodeName.toLowerCase()&&e.parentNode.classList.add("has-jax")})},"",!1]}}},Fluid.events.registerRefreshCallback((function(){"MathJax"in window&&MathJax.startup.document&&"function"==typeof MathJax.startup.document.state&&(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise())}))</script><script src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">Blog funktioniert am besten mit aktiviertem JavaScript</div></noscript></body></html>