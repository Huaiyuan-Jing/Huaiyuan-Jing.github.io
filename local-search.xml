<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ICPC: Mob Grinder</title>
    <link href="/posts/b3ee6a2b/"/>
    <url>/posts/b3ee6a2b/</url>
    
    <content type="html"><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p><a href="https://open.kattis.com/problems/mobgrinder">Link of Problem</a></p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>This is an interesting constructive problem.</p><h3 id="Step-1-Analysis-Illegal-Situation"><a href="#Step-1-Analysis-Illegal-Situation" class="headerlink" title="Step 1: Analysis Illegal Situation"></a>Step 1: Analysis Illegal Situation</h3><p>First we need to figure out in what kind of situation, it is an impossible task. Our target is to move all possible monsters on any position to the top-right corner. Obviously, the position takes most distance to move is the bottom-left corner. If we don‚Äôt have enough ‚ÄúUp‚Äù and ‚ÄúRight‚Äù belts to move monster on that position to the top-right corner, we cannot get legal solution. So if R &lt; M - 1 or U &lt; N - 1, print ‚Äúimpossible‚Äù</p><h3 id="Step-2-Get-the-Main-Path"><a href="#Step-2-Get-the-Main-Path" class="headerlink" title="Step 2: Get the Main Path"></a>Step 2: Get the Main Path</h3><p>Now we know, there must exist a path from bottom-left corner to top-right corner. And to simplify our construciton, we can assume this path only contains ‚ÄúUp‚Äù and ‚ÄúRight‚Äù because moving ‚ÄúLeft‚Äù or ‚ÄúDown‚Äù is unnecessary and wasty. For 4*3 map, one of such example is like the following:</p><table><thead><tr><th align="center">_</th><th align="center">R</th><th align="center">*</th></tr></thead><tbody><tr><td align="center">_</td><td align="center">U</td><td align="center">_</td></tr><tr><td align="center">_</td><td align="center">U</td><td align="center">_</td></tr><tr><td align="center">R</td><td align="center">U</td><td align="center">_</td></tr></tbody></table><p>We consider this path as ‚Äúmain path‚Äù</p><h3 id="Step-3-Guide-to-Main-Path"><a href="#Step-3-Guide-to-Main-Path" class="headerlink" title="Step 3: Guide to Main Path"></a>Step 3: Guide to Main Path</h3><p>Now we have the ‚ÄúMain Path‚Äù. For positions main path covered we don‚Äôt need to worry about them. For the others, we need to try to move monsters generate on them to the main path. We can see the main path cut the whole graph into two halfs: top-left half and bottom-right half, we call it Zone1 and Zone2. </p><table><thead><tr><th align="center">1</th><th align="center">R</th><th align="center">*</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">U</td><td align="center">2</td></tr><tr><td align="center">1</td><td align="center">U</td><td align="center">2</td></tr><tr><td align="center">R</td><td align="center">U</td><td align="center">2</td></tr></tbody></table><p>If we spend some time, we will find if we only put ‚ÄúRight‚Äù and ‚ÄúDown‚Äù in Zone1, no matter how we put it, monsters in Zone1 will eventually get on the main path and will not stuck in loop or move out of the graph. And this theorem works for Zone2 as well:</p><table><thead><tr><th align="center">R</th><th align="center">R</th><th align="center">*</th></tr></thead><tbody><tr><td align="center">D</td><td align="center">U</td><td align="center">U</td></tr><tr><td align="center">D</td><td align="center">U</td><td align="center">L</td></tr><tr><td align="center">R</td><td align="center">U</td><td align="center">L</td></tr></tbody></table><h3 id="Step-4-Generate-Solution"><a href="#Step-4-Generate-Solution" class="headerlink" title="Step 4: Generate Solution"></a>Step 4: Generate Solution</h3><p>Now we can easily generate the solution based on these properties:</p><ol><li>There must exist a path from bottom-left and top-right</li><li>Zone1 only contains ‚ÄúRight‚Äù and ‚ÄúDown‚Äù</li><li>Zone2 only contains ‚ÄúLeft‚Äù and ‚ÄúUp‚Äù</li></ol><p>And here is the exact steps:</p><ol><li>Calculate the number of ‚ÄúR‚Äù ‚ÄúL‚Äù ‚ÄúD‚Äù ‚ÄúU‚Äù left after we build the main path</li><li>Put all ‚ÄúR‚Äù and ‚ÄúD‚Äù on the top-left part, and all ‚ÄúL‚Äù and ‚ÄúU‚Äù on the bottom-right part, and make sure Zone1 and Zone2 don‚Äôt touch each other</li><li>After we built Zone1 and Zone2, the grids still empty form the main path.</li></ol><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>.._readline_usize()[<span class="hljs-number">0</span>] &#123;<br>        <span class="hljs-keyword">let</span> [n, m, u, r, d, l] = _readline_usize().<span class="hljs-title function_ invoke__">try_into</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>        <span class="hljs-keyword">if</span> u &lt; n - <span class="hljs-number">1</span> || r &lt; m - <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;impossible\n&quot;</span>);<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">u</span> = u - (n - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">d</span> = d;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">l</span> = l;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">r</span> = r - (m - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">g</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-built_in">vec!</span>[<span class="hljs-string">&#x27;*&#x27;</span>; m]; n];<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..n - <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">for</span> <span class="hljs-variable">j</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..m - <span class="hljs-number">1</span> &#123;<br>                <span class="hljs-keyword">if</span> r &gt; <span class="hljs-number">0</span> &#123;<br>                    g[i][j] = <span class="hljs-string">&#x27;R&#x27;</span>;<br>                    r -= <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> d &gt; <span class="hljs-number">0</span> &#123;<br>                    g[i][j] = <span class="hljs-string">&#x27;D&#x27;</span>;<br>                    d -= <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..n).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>            <span class="hljs-keyword">for</span> <span class="hljs-variable">j</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..m).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>                <span class="hljs-keyword">if</span> u &gt; <span class="hljs-number">0</span> &#123;<br>                    g[i][j] = <span class="hljs-string">&#x27;U&#x27;</span>;<br>                    u -= <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> l &gt; <span class="hljs-number">0</span> &#123;<br>                    g[i][j] = <span class="hljs-string">&#x27;L&#x27;</span>;<br>                    l -= <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = n - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;<br>        <span class="hljs-keyword">while</span> !(x == <span class="hljs-number">0</span> &amp;&amp; y == m - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span> &amp;&amp; g[x - <span class="hljs-number">1</span>][y] == <span class="hljs-string">&#x27;*&#x27;</span> &#123;<br>                g[x][y] = <span class="hljs-string">&#x27;U&#x27;</span>;<br>                x -= <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">if</span> y &lt; m - <span class="hljs-number">1</span> &amp;&amp; g[x][y + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;*&#x27;</span> &#123;<br>                g[x][y] = <span class="hljs-string">&#x27;R&#x27;</span>;<br>                y += <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..n &#123;<br>            <span class="hljs-keyword">for</span> <span class="hljs-variable">j</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..m &#123;<br>                <span class="hljs-built_in">print!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, g[i][j]);<br>            &#125;<br>            <span class="hljs-built_in">println!</span>();<br>        &#125;<br>        <span class="hljs-built_in">println!</span>();<br>    &#125;<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">_readline_usize</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">input</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    std::io::<span class="hljs-title function_ invoke__">stdin</span>()<br>        .<span class="hljs-title function_ invoke__">read_line</span>(&amp;<span class="hljs-keyword">mut</span> input)<br>        .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">&quot;Failed to get input&quot;</span>);<br>    input<br>        .<span class="hljs-title function_ invoke__">split_whitespace</span>()<br>        .<span class="hljs-title function_ invoke__">filter_map</span>(|word| word.<span class="hljs-title function_ invoke__">parse</span>().<span class="hljs-title function_ invoke__">ok</span>())<br>        .<span class="hljs-title function_ invoke__">collect</span>()<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Get Longest Common Subsequence (LCS) in O(NlogN)</title>
    <link href="/posts/e609e3dd/"/>
    <url>/posts/e609e3dd/</url>
    
    <content type="html"><![CDATA[<h2 id="Intro-Get-LCS-Longest-Common-Sunsequence-in-O-NM"><a href="#Intro-Get-LCS-Longest-Common-Sunsequence-in-O-NM" class="headerlink" title="Intro: Get LCS (Longest Common Sunsequence) in O(NM)"></a>Intro: Get LCS (Longest Common Sunsequence) in O(NM)</h2><p>Let me beriefly explain the common way to get LCS in textbook. Let <code>A</code> and <code>B</code> are strings, consider using dynamic programming, <code>dp[i][j]</code> represents LCS in <code>A[0..i]</code> and <code>B[0..j]</code>. Then we can get the following dp formula:</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Rust">dp[i][j] = <span class="hljs-keyword">if</span> A[i] == B[j] &#123;<br>    dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_ invoke__">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>])<br>&#125;<br></code></pre></td></tr></table></figure><p>It takes O(NM) (where N, M are length of A and B) to get LCS. However, when N and M get to $10^5$, it is not acceptable in competitive programming.</p><h2 id="Prerequisite-Get-LIS-Longest-Increasing-Subsequence-in-O-NlogN"><a href="#Prerequisite-Get-LIS-Longest-Increasing-Subsequence-in-O-NlogN" class="headerlink" title="Prerequisite: Get LIS (Longest Increasing Subsequence) in O(NlogN)"></a>Prerequisite: Get LIS (Longest Increasing Subsequence) in O(NlogN)</h2><p>One more step before we get into the title. Because in the end we will transform LCS problems to LIS problems in a linear time t reach <code>O(NlogN)</code>, so I have to remind you of LIS in <code>O(NlogN)</code> before we really get started:</p><p>The key idea to get LIS in this way is Greedy: it maintains an ordered array <code>tails[]</code> which <code>tails[i]</code> represent <strong>the smallest end among ends of all the increasing subsequences with length i</strong> (array indexed by 1), like the following example:</p><p>A &#x3D; [5, 1, 3, 5, 1]</p><ul><li>A[1] &#x3D; 5, tails &#x3D; [5]</li><li>A[2] &#x3D; 1, tails &#x3D; [1]</li><li>A[3] &#x3D; 3, tails &#x3D; [1, 3]</li><li>A[4] &#x3D; 5, tails &#x3D; [1, 3, 5]</li><li>A[5] &#x3D; 1, tails &#x3D; [1, 3, 5]</li></ul><p>We can observe that <code>tails[]</code> is ordered because if <code>tails[i] &gt; tails[j]</code> with <code>i &lt; j</code>, then we can update <code>tails[i]</code> with <code>tails[j]</code>. Because we can get an increasing subsequence with length <code>i</code> end in <code>tails[j]</code> by remove the first <code>j - i</code> elements in the increasing subsequence with length <code>j</code> end in <code>tails[j]</code>, which causes a contradiction. </p><p>The exact steps we maintain <code>tails[]</code> during each iteration of <code>A[i]</code> is:</p><ul><li>Find the first element in <code>tails[]</code> which is larger than or equal to <code>A[i]</code> and replace it. </li><li>If <code>A[i]</code> is larger than all the elements in <code>tails[]</code>, push <code>A[i]</code> to the end of <code>tails[]</code>.</li></ul><p>After iterate all the elements, we can see the length of <code>tails[]</code> is the length of LIS.</p><p>And the time complexity of this algorithm is <code>O(NlogN)</code>, if we use binary search in the step of find the first element larger than <code>A[i]</code></p><h2 id="Key-LCS-LIS"><a href="#Key-LCS-LIS" class="headerlink" title="Key: LCS &lt;&#x3D;&gt; LIS"></a>Key: LCS &lt;&#x3D;&gt; LIS</h2><h3 id="Steps"><a href="#Steps" class="headerlink" title="Steps:"></a>Steps:</h3><p>Consider <code>A = [3, 9, 7, 10, 3]</code> and <code>B = [5, 3, 7, 3]</code>, we want to find the LCS between them.</p><ol><li>Build a <code>map[][]</code> to record indexs of every element in <code>A[i]</code>, like:</li></ol><ul><li>map[3] &#x3D; [1, 5]</li><li>map[9] &#x3D; [2]</li><li>map[7] &#x3D; [3]</li><li>map[10] &#x3D; [4]</li></ul><ol start="2"><li>Replace every elements in <code>B[]</code> with the index recorded in map with reverse order:</li></ol><ul><li>B[1] &#x3D; 5 -&gt; map[5] &#x3D; [] -&gt; []</li><li>B[2] &#x3D; 3 -&gt; map[3] &#x3D; [1, 5] -&gt; [5, 1]</li><li>B[3] &#x3D; 7 -&gt; map[7] &#x3D; [3] -&gt; [3]</li><li>B[4] &#x3D; 3 -&gt; map[3] &#x3D; [1, 5] -&gt; [5, 1]</li></ul><ol start="3"><li>Combine the indexs and form a new array called <code>C[]</code>:</li></ol><ul><li>C &#x3D; [5, 1, 3, 5, 1]</li></ul><ol start="4"><li>Calculate the length of LIS in <code>C[]</code>, which is equal to the length of LCS of <code>A[]</code> and <code>B[]</code></li></ol><h3 id="Prove-1-LCS-LIS"><a href="#Prove-1-LCS-LIS" class="headerlink" title="Prove 1: LCS -&gt; LIS"></a>Prove 1: LCS -&gt; LIS</h3><p>Assume one of the longest LCS among <code>A[]</code> and <code>B[]</code> is <code>S[]</code>, then <code>S[]</code> satisfy the following properties:</p><ol><li>All elements in <code>S[]</code> appear in both <code>A[]</code> and <code>B[]</code></li><li>The relative order in <code>S[]</code> is same with both <code>A[]</code> and <code>B[]</code></li></ol><p>And because of these properties, if we map all <code>S[]</code> elements on <code>C[]</code>, it is an increasing subsequence with the same length.</p><h3 id="Prove-2-LIS-LCS"><a href="#Prove-2-LIS-LCS" class="headerlink" title="Prove 2: LIS -&gt; LCS"></a>Prove 2: LIS -&gt; LCS</h3><p>Assume one of the longest LIS in <code>C[]</code> is <code>S&#39;[]</code>, then <code>S&#39;[]</code> satisfy the following properties:</p><ol><li>The map of <code>S&#39;[]</code> in <code>A[]</code> is a subsequence of <code>A[]</code>, because the value of each element <code>S&#39;[]</code> is increasing and unique, so one element in <code>S&#39;[]</code> match exactly one element in <code>A[]</code> with increasing index.</li><li>The map of <code>S&#39;[]</code> in <code>B[]</code> is a subsequence of <code>B[]</code>, because each element in <code>B[]</code> match a list of its index in <code>A[]</code> with decreasing order in <code>C[]</code>, but <code>S&#39;[]</code> elements‚Äô value is increasing, so it‚Äôs impossible that two different elements in <code>S&#39;[]</code> match to the same element in <code>B[]</code>. In the other word, one element in <code>S&#39;[]</code> match exactly one element in <code>B[]</code> with increasing index.</li></ol><p>So for each LIS in <code>C[]</code>, we can find a common subsequence with the same length in both <code>A[]</code> and <code>B[]</code>.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Based on the prove of both directions, we can conclude all LCS problems can transform to the matched LIS problem without bias. And because LIS can be obtained in O(NlogN), in most cases we can get an improvement in time complexity.</p><h2 id="In-The-End-WARNING-Worst-Case-Scenario-and-When-we-should-use-it"><a href="#In-The-End-WARNING-Worst-Case-Scenario-and-When-we-should-use-it" class="headerlink" title="In The End: WARNING: Worst Case Scenario and When we should use it?"></a>In The End: WARNING: Worst Case Scenario and When we should use it?</h2><p>It is obvious that the performance of this algorithm is highly relate to the length of transformed array <code>C[]</code>, which we define as <code>N</code>. And if we define length of <code>A</code>, <code>B</code> are <code>P</code>, <code>Q</code>. Can we build a test case to make this algorithm even slower than the original way with <code>O(PQ)</code>?</p><p>Definitely we can, consider the following <code>A</code> and <code>B</code>:</p><p>A &#x3D; [1, 1, 1, 1, 1]<br>B &#x3D; [1, 1, 1, 1, 1]</p><p>And by the previous steps, we can get <code>C</code>:</p><p>C &#x3D; [5, 4, 3, 2, 1, 5, 4, 3, 2, 1, 5, 4, 3, 2, 1, 5, 4, 3, 2, 1, 5, 4, 3, 2, 1]</p><p>We can see in this worst case, length of <code>C</code> reaches <code>P</code> * <code>Q</code> and the total time complexity of algorithnm reaches <code>O(PQlog(PQ))</code> which is worse than the DP one. This tell us the algorithm may not get an improvement when there are a lot of repeated elements in <code>A[]</code> and <code>B[]</code>. Be careful about this point when considering your test cases.</p><h2 id="Try-It"><a href="#Try-It" class="headerlink" title="Try It"></a>Try It</h2><p><a href="https://open.kattis.com/problems/doubledeck">Sample Problem on Kattis</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>How to render 3D to 2D pixel art in Godot</title>
    <link href="/posts/a9781501/"/>
    <url>/posts/a9781501/</url>
    
    <content type="html"><![CDATA[<h2 id="What-is-3D-to-2D-Rendering"><a href="#What-is-3D-to-2D-Rendering" class="headerlink" title="What is 3D to 2D Rendering?"></a>What is 3D to 2D Rendering?</h2><p>3D to 2D rendering is the process of automatically converting three-dimensional models into two-dimensional images using a computer. It‚Äôs a fundamental technique in computer graphics that allows artists and developers to leverage the flexibility of 3D modeling for creating traditional 2D art.</p><h2 id="Why-Use-3D-to-2D-Rendering"><a href="#Why-Use-3D-to-2D-Rendering" class="headerlink" title="Why Use 3D to 2D Rendering?"></a>Why Use 3D to 2D Rendering?</h2><p>The primary advantage of this method lies in its efficiency and scalability, especially for character animation. Consider a game like <em>Dead Cells</em>, which features detailed, fluid pixel art animations. </p><p><img src="https://github.com/user-attachments/assets/b96bf188-603b-42e7-8853-23c270cb09e9"></p><p><img src="https://github.com/user-attachments/assets/51719172-1810-49bd-a07c-ea344f2cd852"></p><p>Creating these animations directly by hand is an incredibly labor-intensive process. A single second of motion might require a dozen or more individual frames, meaning hundreds or even thousands of unique images are needed to animate just one character. This workload increases exponentially with more characters, weapons, or actions.</p><p>A more efficient approach is to build a single 3D model of the character. Once the model is complete, animators can apply motions and animations to it in a 3D environment. The software then automatically renders these animated 3D sequences into 2D images or sprite sheets. This technique, which Dead Cells uses, significantly reduces the manual workload, allowing for a much higher volume of high-quality, fluid animations with a fraction of the effort required for traditional frame-by-frame drawing. It offers the best of both worlds: the visual style of 2D art with the production efficiency of 3D technology.</p><h2 id="How-to-Implement-3D-to-2D-Rendering-in-Godot"><a href="#How-to-Implement-3D-to-2D-Rendering-in-Godot" class="headerlink" title="How to Implement 3D to 2D Rendering in Godot"></a>How to Implement 3D to 2D Rendering in Godot</h2><ul><li><h3 id="Arrange-a-3d-scene-and-model-as-you-like"><a href="#Arrange-a-3d-scene-and-model-as-you-like" class="headerlink" title="Arrange a 3d scene and model as you like"></a>Arrange a 3d scene and model as you like</h3><ul><li><p><img src="https://github.com/user-attachments/assets/52a35dbb-d3f8-4793-9d92-9d7810c208df"> </p><p>First, put your 3d model in a separate scene and setup everything you need to display the model (like reflection, animator, light and so on). </p><p>P.S.: If you want your item looks better after rendering to 2d, you can choose the ‚ÄúDiffusion Mode‚Äù and ‚ÄúSpecular Mode‚Äù as ‚ÄúToon‚Äù, which is the godot inherit shading method compatiable with 3D to 2D rendering</p><p><img src="https://github.com/user-attachments/assets/8b31bf2b-15ea-4805-abd1-fb29562402b9"></p></li></ul></li><li><h3 id="Add-SubViewPort-Node-in-3D-Scene"><a href="#Add-SubViewPort-Node-in-3D-Scene" class="headerlink" title="Add SubViewPort Node in 3D Scene"></a>Add SubViewPort Node in 3D Scene</h3><ul><li><p><img src="https://github.com/user-attachments/assets/5e0d0ea8-9066-4dae-8a08-13f4b8063557"></p><p>Create a SubViewPoint Node and Put all the 3D-related nodes under the SubViewPoint node.</p><p><img src="https://github.com/user-attachments/assets/d7468004-e558-4dbf-b453-cb2bdaf0d476"></p><p>Then create a Sprite2D node under root, choose ‚ÄúNewViewPoint Texture‚Äù in texture feature in this node and select the SubViewPoint we just created.</p><p>Now we can see the view of camera in 3D is projected on the 2D scene like the following:</p><p><img src="https://github.com/user-attachments/assets/86361bd3-a71d-4f7f-accf-39ddc327d03c"></p><p>P.S.: Remember to select ‚ÄúTransparent BG‚Äù in SubViewPoint Node if you don‚Äôt want to see the background in 3D view.</p></li></ul></li><li><h3 id="Create-a-shader-for-2D-sprite-image"><a href="#Create-a-shader-for-2D-sprite-image" class="headerlink" title="Create a shader for 2D sprite image"></a>Create a shader for 2D sprite image</h3><ul><li><p><img src="https://github.com/user-attachments/assets/e55023d4-bd70-4f42-a30c-3a306e70423d"></p><p>In the material of Sprite2D node, we choose to create new metariel and new shader for this image.</p><p>After creation, we can see the shader editor and initial shader code at the bottom of screen like this:</p><p><img src="https://github.com/user-attachments/assets/a0e1c91f-572f-49bc-bb0a-a49462016ce4"></p><p>Now we start to code the shader, first we create 3 uniform global values:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gdshader">uniform vec2 pixel_count = vec2(64);  // Number of pixel after rendering the image<br>uniform float outline_width = 1.0;<br>uniform vec4 outline_color : source_color = vec4(0,0,0,1);<br></code></pre></td></tr></table></figure><p>Then we add the following two functions:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gdshader">vec2 pixelate(vec2 uv, vec2 count) &#123;  // return uv<br>    uv *= count;<br>    uv = floor(uv);<br>    uv /= count;<br>    return uv;<br>&#125;<br></code></pre></td></tr></table></figure><p>This function is intended to pixelate the image</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gdshader">vec4 add_outline(vec2 uv, vec4 color, sampler2D obj_texture, vec2 obj_pixel_size) &#123;  // return color<br>  vec4 outline =  texture(obj_texture, uv + vec2(0, obj_pixel_size.y) * outline_width) +<br>          texture(obj_texture, uv + vec2(0, -obj_pixel_size.y) * outline_width) +<br>          texture(obj_texture, uv + vec2(obj_pixel_size.x, 0) * outline_width) +<br>          texture(obj_texture, uv + vec2(-obj_pixel_size.x, 0) * outline_width) +<br>          texture(obj_texture, uv + vec2(obj_pixel_size.x, obj_pixel_size.y) * outline_width * (sqrt(2) / 2.0)) +<br>          texture(obj_texture, uv + vec2(obj_pixel_size.x, -obj_pixel_size.y) * outline_width * (sqrt(2) / 2.0)) +<br>          texture(obj_texture, uv + vec2(-obj_pixel_size.x, obj_pixel_size.y) * outline_width * (sqrt(2) / 2.0)) +<br>          texture(obj_texture, uv + vec2(-obj_pixel_size.x, -obj_pixel_size.y) * outline_width * (sqrt(2) / 2.0));<br>  outline.rgb = color.rgb;<br>  outline.a = min(outline.a, 1);<br>  vec4 origin = texture(obj_texture, uv);<br>  return mix(outline, origin, origin.a);<br>&#125;<br></code></pre></td></tr></table></figure><p>This function is intended to add a border for the object.</p><p>Finally, we adding the following line to the fragment function:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gdshader">void fragment() &#123;<br>  // Called for every pixel the material is visible on.<br>  COLOR = add_outline(pixelate(UV, pixel_count), outline_color, TEXTURE, TEXTURE_PIXEL_SIZE);<br>&#125;<br></code></pre></td></tr></table></figure><p>Now save the code and we can see our picture in 2D scene changed to this:</p><p><img src="https://github.com/user-attachments/assets/bd352c4b-d8d3-4b50-a0ab-8896f0ba1116"></p></li></ul></li><li><h3 id="Link-it-to-the-main-scene"><a href="#Link-it-to-the-main-scene" class="headerlink" title="Link it to the main scene"></a>Link it to the main scene</h3><ul><li><p>Go to the main scene of your project and link the object into the main scene, add a simple background for it, now we sucessfully convert our 3D model to 2D pixel image:</p><p><img src="https://github.com/user-attachments/assets/58744a30-6c91-474e-9928-7d73af0f55fe"></p><p>If we add an animation to the 3D object, the 2D picture will move as well:</p><p><img src="https://github.com/user-attachments/assets/e2dd1d91-8037-4cca-b20b-b5ffc41f113f"></p></li></ul></li></ul><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Here are all the steps for basic 3D model to 2D pixel image rendering. You can explore by yourself for more features like adding HDR, setting the fps of pixel animation, create better outline to represent shadow and so on. </p>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
      <tag>Godot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>How to manage email like an Advanced-Linux-User</title>
    <link href="/posts/93ebbc6b/"/>
    <url>/posts/93ebbc6b/</url>
    
    <content type="html"><![CDATA[<h2 id="Introduction-Why"><a href="#Introduction-Why" class="headerlink" title="Introduction: Why?"></a>Introduction: Why?</h2><p>It seems you‚Äôre describing a world many of us can only dream of ‚Äì one free from the daily deluge of digital communication. Imagine the luxury of a life unburdened by countless logins, where ‚Äúinbox zero‚Äù isn‚Äôt a mythical achievement but the natural state of being.</p><p>For the rest of us, however, reality is a relentless stream of notifications. We navigate a labyrinth of web pages, each demanding our attention, or wrestle with email clients like Outlook and Thunderbird ‚Äì digital behemoths brimming with features we‚Äôll never touch, yet somehow managing to monopolize half our screens. Lucky indeed are those who escape this modern-day communication treadmill.</p><p>But luckily, you are a linux user! Minimalism and Unix Philosophy are your weapons. Now pick them up and see how deep the rabbit hole can be.</p><h2 id="Aerc-Unix-Philosophy-Driven-Email-Client"><a href="#Aerc-Unix-Philosophy-Driven-Email-Client" class="headerlink" title="Aerc: Unix-Philosophy Driven Email Client"></a>Aerc: Unix-Philosophy Driven Email Client</h2><p><img src="/posts/93ebbc6b/1.png"></p><ol><li>No dependency on GUI</li><li>No messy folder management</li><li>No any other unnecessary and uncompatible features</li><li>Elegent Plain Text Workflow</li></ol><h3 id="How-to-setup-Aerc-Based-on-Ubuntu-24-04-LTS-Server"><a href="#How-to-setup-Aerc-Based-on-Ubuntu-24-04-LTS-Server" class="headerlink" title="How to setup Aerc? (Based on Ubuntu 24.04 LTS Server)"></a>How to setup Aerc? (Based on Ubuntu 24.04 LTS Server)</h3><ol><li>Install aerc:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update &amp;&amp; apt install aerc<br></code></pre></td></tr></table></figure><ol><li>Start to configure:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">aerc<br></code></pre></td></tr></table></figure><p><img src="/posts/93ebbc6b/2.png"></p><p>Input your account information sequantially. And press <code>Next</code> to the next step.</p><p><img src="/posts/93ebbc6b/3.png"></p><p>Here I setup my google account. Input your email address in <code>Username</code>. About <code>Password</code>, if you are using Personal Google Account or other personal email service (like posteo I used), you can create an APP PASSWORD for Aerc. </p><p>For those who use School Email or Company Email, or just don‚Äôt want to use app password because they are not safe, I will introduce how to set it up later with a different tool.</p><p>Leave everything else as default, press <code>Next</code> and do the almost same setup for outgoing mail.</p><p>Then you are done with the basic setup.</p><p>You can change your setting with the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.config/aerc/account.conf<br></code></pre></td></tr></table></figure><h2 id="Oama-Local-Oauth2-Authenticator"><a href="#Oama-Local-Oauth2-Authenticator" class="headerlink" title="Oama: Local Oauth2 Authenticator"></a>Oama: Local Oauth2 Authenticator</h2><p>You might notice that with the previous way to setup, most of school &#x2F; company email services cannot be used because they enforce Oauth2 authentication. Though aerc support to use OAuth2 token, it cannot send a requet to get it by itself. </p><p>So here comes Oama, a local Oauth2 Authenticator written in Haskell. It can dynamically fetch the token from your Google account and store it locally.</p><h3 id="Setup-Oama-and-Aerc"><a href="#Setup-Oama-and-Aerc" class="headerlink" title="Setup Oama and Aerc"></a>Setup Oama and Aerc</h3><ol><li>Install Oama:</li></ol><p>Cause most Linux distributions do not have Oama in their official repo, you need to install its binary manually.</p><p><a href="https://github.com/pdobsan/oama/releases">Oama Github Link</a></p><p>Fetch the newest version of Oama and extract it. And add the binary file to the System PATH.</p><ol start="2"><li>Get Oauth2 Token:</li></ol><p>Run Oama:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ oama<br>WARNING -- Could not find config file: /home/&lt;USERNAME&gt;/.config/oama/config.yaml<br>Creating initial config file ...<br>... <span class="hljs-keyword">done</span>.<br>Edit it <span class="hljs-keyword">then</span> start oama again.<br></code></pre></td></tr></table></figure><p>Open config file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ vim ~/.config/oama/config.yaml<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">## oama version 0.21.0</span><br><span class="hljs-comment">## This is a YAML configuration file, indentation matters.</span><br><span class="hljs-comment">## Double ## indicates comments while single # default values.</span><br><span class="hljs-comment">## Not all defaults are shown, for full list run `oama printenv`</span><br><span class="hljs-comment">## and look at the `services:` section.</span><br><br><span class="hljs-comment">## Possible options for keeping refresh and access tokens:</span><br><span class="hljs-comment">## GPG - in a gpg encrypted file $XDG_STATE_HOME/oama/&lt;email-address&gt;.oauth</span><br><span class="hljs-comment">##       (XDG_STATE_HOME defaults to ~/.local/state)</span><br><span class="hljs-comment">## GPG - in a gpg encrypted file ~/.local/state/oama/&lt;email-address&gt;.oauth</span><br><span class="hljs-comment">## KEYRING - in the keyring of a password manager with Secret Service API</span><br><span class="hljs-comment">##</span><br><span class="hljs-comment">## Choose exactly one.</span><br><br><span class="hljs-attr">encryption:</span><br>    <span class="hljs-attr">tag:</span> <span class="hljs-string">KEYRING</span><br><br><span class="hljs-comment"># encryption:</span><br><span class="hljs-comment">#   tag: GPG</span><br><span class="hljs-comment">#   contents: your-KEY-ID</span><br><br><span class="hljs-comment">## Builtin service providers</span><br><span class="hljs-comment">## - google</span><br><span class="hljs-comment">## - microsoft</span><br><span class="hljs-comment">## Required fields: client_id, client_secret</span><br><span class="hljs-comment">##</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">google:</span><br>    <span class="hljs-attr">client_id:</span> <span class="hljs-string">application-CLIENT-ID</span><br>    <span class="hljs-attr">client_secret:</span> <span class="hljs-string">application-CLIENT-SECRET</span><br>  <span class="hljs-comment">## Alternatively get them from a password manager using a shell command.</span><br>  <span class="hljs-comment">## If both variants are present then the _cmd versions get the priority.</span><br>  <span class="hljs-comment">## For example:</span><br>  <span class="hljs-comment"># client_id_cmd: |</span><br>  <span class="hljs-comment">#   pass email/my-app | head -1</span><br>  <span class="hljs-comment"># client_secret_cmd: |</span><br>  <span class="hljs-comment">#   pass email/my-app | head -2 | tail -1</span><br>  <span class="hljs-comment">#  auth_scope: https://mail.google.com/</span><br><br>  <span class="hljs-attr">microsoft:</span><br>     <span class="hljs-attr">client_id:</span> <span class="hljs-string">application-CLIENT-ID</span><br>  <span class="hljs-comment">## client_secret is not needed for device code flow</span><br>  <span class="hljs-comment">#  auth_endpoint: https://login.microsoftonline.com/common/oauth2/v2.0/devicecode</span><br>  <span class="hljs-comment">##</span><br>  <span class="hljs-comment">## client_secret might be needed for other authorization flows</span><br>  <span class="hljs-comment">#  client_secret: application-CLIENT_SECRET</span><br>  <span class="hljs-comment">## auth_endpoint: https://login.microsoftonline.com/common/oauth2/v2.0/authorize</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment">#  auth_scope: https://outlook.office.com/IMAP.AccessAsUser.All</span><br>  <span class="hljs-comment">#     https://outlook.office.com/SMTP.Send</span><br>  <span class="hljs-comment">#     offline_access</span><br>  <span class="hljs-comment">#  tenant: common</span><br><br>  <span class="hljs-comment">## User configured providers</span><br>  <span class="hljs-comment">## Required fields: client_id, client_secret, auth_endpoint, auth_scope, token_endpoint</span><br>  <span class="hljs-comment">##</span><br>  <span class="hljs-comment">## For example:</span><br>  <span class="hljs-comment"># yahoo:</span><br>  <span class="hljs-comment">#   client_id: application-CLIENT-ID</span><br>  <span class="hljs-comment">#   client_id_cmd: |</span><br>  <span class="hljs-comment">#     password manager command ...</span><br>  <span class="hljs-comment">#   client_secret: application-CLIENT_SECRET</span><br>  <span class="hljs-comment">#   client_secret_cmd: |</span><br>  <span class="hljs-comment">#     password manager command ...</span><br>  <span class="hljs-comment">#   auth_endpoint: EDIT-ME!</span><br>  <span class="hljs-comment">#   auth_scope: EDIT-ME!</span><br>  <span class="hljs-comment">#   token_endpoint: EDIT-ME!</span><br></code></pre></td></tr></table></figure><p>Here we don‚Äôt need to care about the other parts, only change <code>client_id</code> with <code>9e5f94bc-e8a4-4e73-b8be-63364c29d753</code>. This is ID of Thunderbird. You can also change <code>tag</code><br>setting to use GPG encryption like this: </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">encryption:</span><br>    <span class="hljs-attr">tag:</span> <span class="hljs-string">GPG</span><br>    <span class="hljs-attr">contents:</span> <span class="hljs-string">&lt;Your-GPG-key-id&gt;</span><br></code></pre></td></tr></table></figure><p>After change these settings, goes back to terminal and run:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ oama authorize microsoft &lt;your-email-addr&gt; --device<br>Visit:<br>https://microsoft.com/devicelogin<br><br>and enter the code:<br>XXXXXXXXXXXX<br></code></pre></td></tr></table></figure><p>Follow the webpage guidence to finish the setup on oama. Finally we open Aerc config file and setup the email account:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.config/aerc/accounts.conf<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs config">[&lt;Name of Email Account&gt;]<br>source            = imaps+xoauth2://&lt;Your-Email-Addr&gt;@&lt;IMAP-Addr&gt;<br>source-cred-cmd   = &quot;oama access &lt;Your-Email-Addr&gt;&quot;<br>outgoing          = smtp+xoauth2://&lt;Your-Email-Addr&gt;@&lt;SMTP-Addr&gt;<br>outgoing-cred-cmd = &quot;oama access &lt;Your-Email-Addr&gt;&quot;<br>default           = INBOX<br>cache-headers     = true<br>from              = &quot;&lt;Your-Name&gt;&quot; &lt;Your-Email-Addr&gt;<br>check-mail        = 1m # this refreshes the email every 1 minutes<br>folders           = INBOX, Sent, Archive, Trash<br></code></pre></td></tr></table></figure><p>Save and close the file. Now run Aerc and manage your emails like an advanced Linuxuser. Enjoy! üöÄ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Security</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Coding Test: Find the Largest Stable Number | Á¨îËØïÔºö ÂØªÊâæÊúÄÂ§ßÁöÑÁ®≥ÂÆöÊï∞</title>
    <link href="/posts/49b62a13/"/>
    <url>/posts/49b62a13/</url>
    
    <content type="html"><![CDATA[<!-- @format --><h2 id="Problem-È¢òÈù¢"><a href="#Problem-È¢òÈù¢" class="headerlink" title="Problem È¢òÈù¢"></a>Problem È¢òÈù¢</h2><p>Give a number $N$, find the largest number $k$ satisfy the following requirements smaller than $N$:</p><ol><li>Sum of all digits of $k$ is prime</li><li>Each digits of $k$ is larger than or equals to the previous digit (e.g. 123456, 111111)</li></ol><p>ÁªôÂÆö‰∏Ä‰∏™‰∏äÈôê$N$, ÂØªÊâæÊúÄÂ§ßÁöÑÂ∞è‰∫é$N$ÁöÑÊï∞Â≠ó$k$ÔºåË¶ÅÊ±ÇÊª°Ë∂≥‰ª•‰∏ãÊù°‰ª∂Ôºö</p><ol><li>$k$ÁöÑÂêÑ‰∏™Êï∞‰Ωç‰πãÂíåÊòØÁ¥†Êï∞</li><li>$k$ÁöÑÊØè‰∏Ä‰ΩçÈÉΩÊØîÂâç‰∏Ä‰ΩçÂ§ß (ÊØîÂ¶Ç 123455, 11111)</li></ol><h3 id="Input-ËæìÂÖ•"><a href="#Input-ËæìÂÖ•" class="headerlink" title="Input ËæìÂÖ•"></a>Input ËæìÂÖ•</h3><p>One line with one number $N$</p><p>‰∏ÄË°åÔºå‰∏Ä‰∏™Êï∞Â≠ó$N$</p><h3 id="Output-ËæìÂá∫"><a href="#Output-ËæìÂá∫" class="headerlink" title="Output ËæìÂá∫"></a>Output ËæìÂá∫</h3><p>One line with one number $k$ satisfy the requirements or $-1$ if there is no solution</p><p>‰∏ÄË°åÔºå‰∏Ä‰∏™Êª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞Â≠ó$k$ÔºåÂ¶ÇÊûúÊ≤°ÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑÁ≠îÊ°àËæìÂá∫$-1$</p><h3 id="Size-and-Limits-Êï∞ÊçÆËßÑÊ®°ÂíåÈôêÂà∂"><a href="#Size-and-Limits-Êï∞ÊçÆËßÑÊ®°ÂíåÈôêÂà∂" class="headerlink" title="Size and Limits Êï∞ÊçÆËßÑÊ®°ÂíåÈôêÂà∂"></a>Size and Limits Êï∞ÊçÆËßÑÊ®°ÂíåÈôêÂà∂</h3><p>$N \leq 10^{18}$</p><p>Time Limits Êó∂Èó¥ÈôêÂà∂: 200ms</p><h2 id="Solution-È¢òËß£"><a href="#Solution-È¢òËß£" class="headerlink" title="Solution È¢òËß£"></a>Solution È¢òËß£</h2><p>Obviously, the simplest approach is to try each number from $N$ down to $1$; if it satisfies the condition, return it, otherwise return $-1$. However, given the data scale up to $10^{18}$, this approach will definitely time out. By observing that the number of satisfying numbers is much smaller than the total range, we use a reverse thinking: generate numbers that meet the conditions via a search algorithm.</p><p>ÊòæÁÑ∂ÔºåÊúÄÁÆÄÂçïÁöÑÂÅöÊ≥ïÂ∞±ÊòØ‰ªé$N$Âà∞$1$‰∏Ä‰∏™‰∏™ËØïËøáÂéªÔºåÊâæÂà∞‰∫ÜÂ∞±ËøîÂõûÁ≠îÊ°àÔºåÊ≤°ÊâæÂà∞Â∞±ËøîÂõû$-1$„ÄÇ‰ΩÜËÄÉËôëÂà∞$10^{18}$ÁöÑÊï∞ÊçÆËßÑÊ®°ÔºåËøô‰∏™ÂÅöÊ≥ï‰∏ÄÂÆö‰ºöË∂ÖÊó∂„ÄÇÈÄöËøáËßÇÂØüÂèØ‰ª•ÁÆÄÂçïÂæóÂà∞ÔºåÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÁöÑËßÑÊ®°ËøúÂ∞è‰∫é‰∏äÈôêÂÜÖÊâÄÊúâÊï∞ÁöÑËßÑÊ®°ÔºåÊâÄ‰ª•ÈááÂèñÈÄÜÂêëÊÄùÁª¥Ôºå‰ªéÊù°‰ª∂ÂÖ•ÊâãÁî®ÊêúÁ¥¢ÁÆóÊ≥ïÁîüÊàêÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞Â≠ó„ÄÇ</p><p>First list all possible primes via the sieve method</p><p>È¶ñÂÖàÔºåÈÄöËøáÁ≠õÊ≥ïÂàóÂá∫ÊâÄÊúâÂèØËÉΩÁöÑÁ¥†Êï∞Ôºö</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>().strip())<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">primes</span>(<span class="hljs-params">n</span>):<br>    sieve = [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>)<br>    sieve[<span class="hljs-number">0</span>] = sieve[<span class="hljs-number">1</span>] = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> sieve[i]:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i * i, n + <span class="hljs-number">1</span>, i):<br>                sieve[j] = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> sieve[i]]<br><br>primes_list = primes(<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num)) * <span class="hljs-number">9</span> + <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>For each prime, find the largest number with non-decreasing digits and digit-sum equal to that prime</p><p>ÁÑ∂ÂêéÔºåÂØπ‰∫éÊØè‰∏Ä‰∏™Á¥†Êï∞ÔºåÊàë‰ª¨Ë¶ÅÊâæÂà∞ÊúÄÂ§ßÁöÑÊª°Ë∂≥Êù°‰ª∂2‰∏îÂíå‰∏∫ÂΩìÂâçËøô‰∏™Á¥†Êï∞ÁöÑÊï∞Â≠ó„ÄÇÁÑ∂ÂêéÂÜçËøô‰∫õÊï∞Â≠óÈáåÈù¢ÊâæÂà∞ÊúÄÂ§ßÁöÑÂÄºËøõË°åËøîÂõû</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">ans = -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> primes_list:<br>    digits = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num)))]<br>    upper_limit = [<span class="hljs-built_in">int</span>(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(num)]<br>    left = p<br>    res = largest_stable_number(<span class="hljs-number">0</span>, digits, left, upper_limit)<br>    <span class="hljs-keyword">if</span> res != -<span class="hljs-number">1</span>:<br>        ans = <span class="hljs-built_in">max</span>(ans, res)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>Implement the DFS function to build the largest valid number</p><ol><li>Convert the number to a digit array for easy generation.</li><li>If the sum of digits so far exceeds the target prime, prune this branch.</li><li>If all digits are assigned and the remaining sum is zero, return the constructed number.</li><li>Generate digits from most significant to least significant, iterating from the maximum allowable digit down to the minimum to ensure the first found solution is the largest.</li><li>Determine the upper bound for the current digit: if all previous digits match the corresponding digits of $N$, the upper bound is that digit of N; otherwise it is $9$.</li><li>Determine the lower bound for the current digit: it must be at least the previous digit to maintain non-decreasing order (or $0$ if it‚Äôs the first digit).</li><li>For the current position, try all digits in [lower_bound, upper_bound] in descending order; if a recursive call returns a valid number, return it immediately.</li><li>If no digit works, return -1.</li></ol><p>ÊúÄÂêéÔºåÊàë‰ª¨Êù•ÂÖ∑‰ΩìÂÆûÁé∞ÂØπ‰∫éÊØè‰∏Ä‰∏™Á¥†Êï∞ÔºåÊâæÂà∞ÊúÄÂ§ßÁöÑÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞Â≠óÁöÑdfsÂáΩÊï∞Ôºö</p><ol><li>È¶ñÂÖàÊääÊï∞Â≠óËΩ¨Âåñ‰∏∫ÂØπÂ∫îÁöÑÊï∞‰ΩçÊï∞ÁªÑÔºåÊñπ‰æøÁîüÊàêÊï∞Â≠ó„ÄÇ</li><li>Â¶ÇÊûúÂΩìÂâçÊï∞‰ΩçÊï∞ÁªÑ‰πãÂíåÂ∑≤ÁªèË∂ÖËøáÊåáÂÆöÁöÑÁ¥†Êï∞ÔºåËØ¥ÊòéÂΩìÂâçÁöÑdfsÊñπÂêëÂ∑≤Áªè‰∏çÂ≠òÂú®Ëß£ÔºåÈÄÄÂõûÂà∞‰∏ä‰∏ÄÂ±Ç„ÄÇ</li><li>Â¶ÇÊûúÂ∑≤ÁªèÂÆåÊàê‰∫ÜÊâÄÊúâ‰ΩçÁöÑÁîüÊàêÔºå‰∏îÂíåÂàöÂ•ΩÁ≠â‰∫éÊåáÂÆöÁöÑÁ¥†Êï∞ÔºåÈÇ£‰πàÂàôÊâæÂà∞Á≠îÊ°àÂπ∂ËøîÂõûËß£„ÄÇ</li><li>‰ªéÈ´ò‰ΩçÂà∞‰Ωé‰Ωç‰∏Ä‰Ωç‰ΩçÁîüÊàêÔºåÂØπ‰∫éÊØè‰∏Ä‰ΩçÔºå‰ªéËåÉÂõ¥ÂÜÖÊúÄÂ§ßÁöÑÊï∞Â≠óÂæÄËåÉÂõ¥ÂÜÖÊúÄÂ∞èÁöÑÊï∞Â≠óÈÅçÂéÜÔºå‰øùËØÅÊâæÂà∞ÁöÑÁ¨¨‰∏Ä‰∏™ÁªìÊûúÂ∞±ÊòØÊúÄÂ§ßÁöÑÁªìÊûú„ÄÇ</li><li>Âà§Êñ≠ÂΩìÂâç‰ΩçÊï∞Â≠óÁöÑ‰∏äÁïåÔºöÂ¶ÇÊûú‰πãÂâçÊâÄÊúâ‰ΩçÁöÑÊï∞Â≠óÈÉΩÁ≠â‰∫é$N$ÁöÑÂØπÂ∫î‰ΩçÔºåÈÇ£‰πàÂ¶ÇÊûúÂΩìÂâç‰ΩçÂ§ß‰∫é‰∫Ü$N$ÁöÑÂØπÂ∫î‰ΩçÔºåÂ∞±‰ºöË∂ÖËøáËåÉÂõ¥ÔºåÊâÄ‰ª•ËøôÁßçÊÉÖÂÜµ‰∏ã‰∏äÈôê‰∏∫$N$ÁöÑÂØπÂ∫î‰ΩçÁöÑÊï∞Â≠óÔºõÂ¶ÇÊûú‰πãÂâçÂ∑≤ÁªèÊúâÊüê‰∏Ä‰ΩçÁöÑÊï∞Â≠óÂ∞è‰∫é$N$ÁöÑÂØπÂ∫î‰ΩçÔºåÈÇ£‰πàÊó†ËÆ∫ÂΩìÂâç‰ΩçÁöÑÊï∞Â≠óÂ§ßÂ∞èÊòØÂ§öÂ∞ëÔºåËØ•Êï∞Â≠óÈÉΩ‰∏çÂèØËÉΩË∂ÖËøáËåÉÂõ¥ÔºåÊâÄ‰ª•‰∏äÈôê‰∏∫Âçï‰∏™‰ΩçÁöÑÊúÄÂ§ßÂÄº$9$„ÄÇ</li><li>Âà§Êñ≠ÂΩìÂâç‰ΩçÊï∞Â≠óÁöÑ‰∏ãÁïåÔºöÈ¢òÁõÆË¶ÅÊ±ÇÂΩìÂâç‰ΩçÂ§ß‰∫éÁ≠â‰∫éÂâç‰∏Ä‰ΩçÔºåÊâÄ‰ª•‰∏ãÁïåÂ∞±ÊòØÂâç‰∏Ä‰ΩçÁöÑÊï∞Â≠ó„ÄÇ</li><li>ÂØπ‰∫éÂΩìÂâç‰Ωç‰ªéÂ§ßÂà∞Â∞èÈÅçÂéÜËåÉÂõ¥ÂÜÖÊâÄÊúâÂÄºÔºåÂ¶ÇÊûúÊâæÂà∞Á≠îÊ°àÁõ¥Êé•ËøîÂõûÂÄºÈÄÄÂá∫„ÄÇ</li><li>Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞Ëß£ÔºåËøîÂõû-1</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">largest_stable_number</span>(<span class="hljs-params">cur: <span class="hljs-built_in">int</span>, digits, left: <span class="hljs-built_in">int</span>, upper_limit</span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">if</span> left &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> cur == <span class="hljs-built_in">len</span>(digits):<br>        <span class="hljs-keyword">if</span> left != <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, digits)))<br>    with_limit = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cur):<br>        <span class="hljs-keyword">if</span> digits[i] &lt; upper_limit[i]:<br>            with_limit = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">break</span><br>    top = upper_limit[cur] <span class="hljs-keyword">if</span> with_limit <span class="hljs-keyword">else</span> <span class="hljs-number">9</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(top, (<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> cur == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> digits[cur - <span class="hljs-number">1</span>])-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        digits[cur] = i<br>        res = largest_stable_number(cur + <span class="hljs-number">1</span>, digits, left - i, upper_limit)<br>        <span class="hljs-keyword">if</span> res != -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="Code-ÂÆåÊï¥‰ª£Á†Å"><a href="#Code-ÂÆåÊï¥‰ª£Á†Å" class="headerlink" title="Code ÂÆåÊï¥‰ª£Á†Å"></a>Code ÂÆåÊï¥‰ª£Á†Å</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><br>num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>().strip())<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">primes</span>(<span class="hljs-params">n</span>):<br>    sieve = [<span class="hljs-literal">True</span>] * (n + <span class="hljs-number">1</span>)<br>    sieve[<span class="hljs-number">0</span>] = sieve[<span class="hljs-number">1</span>] = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-built_in">int</span>(math.sqrt(n)) + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">if</span> sieve[i]:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i * i, n + <span class="hljs-number">1</span>, i):<br>                sieve[j] = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">return</span> [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> sieve[i]]<br><br>primes_list = primes(<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num)) * <span class="hljs-number">9</span> + <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">largest_stable_number</span>(<span class="hljs-params">cur: <span class="hljs-built_in">int</span>, digits, left: <span class="hljs-built_in">int</span>, upper_limit</span>) -&gt; <span class="hljs-built_in">int</span>:<br>    <span class="hljs-keyword">if</span> left &lt; <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> cur == <span class="hljs-built_in">len</span>(digits):<br>        <span class="hljs-keyword">if</span> left != <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;&#x27;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>, digits)))<br>    with_limit = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(cur):<br>        <span class="hljs-keyword">if</span> digits[i] &lt; upper_limit[i]:<br>            with_limit = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">break</span><br>    top = upper_limit[cur] <span class="hljs-keyword">if</span> with_limit <span class="hljs-keyword">else</span> <span class="hljs-number">9</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(top, (<span class="hljs-number">0</span> <span class="hljs-keyword">if</span> cur == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> digits[cur - <span class="hljs-number">1</span>])-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>):<br>        digits[cur] = i<br>        res = largest_stable_number(cur + <span class="hljs-number">1</span>, digits, left - i, upper_limit)<br>        <span class="hljs-keyword">if</span> res != -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>ans = -<span class="hljs-number">1</span><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> primes_list:<br>    digits = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num)))]<br>    upper_limit = [<span class="hljs-built_in">int</span>(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(num)]<br>    left = p<br>    res = largest_stable_number(<span class="hljs-number">0</span>, digits, left, upper_limit)<br>    <span class="hljs-keyword">if</span> res != -<span class="hljs-number">1</span>:<br>        ans = <span class="hljs-built_in">max</span>(ans, res)<br><span class="hljs-built_in">print</span>(ans)<br></code></pre></td></tr></table></figure><p>And for Rust Lovers, here is the Rust version of code:</p><p>ÂØπ‰∫éÂÉèÊàë‰∏ÄÊ†∑ÁöÑRustÁà±Â•ΩËÄÖÊù•ËØ¥Ôºå‰∏ãÈù¢ÊòØRustÁöÑÁâàÊú¨Ôºö</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">n</span> = <span class="hljs-title function_ invoke__">read_i64</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num_digits</span> = n.<span class="hljs-title function_ invoke__">abs</span>().<span class="hljs-title function_ invoke__">to_string</span>().<span class="hljs-title function_ invoke__">len</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">primes</span> = <span class="hljs-title function_ invoke__">primes</span>(num_digits <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span> * <span class="hljs-number">9</span>);<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ans</span> = -<span class="hljs-number">1</span> <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">limit</span> = n<br>        .<span class="hljs-title function_ invoke__">abs</span>()<br>        .<span class="hljs-title function_ invoke__">to_string</span>()<br>        .<span class="hljs-title function_ invoke__">chars</span>()<br>        .<span class="hljs-title function_ invoke__">map</span>(|c| c.<span class="hljs-title function_ invoke__">to_digit</span>(<span class="hljs-number">10</span>).<span class="hljs-title function_ invoke__">unwrap</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>)<br>        .<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">for</span> &amp;prime <span class="hljs-keyword">in</span> primes.<span class="hljs-title function_ invoke__">iter</span>() &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">largest_stable_number</span>(<span class="hljs-number">0</span>, &amp;<span class="hljs-keyword">mut</span> <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; num_digits], &amp;limit, prime, <span class="hljs-literal">true</span>);<br>        ans = ans.<span class="hljs-title function_ invoke__">max</span>(result);<br>    &#125;<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, ans);<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_i64</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i64</span> &#123;<br>    <span class="hljs-keyword">use</span> std::io::&#123;<span class="hljs-keyword">self</span>, Read, Write&#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">number</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    io::<span class="hljs-title function_ invoke__">stdout</span>().<span class="hljs-title function_ invoke__">flush</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">stdin</span> = io::<span class="hljs-title function_ invoke__">stdin</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span> = [<span class="hljs-number">0</span>; <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">started</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Ok</span>(()) = stdin.<span class="hljs-title function_ invoke__">read_exact</span>(buffer.<span class="hljs-title function_ invoke__">as_mut</span>()) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">c</span> = buffer[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> <span class="hljs-type">char</span>;<br>        <span class="hljs-keyword">if</span> !started &#123;<br>            <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;-&#x27;</span> || c.<span class="hljs-title function_ invoke__">is_numeric</span>() &#123;<br>                started = <span class="hljs-literal">true</span>;<br>                number.<span class="hljs-title function_ invoke__">push</span>(c);<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> c.<span class="hljs-title function_ invoke__">is_numeric</span>() &#123;<br>                number.<span class="hljs-title function_ invoke__">push</span>(c);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    number.parse::&lt;<span class="hljs-type">i64</span>&gt;().<span class="hljs-title function_ invoke__">unwrap_or</span>(<span class="hljs-number">0</span>)<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">primes</span>(upper_limit: <span class="hljs-type">i64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i64</span>&gt; &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">sieve</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-literal">true</span>; (upper_limit + <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>];<br>    sieve[<span class="hljs-number">0</span>] = <span class="hljs-literal">false</span>;<br>    sieve[<span class="hljs-number">1</span>] = <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">2</span>..=((upper_limit <span class="hljs-keyword">as</span> <span class="hljs-type">f64</span>).<span class="hljs-title function_ invoke__">sqrt</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>) &#123;<br>        <span class="hljs-keyword">if</span> !sieve[i <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>] &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> <span class="hljs-variable">j</span> <span class="hljs-keyword">in</span> (i * i..=upper_limit).<span class="hljs-title function_ invoke__">step_by</span>(i <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>) &#123;<br>            sieve[j <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>] = <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    sieve<br>        .<span class="hljs-title function_ invoke__">iter</span>()<br>        .<span class="hljs-title function_ invoke__">enumerate</span>()<br>        .<span class="hljs-title function_ invoke__">filter_map</span>(|(i, &amp;is_prime)| <span class="hljs-keyword">if</span> is_prime &#123; <span class="hljs-title function_ invoke__">Some</span>(i <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>) &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-literal">None</span> &#125;)<br>        .<span class="hljs-title function_ invoke__">collect</span>()<br>&#125;<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">largest_stable_number</span>(<br>    cur: <span class="hljs-type">usize</span>,<br>    digits: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;,<br>    limit: &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;,<br>    leftover: <span class="hljs-type">i64</span>,<br>    with_limit: <span class="hljs-type">bool</span>,<br>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i64</span> &#123;<br>    <span class="hljs-keyword">if</span> leftover &lt; <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> cur == digits.<span class="hljs-title function_ invoke__">len</span>() &#123;<br>        <span class="hljs-keyword">if</span> leftover != <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">result</span> = <span class="hljs-number">0</span> <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>;<br>        <span class="hljs-keyword">for</span> &amp;digit <span class="hljs-keyword">in</span> digits.<span class="hljs-title function_ invoke__">iter</span>() &#123;<br>            result = result * <span class="hljs-number">10</span> + digit <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">upper_bound</span> = <span class="hljs-keyword">if</span> with_limit &#123; limit[cur] &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-number">9</span> &#125;;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">lower_bound</span> = <span class="hljs-keyword">if</span> cur == <span class="hljs-number">0</span> &#123; <span class="hljs-number">0</span> &#125; <span class="hljs-keyword">else</span> &#123; digits[cur - <span class="hljs-number">1</span>] &#125;;<br>    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> (lower_bound..=upper_bound).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br>        digits[cur] = i;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_with_limit</span> = with_limit;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">new_leftover</span> = leftover;<br>        <span class="hljs-keyword">if</span> i &lt; limit[cur] &#123;<br>            new_with_limit = <span class="hljs-literal">false</span>;<br>        &#125;<br>        new_leftover -= i <span class="hljs-keyword">as</span> <span class="hljs-type">i64</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">result</span> = <span class="hljs-title function_ invoke__">largest_stable_number</span>(cur + <span class="hljs-number">1</span>, digits, limit, new_leftover, new_with_limit);<br>        <span class="hljs-keyword">if</span> result != -<span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>    &#125;<br>    -<span class="hljs-number">1</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Conclusion-ÊÄªÁªì"><a href="#Conclusion-ÊÄªÁªì" class="headerlink" title="Conclusion ÊÄªÁªì"></a>Conclusion ÊÄªÁªì</h2><p>The main focus of this problem is search pruning; a solid foundation in search algorithms is sufficient to solve it easily.</p><p>ËøôÈ¢òÁöÑËÄÉÂØüÁÇπ‰∏ªË¶ÅÊòØÊêúÁ¥¢Ââ™ÊûùÔºåÊúâÊâéÂÆûÁöÑÊêúÁ¥¢ÁÆóÊ≥ïÂü∫Á°ÄÂç≥ÂèØËΩªÊùæÊãø‰∏ãÊú¨È¢ò„ÄÇ</p>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FTQC Resource Estimator</title>
    <link href="/posts/26c5e265/"/>
    <url>/posts/26c5e265/</url>
    
    <content type="html"><![CDATA[<!-- @format --><h1 id="Why-We-Need-an-FTQC-Resource-Estimator"><a href="#Why-We-Need-an-FTQC-Resource-Estimator" class="headerlink" title="Why We Need an FTQC Resource Estimator"></a>Why We Need an FTQC Resource Estimator</h1><p>On NISQ (Noisy Intermediate-scale Quantum) devices, measuring the resource cost of an algorithm is very intuitive. By counting the number of gates the algorithm uses, the number of physical qubits, the circuit depth, and taking into account various hardware error rates and fidelities, one can roughly estimate an algorithm‚Äôs performance. However, in FTQC (Fault-Tolerant Quantum Computing) things become more complex. The most significant difference is that FTQC uses error-correcting codes with extra redundant physical qubits to suppress errors‚Äîsee my previous blog post for details.</p><p>Consequently, in FTQC the ‚Äúqubit count‚Äù refers to the number of <strong>encoded logical qubits</strong>, not the actual physical qubits. Each logical qubit typically requires dozens to hundreds of physical qubits for encoding. Moreover, certain special operations‚Äîsuch as the T gate in the surface code‚Äîdemand additional physical qubits to implement. This makes resource accounting in FTQC far less straightforward. Therefore, we need a dedicated mechanism‚Äîthe FTQC <strong>Resource Estimator</strong>‚Äîto measure algorithmic resource usage accurately.</p><h2 id="Runtime"><a href="#Runtime" class="headerlink" title="Runtime"></a>Runtime</h2><p>Estimating runtime in FTQC is relatively straightforward. First, we must know the time required for one round of quantum-error-correction (QEC). Using the surface code as an example, each correction round on the device involves the circuit below:</p><p><img src="/posts/26c5e265/FTQC%E9%87%8F%E5%AD%90%E8%B5%84%E6%BA%90%E8%AE%A1%E6%95%B0%E5%99%A8/1.png"></p><p>From this, one QEC round takes the time for two single-qubit gates plus four two-qubit gates. Moreover, to reduce measurement error, FTQC typically performs multiple correction rounds per gate. Thus the total runtime can be estimated as:</p><p>$$<br>T_{total} &#x3D; d_{rounds} \times depth \times \bigl(2,T_{one} + 4,T_{two}\bigr)<br>$$</p><h2 id="Physical-Qubit-Count"><a href="#Physical-Qubit-Count" class="headerlink" title="Physical Qubit Count"></a>Physical Qubit Count</h2><p>Estimating the physical qubit count is more involved. In surface-code QEC, the total physical qubits consist of two parts:  </p><ol><li>Physical qubits for the circuit‚Äôs logical qubits.  </li><li>Physical qubits for the magic-state factories (e.g., T-factories).</li></ol><h3 id="Code-Distance"><a href="#Code-Distance" class="headerlink" title="Code Distance"></a>Code Distance</h3><p>A code‚Äôs distance is (d), which determines its ability to correct up to (\left\lfloor\frac{d-1}{2}\right\rfloor) errors. In the surface code, one logical qubit with distance (d) requires (2d^2 - 1) physical qubits. Thus the chosen distance (d) sets both the physical-to-logical qubit ratio and the logical-qubit error rate. While larger (d) yields lower logical error rates, physical qubits are costly. Therefore, the Resource Estimator chooses the <strong>minimal (d)</strong> that ensures the algorithm‚Äôs expected total errors remain below one. This (d) is found via a combination of stimulus simulation, error-rate amplification, and binary search.</p><h3 id="Circuit-Physical-Qubit-Count"><a href="#Circuit-Physical-Qubit-Count" class="headerlink" title="Circuit Physical Qubit Count"></a>Circuit Physical Qubit Count</h3><p>Once (d) is determined, the physical qubits for the circuit‚Äôs logical qubits are:</p><p>$$<br>N_{pqubits} &#x3D; N_{lqubits} \times \bigl(2,d^2 - 1\bigr)<br>$$</p><h3 id="Magic-State-Factory-Physical-Qubit-Count"><a href="#Magic-State-Factory-Physical-Qubit-Count" class="headerlink" title="Magic-State Factory Physical Qubit Count"></a>Magic-State Factory Physical Qubit Count</h3><p>This completes the resource accounting. In any QEC code, there will be at least one gate that cannot be directly implemented; for the surface code, that is the T gate. Surface-code implementations only natively support Clifford gates, so non-Clifford gates require magic states generated by T-factories. Each T-factory produces one magic state, which, when entangled with a logical qubit, implements an approximate T gate.</p><p>Each T-factory itself uses 15 logical qubits, so its physical-qubit cost depends on the number of factories needed. That number is set by the T-gate frequency in the circuit. A single factory‚Äôs magic-state generation time is</p><p>$$<br>T_{Tstate} &#x3D; d_{rounds} \times 10 \times \bigl(2,T_{one} + 4,T_{two}\bigr),,<br>$$</p><p>so its generation rate is (T_{freq} &#x3D; 1 &#x2F; T_{Tstate}). Dividing the circuit‚Äôs T-gate rate (\bigl(N_{TGate}&#x2F;T_{total}\bigr)) by (T_{freq}) and rounding up gives</p><p>$$<br>N_{TFactory} &#x3D; \left\lceil \frac{N_{TGate}&#x2F;T_{total}}{T_{freq}} \right\rceil.<br>$$</p><p>Finally, the physical qubits for all T-factories are:</p><p>$$<br>N &#x3D; N_{TFactory} \times 15 \times \bigl(2,d^2 - 1\bigr).<br>$$</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>With the above, the FTQC Resource Estimator has accounted for all key algorithmic resources. For implementation details, see the code at:<br><a href="https://github.com/melody0123/QAOA4FTQC">https://github.com/melody0123/QAOA4FTQC</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Quantum Computing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>FTQCÈáèÂ≠êËµÑÊ∫êËÆ°Êï∞Âô®</title>
    <link href="/posts/54f4eb84/"/>
    <url>/posts/54f4eb84/</url>
    
    <content type="html"><![CDATA[<h1 id="‰∏∫‰ªÄ‰πàÈúÄË¶ÅFTQCËµÑÊ∫êËÆ°Êï∞Âô®"><a href="#‰∏∫‰ªÄ‰πàÈúÄË¶ÅFTQCËµÑÊ∫êËÆ°Êï∞Âô®" class="headerlink" title="‰∏∫‰ªÄ‰πàÈúÄË¶ÅFTQCËµÑÊ∫êËÆ°Êï∞Âô®"></a>‰∏∫‰ªÄ‰πàÈúÄË¶ÅFTQCËµÑÊ∫êËÆ°Êï∞Âô®</h1><p>Âú®NISQ(Noisy Intermediate-scale Quantum)ËÆæÂ§á‰∏äÔºåË°°Èáè‰∏Ä‰∏™ÁÆóÊ≥ïÊ∂àËÄóÁöÑËµÑÊ∫êÊòØÈùûÂ∏∏Áõ¥ËßÇÁöÑ„ÄÇÈÄöËøáÁÆóÊ≥ï‰ΩøÁî®ÁöÑÈó®ÁöÑÊï∞ÈáèÔºåÁâ©ÁêÜÊØîÁâπÁöÑÊï∞ÈáèÔºåÁîµË∑ØÁöÑÊ∑±Â∫¶ÔºåÁâ©ÁêÜÁ°¨‰ª∂ÁöÑÂêÑÁßçÈîôËØØÁéá‰∏é‰øùÁúüÂ∫¶Â∞±ÂèØ‰ª•Â§ßËá¥ÁöÑËØÑ‰º∞‰∏Ä‰∏™ÁÆóÊ≥ï„ÄÇ‰ΩÜÂú®FTQC(Fault Tolerant Quantum Computing)‰∏ä‰∫ãÊÉÖÂç¥Â§çÊùÇ‰∏Ä‰∫õ„ÄÇÊúÄÂÖ≥ÈîÆÁöÑ‰∏çÂêåÂú®‰∫éFTQC‰ΩøÁî®Á∫†ÈîôÁ†ÅÁöÑÊñπÂºèÈÄöËøáËÆæÁΩÆÊõ¥Â§öÂÜó‰ΩôÁöÑÁâ©ÁêÜÊØîÁâπÊù•Èôç‰ΩéÈîôËØØÁéáÔºåÂÖ∑‰ΩìÁöÑÁªÜËäÇÂèØ‰ª•ÂèÇËÄÉ‰πãÂâçÁöÑÂçöÊñá„ÄÇ</p><p>‰ΩÜÂØπÂ∫îÁöÑÔºåÂú®FTQC‰∏äÔºåÈáèÂ≠êÁîµË∑Ø‰ΩøÁî®ÁöÑÊØîÁâπÊï∞ÈáèÊòØÁºñÁ†ÅÂêéÁöÑÈÄªËæëÊØîÁâπÁöÑÊï∞ÈáèËÄåÈùûÁúüÂÆûÁöÑÁâ©ÁêÜÊØîÁâπÊï∞Èáè„ÄÇÂØπ‰∫éÊØè‰∏Ä‰∏™ÈÄªËæëÊØîÁâπÔºåFTQCÈÉΩË¶Å‰ΩøÁî®Êï∞ÂçÅÂà∞Êï∞Áôæ‰∏çÂÆöÁöÑÁâ©ÁêÜÊØîÁâπÊù•ÁºñÁ†ÅÂÆÉ„ÄÇÂÜçÂä†‰∏äÊúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÂØπ‰∫ésurface codeÊù•ËØ¥ÊòØT gate,ÊØè‰∏Ä‰∏™ÈÉΩÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÁâ©ÁêÜÊØîÁâπÊù•ÂÆûÁé∞„ÄÇËøôËÆ©FTQC‰∏äÁöÑËµÑÊ∫êÁªüËÆ°‰∏éËØÑ‰º∞ÂèòÂæóÊ≤°ÊúâÈÇ£‰πàÁõ¥ËßÇ„ÄÇÊâÄ‰ª•Âú®FTQC‰∏äÔºåÊàë‰ª¨ÈúÄË¶Å‰∏ÄÂ•óÁâπÊÆäÁöÑÊú∫Âà∂Êù•ÂÆûÁé∞ÂØπ‰∫éÁÆóÊ≥ï‰ΩøÁî®ËµÑÊ∫êÁöÑË°°Èáè„ÄÇ</p><h1 id="ËøêË°åÊó∂Èó¥"><a href="#ËøêË°åÊó∂Èó¥" class="headerlink" title="ËøêË°åÊó∂Èó¥"></a>ËøêË°åÊó∂Èó¥</h1><p>Âú®FTQC‰∏äÔºåËøêË°åÊó∂Èó¥ÊòØÁõ∏ÂØπÂÆπÊòìÁªüËÆ°ÁöÑ„ÄÇÈ¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìÁöÑÊòØ‰∏ÄËΩÆÈáèÂ≠êÁ∫†ÈîôÁ†ÅÁ∫†ÈîôÊâÄÈúÄË¶ÅÁöÑÊó∂Èó¥„ÄÇËøôÈáå‰ΩøÁî®Ë°®Èù¢Á†Å‰Ωú‰∏∫Ê†∑‰æãÔºåÂØπ‰∫éÊØè‰∏ÄËΩÆÁ∫†ÈîôÔºåËøêË°åÂú®ÈáèÂ≠êËÆæÂ§á‰∏äÁöÑÁîµË∑Ø‰∏∫Ôºö</p><p><img src="/posts/54f4eb84/1.png"></p><p>Áî±Ê≠§ÂèØËßÅÔºå‰∏ÄËΩÆÁ∫†ÈîôÊâÄÈúÄË¶ÅÁöÑÊó∂Èó¥ÊòØ‰∏§‰∏™ÂçïÊØîÁâπÈó®ÁöÑÊó∂Èó¥Âä†‰∏äÂõõ‰∏™ÂèåÊØîÁâπÈó®ÁöÑÊó∂Èó¥„ÄÇÂêåÊó∂Ôºå‰∏∫‰∫ÜÂáèÂ∞ëÊµãÈáèÈîôËØØÔºåFTQCÈÄöÂ∏∏ÊØè‰∏Ä‰∏™Èó®ÈÉΩ‰ºöÊâßË°åÂ§öËΩÆÁ∫†ÈîôÊù•Èôç‰ΩéÈîôËØØÁéá„ÄÇËøôÊ†∑ÔºåÊÄªËøêË°åÊó∂Èó¥ÁöÑ‰º∞ÁÆóÂÖ¨ÂºèÂ∞±ÂèØ‰ª•ÂæóÂà∞‰∫ÜÔºö</p><p>$$<br>T_{total} &#x3D; d_{rounds} * depth * (2 * T_{one} + 4 * T_{two})<br>$$</p><h1 id="Áâ©ÁêÜÊØîÁâπÊï∞Èáè"><a href="#Áâ©ÁêÜÊØîÁâπÊï∞Èáè" class="headerlink" title="Áâ©ÁêÜÊØîÁâπÊï∞Èáè"></a>Áâ©ÁêÜÊØîÁâπÊï∞Èáè</h1><p>‰º∞ÁÆóÁâ©ÁêÜÊØîÁâπÊï∞ÈáèÂàôÊòØ‰∏Ä‰∏™Êõ¥Âä†Â§çÊùÇÁöÑÈóÆÈ¢òÔºåÂú®Âü∫‰∫éË°®Èù¢Á†ÅÁöÑÈáèÂ≠êÁ∫†ÈîôÊú∫Âà∂‰∏≠ÔºåÁâ©ÁêÜÊØîÁâπÁöÑÊï∞ÈáèÂèØ‰ª•ÂàÜ‰∏∫‰∏§‰∏™ÈÉ®ÂàÜÁªüËÆ°Ôºö</p><ol><li>ÁîµË∑ØÊú¨Ë∫´ÈÄªËæëÊØîÁâπÊâÄÁî®ÁöÑÁâ©ÁêÜÊØîÁâπÁöÑÊï∞Èáè„ÄÇ</li><li>ÁâπÊÆäÈó®Â∑•ÂéÇÊâÄ‰ΩøÁî®ÁöÑÁâ©ÁêÜÊØîÁâπÁöÑÊï∞Èáè„ÄÇ</li></ol><h2 id="Á†ÅË∑ù"><a href="#Á†ÅË∑ù" class="headerlink" title="Á†ÅË∑ù"></a>Á†ÅË∑ù</h2><p>‰∏Ä‰∏™Á∫†ÈîôÁ†ÅÁöÑÁ†ÅË∑ù‰∏∫$d$ÔºåÁ≠âÂêå‰∫éËøô‰∏™Á∫†ÈîôÁ†ÅÂèØ‰ª•Á∫†Ê≠£$\lfloor\frac{d-1}{2}\rfloor$‰∏™ÈîôËØØ„ÄÇÂú®Ë°®Èù¢Á†ÅÈáåÔºåÁ†ÅË∑ù‰∏∫$d$ÁöÑË°®Èù¢Á†ÅÈúÄË¶ÅÁî®$2d^2 - 1$‰∏™Áâ©ÁêÜÊØîÁâπÂÆûÁé∞‰∏Ä‰∏™ÈÄªËæëÊØîÁâπ„ÄÇÊâÄ‰ª•Á∫†ÈîôÁ†Å‰ΩøÁî®Â§öÂ∞ëÁ†ÅË∑ùÂÜ≥ÂÆö‰∫Ü‰∏Ä‰∏™ÈÄªËæëÊØîÁâπÂØπÂ∫îÂ§öÂ∞ëÁâ©ÁêÜÊØîÁâπ‰ª•ÂèäËøô‰∏™ÈÄªËæëÊØîÁâπÁöÑÈîôËØØÁéáÊòØÂ§öÂ∞ë„ÄÇ‰∏ÄËà¨Êù•ËØ¥Ôºå$d$Ë∂äÂ§ßÔºåÈúÄË¶ÅÁöÑÁâ©ÁêÜÊØîÁâπË∂äÂ§öÔºåÁ∫†ÈîôÊÄßËÉΩË∂äÂ•Ω„ÄÇ</p><p>‰ªéÊõ¥‰ΩéÁöÑÈîôËØØÁéáÊù•ËØ¥ÔºåÁ†ÅË∑ùÂΩìÁÑ∂ÊòØË∂äÈ´òË∂äÂ•ΩÔºå‰ΩÜÊòØÁâ©ÁêÜÈáèÂ≠êÊØîÁâπÊï∞ÈáèÊòØÂÆùË¥µÁöÑËµÑÊ∫ê„ÄÇÊâÄ‰ª•Âú®FTQCËµÑÊ∫êËÆ°Êï∞Âô®ÈáåÔºåÁ†ÅË∑ùË¢´ËÆæÂÆö‰∏∫ÊòØ‚ÄúÊª°Ë∂≥Êï¥‰∏™ÁÆóÊ≥ïÁöÑÊúüÊúõÈîôËØØÊï∞Èáè&lt;1‚ÄùÁöÑÊúÄÂ∞èÂÄº„ÄÇËµÑÊ∫êËÆ°Êï∞Âô®ÈÄöËøástimÊ®°Êãü+ÂÄçÂ¢û+‰∫åÂàÜÁöÑÊñπÊ≥ïÔºåÊù•Á°ÆÂÆö$d$ÁöÑÂÄºÂÖ∑‰ΩìÊòØÂ§öÂ∞ë„ÄÇ</p><h2 id="ÁîµË∑ØÁâ©ÁêÜÊØîÁâπÊï∞Èáè"><a href="#ÁîµË∑ØÁâ©ÁêÜÊØîÁâπÊï∞Èáè" class="headerlink" title="ÁîµË∑ØÁâ©ÁêÜÊØîÁâπÊï∞Èáè"></a>ÁîµË∑ØÁâ©ÁêÜÊØîÁâπÊï∞Èáè</h2><p>Á°ÆÂÆöÁ†ÅË∑ù‰πãÂêéÔºåÁîµË∑ØÁâ©ÁêÜÊØîÁâπÊï∞ÈáèÁöÑÂÖ¨ÂºèÂ∞±ÂæàÁÆÄÂçï‰∫ÜÔºö</p><p>$$<br>N_{pqubits} &#x3D; N_{lqubits} * (2 * d^2 - 1)<br>$$</p><h2 id="ÁâπÊÆäÈó®Â∑•ÂéÇÁâ©ÁêÜÊØîÁâπÊï∞Èáè"><a href="#ÁâπÊÆäÈó®Â∑•ÂéÇÁâ©ÁêÜÊØîÁâπÊï∞Èáè" class="headerlink" title="ÁâπÊÆäÈó®Â∑•ÂéÇÁâ©ÁêÜÊØîÁâπÊï∞Èáè"></a>ÁâπÊÆäÈó®Â∑•ÂéÇÁâ©ÁêÜÊØîÁâπÊï∞Èáè</h2><p>Ëøô‰∏™ÂÄºÊòØÁªüËÆ°FTQC‰ΩøÁî®ËµÑÊ∫êÁöÑÊúÄÂêé‰∏ÄÂùóÊãºÂõæ„ÄÇÂØπ‰∫é‰ªª‰Ωï‰∏ÄÁßçÁ∫†ÈîôÁ†ÅÊù•ËØ¥ÔºåÊÉ≥Ë¶ÅÂÆûÁé∞Ê®°ÊãüÊâÄÊúâÈáèÂ≠êÊØîÁâπÈó®ÁöÑÊìç‰ΩúÔºåÂ∞±ÂøÖÁÑ∂‰ºöÂ≠òÂú®‰∏Ä‰∏™Èó®ÊòØÊó†Ê≥ïÁõ¥Êé•ÂÆûÁé∞ÁöÑ„ÄÇÂØπ‰∫éË°®Èù¢Á†ÅÊù•ËØ¥Ëøô‰∏™Êìç‰ΩúÂ∞±ÊòØT-gate„ÄÇÊôÆÈÄöÁöÑË°®Èù¢Á†ÅÂè™ËÉΩÂÆûÁé∞CliffordÈó®ÁöÑÁõ¥Êé•Ê®°ÊãüÔºåÂØπ‰∫éÈùûCliffordÈó®ÔºåË°®Èù¢Á†ÅÂøÖÈ°ªÂºïËøõT GateÊù•ËøõË°åËøë‰ººÊ®°Êãü„ÄÇÁõÆÂâçÂú®Ë°®Èù¢Á†ÅÈáåÂÆûÁé∞T-GateÁöÑÊñπÊ≥ïÊòØT-Factory„ÄÇÊØè‰∏™T-FactoryÂèØ‰ª•ÁîüÊàê‰∏Ä‰∏™È≠îÊ≥ïÈáèÂ≠êÊÄÅÔºåËÆ©Ëøô‰∏™ÈáèÂ≠êÊÄÅÂíåÈÄªËæëÊØîÁâπÁ∫†Áº†Â∞±ÂèØ‰ª•ÂÆûÁé∞Ëøë‰ººT-GateÁöÑÊìç‰Ωú„ÄÇ</p><p>ÂØπ‰∫éÊØè‰∏Ä‰∏™T-factoryÊù•ËØ¥ÔºåÂÆÉÈúÄË¶Å15‰∏™ÈÄªËæëÊØîÁâπÔºåÊâÄ‰ª•ÁªüËÆ°T-factoryÊâÄÈúÄË¶ÅÁöÑÁâ©ÁêÜÊØîÁâπÁöÑÊï∞ÈáèÂ∞±ÈúÄË¶ÅÁü•ÈÅìT-FactoryÁöÑÊï∞Èáè„ÄÇËÄåT-FactoryÁöÑÊï∞ÈáèÁî±T-GateÂú®ÁîµË∑ØÈáåÊâÄÈúÄÁöÑÈ¢ëÁéáÂÜ≥ÂÆö„ÄÇÂØπ‰∫éÊØè‰∏™T-FactoryÔºåÂÆÉÈúÄË¶ÅÁîüÊàê‰∏Ä‰∏™È≠îÊ≥ïÈáèÂ≠êÊÄÅÁöÑÊó∂Èó¥ÊòØ$T_{Tstate}&#x3D;d_{rounds} * 10 * (2 * T_{one} + 4 * T_{two})$ÔºåÊâÄ‰ª•T-FactoryÁîüÊàêÈ≠îÊ≥ïÈáèÂ≠êÊÄÅÁöÑÈÄüÂ∫¶‰∏∫$T_{freq}&#x3D;\frac{1}{T_{Tstate}}$„ÄÇÁî®ÁîµË∑ØÊâÄÈúÄÁöÑT GateÁöÑÈ¢ëÁéáÈô§‰ª•T FactoryÁîüÊàêÁöÑÈÄüÂ∫¶Âêë‰∏äÂèñÊï¥ÔºåÂ∞±ÂèØ‰ª•ÂæóÂà∞T FactoryÊâÄÈúÄÁöÑÊï∞ÈáèÔºö$N_{TFactory} &#x3D; \frac{\frac{N_{TGate}}{T_{Total}}}{T_{freq}}$</p><p> ÊúÄÂêéÔºåT FactoryÊâÄÈúÄÁöÑÁâ©ÁêÜÊØîÁâπÊï∞ÈáèÂç≥‰∏∫$N &#x3D; N_{TFactory} * 15 * (2 * d^2 - 1)$</p><h1 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h1><p>Ëá≥Ê≠§ÔºåÊâÄÊúâFTQCÈáèÂ≠êÁÆóÊ≥ïÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫êÈÉΩÂ∑≤ÁªèÁªüËÆ°ÁªìÊùüÔºåÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÂÆûÁé∞ÂèØ‰ª•ÂèÇËÄÉÔºö<br><a href="https://github.com/melody0123/QAOA4FTQC">https://github.com/melody0123/QAOA4FTQC</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Quantum Computing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>How to setup and encrypt POSTEO mail service | Â¶Ç‰ΩïÁî≥ËØ∑Âπ∂Âä†ÂØÜPOSTEO mailÊúçÂä°</title>
    <link href="/posts/bd9f93f7/"/>
    <url>/posts/bd9f93f7/</url>
    
    <content type="html"><![CDATA[<!-- @format --><h2 id="Why-You-Need-a-Privacy-Focused-Email"><a href="#Why-You-Need-a-Privacy-Focused-Email" class="headerlink" title="Why You Need a Privacy-Focused Email"></a>Why You Need a Privacy-Focused Email</h2><ol><li><p>Avoid Over-Centralization and Protect Your Real Identity: Most people currently use a setup consisting of a Gmail account plus a work or school email. Both are strongly tied to their real-world identities. If numerous services are integrated with these accounts, there‚Äôs a higher risk of exposing personal identity and sensitive information.</p></li><li><p>Data Collection: Most ‚Äúfree‚Äù email services collect users‚Äô private information and profit by selling this data or using it for targeted advertising. This not only exposes your real information to the provider but also increases the risk of data leaks. A good privacy email service should offer end-to-end encryption, encrypted email content, and multi-factor authentication to prevent anyone ‚Äî including the provider ‚Äî from accessing your data.</p></li><li><p>Simplified Management: Most email services that focus on privacy offer aliasing features, allowing users to easily hide their real email addresses and block emails from specific websites directly.</p></li></ol><h2 id="‰∏∫‰ªÄ‰πàÈúÄË¶Å‰∏Ä‰∏™ÈöêÁßÅÈÇÆÁÆ±"><a href="#‰∏∫‰ªÄ‰πàÈúÄË¶Å‰∏Ä‰∏™ÈöêÁßÅÈÇÆÁÆ±" class="headerlink" title="‰∏∫‰ªÄ‰πàÈúÄË¶Å‰∏Ä‰∏™ÈöêÁßÅÈÇÆÁÆ±"></a>‰∏∫‰ªÄ‰πàÈúÄË¶Å‰∏Ä‰∏™ÈöêÁßÅÈÇÆÁÆ±</h2><ol><li><p>ÈÅøÂÖçËøáÂ∫¶‰∏≠ÂøÉÂåñ‰øùËØÅÁúüÂÆû‰ø°ÊÅØÁöÑÂÆâÂÖ®ÔºöÁõÆÂâçËÆ∏Â§ö‰∫∫ÁöÑÈÇÆÁÆ±ÈÖçÁΩÆÊòØ‰∏Ä‰∏™GmailÈÇÆÁÆ±Âä†Â∑•‰Ωú&#x2F;Â≠¶Ê†°ÈÇÆÁÆ±„ÄÇËøô‰∏§ÁßçÈÇÆÁÆ±ÈÉΩÊòØ‰∏éÁé∞ÂÆûË∫´‰ªΩÂº∫ÊåÇÈí©ÁöÑÔºåÂ¶ÇÊûúÊúâÂ§ßÈáèÊúçÂä°‰∏éËøô‰∏§‰∏™ÈÇÆÁÆ±ÈõÜÊàêÔºåÁúüÂÆûË∫´‰ªΩ‰∏éÈáçË¶Å‰ø°ÊÅØÊö¥Èú≤ÁöÑÈ£éÈô©Ë∂äÂ§ß„ÄÇ</p></li><li><p>Êï∞ÊçÆÊî∂ÈõÜÔºöÂ§ßÈÉ®ÂàÜÁöÑ‚ÄúÂÖçË¥π‚ÄùÈÇÆÁÆ±ÊúçÂä°‰ºöÂØπÁî®Êà∑ÁöÑÈöêÁßÅ‰ø°ÊÅØËøõË°åÊî∂ÈõÜÔºåÂπ∂ÈÄöËøáË¥©Âçñ‰ø°ÊÅØÔºåÊäïÊîæÂπøÂëäÁ≠âË°å‰∏∫ÁâüÂà©„ÄÇËøô‰∏ç‰ªÖËÆ©‰∏™‰∫∫ÁúüÂÆû‰ø°ÊÅØÂú®ÊúçÂä°ÂïÜÈù¢ÂâçÊö¥Èú≤Êó†ÁñëÔºåÂêåÊó∂Ëøõ‰∏ÄÊ≠•Âä†Ââß‰∫Ü‰∏™‰∫∫ÁúüÂÆû‰ø°ÊÅØÊ≥ÑÊºèÁöÑÈ£éÈô©„ÄÇ‰∏Ä‰∏™ËâØÂ•ΩÁöÑÈöêÁßÅÈÇÆ‰ª∂ÊúçÂä°Â∫îÂΩìÊîØÊåÅÂÖ®ÁõòÂä†ÂØÜÔºåÈÇÆÁÆ±ÂÜÖÂÆπÂä†ÂØÜÂíåÂ§öÂõ†Á¥†ËÆ§ËØÅÁ≠âÂäüËÉΩ‰ª•Èò≤Ê≠¢‰ªª‰Ωï‰∫∫ÂæóÂà∞Áî®Êà∑ÁöÑÊï∞ÊçÆÔºåÂåÖÊã¨ÊúçÂä°ÂïÜËá™Â∑±„ÄÇ</p></li><li><p>ÁÆ°ÁêÜÁÆÄÂåñÔºöÂ§ßÂ§öÊï∞‰ª•ÈöêÁßÅ‰∏∫ÂÆ£‰º†ÁÇπÁöÑÈÇÆÁÆ±ÊúçÂä°ÈÉΩÊèê‰æõÂà´ÂêçÊúçÂä°ÔºåÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÈöêËóèËá™Â∑±ÁöÑÁúüÂÆûÈÇÆÁÆ±Âú∞ÂùÄÔºå‰ª•ÂèäÁõ¥Êé•Â±èËîΩÊù•Ëá™Êüê‰∫õÁΩëÁ´ôÁöÑÈÇÆ‰ª∂„ÄÇ</p></li></ol><h2 id="Why-POSTEO-mail-service-‰∏∫‰ªÄ‰πàÊé®ËçêPOSTEO-mailÊúçÂä°Ôºü"><a href="#Why-POSTEO-mail-service-‰∏∫‰ªÄ‰πàÊé®ËçêPOSTEO-mailÊúçÂä°Ôºü" class="headerlink" title="Why POSTEO mail service? ‰∏∫‰ªÄ‰πàÊé®ËçêPOSTEO-mailÊúçÂä°Ôºü"></a>Why POSTEO mail service? ‰∏∫‰ªÄ‰πàÊé®ËçêPOSTEO-mailÊúçÂä°Ôºü</h2><ul><li><p>Privacy and Security: POSTEO mail service supports the following encryption methods:</p><ul><li>Public Key Encryption: Emails are encrypted using the user‚Äôs uploaded PGP public key. This ensures that the service provider cannot see the content (excluding metadata).</li><li>SSL&#x2F;TLS Encryption: Provides SSL&#x2F;TLS encryption to protect privacy during email transmission.</li><li>Disk Encryption: User data on the server is encrypted via account password, including content and metadata.</li><li>Two-Factor Authentication &amp; App Passwords: Use two-factor authentication (e.g., two-factor authentication) to reduce the risk after the primary password is leaked. Use app passwords to reduce the risk of primary password leakage.</li></ul></li><li><p>Availability:</p><ul><li>Standard service includes IMAP, POP3, SMTP protocols, and supports various email formats and encodings.</li><li>Supports calendar and custom aliases (free 2).</li></ul></li><li><p>Pricing:</p><ul><li>Free service: None</li><li>Standard service: 1 EUR&#x2F;month</li></ul></li><li><p>ÈöêÁßÅÂÆâÂÖ®: POSTEO-mailÊúçÂä°ÊîØÊåÅÁöÑÂä†ÂØÜÊñπÂºèÊúâ‰ª•‰∏ãÂá†Áßç:</p><ul><li>ÂÖ¨Èí•Âä†ÂØÜ: ‰ΩøÁî®Áî®Êà∑Ëá™Â∑±‰∏ä‰º†ÁöÑPGPÂÖ¨Èí•ÂØπÈÇÆ‰ª∂ËøõË°åÂä†ÂØÜ„ÄÇ‰øùËØÅÈÇÆ‰ª∂ÂØπÊúçÂä°ÂïÜ‰∏çÂèØËßÅ„ÄÇÔºà‰∏çÂåÖÊã¨ÂÖÉÊï∞ÊçÆÔºâ</li><li>SSL&#x2F;TLSÂä†ÂØÜ: Êèê‰æõSSL&#x2F;TLSÂä†ÂØÜÔºå‰øùÊä§ÈÇÆ‰ª∂‰º†ËæìËøáÁ®ã‰∏≠ÁöÑÈöêÁßÅ„ÄÇ</li><li>Á°¨ÁõòÂä†ÂØÜ: ÂØπÊúçÂä°Âô®‰∏äÁöÑÁî®Êà∑Êï∞ÊçÆÈÄöËøáË¥¶Êà∑ÂØÜÁ†ÅÂä†ÂØÜÔºåÂåÖÊã¨ÂÜÖÂÆπÂíåÂÖÉÊï∞ÊçÆ„ÄÇ</li><li>Â§öÂõ†Á¥†ËÆ§ËØÅ‰∏éÂ∫îÁî®ÂØÜÁ†Å: ‰ΩøÁî®Â§öÂõ†Á¥†ËÆ§ËØÅÔºàÂ¶ÇÂèåÂõ†Á¥†ËÆ§ËØÅÔºâÈôç‰Ωé‰∏ªÂØÜÁ†ÅÊ≥ÑÈú≤ÂêéÁöÑÂ®ÅËÉÅ„ÄÇ‰ΩøÁî®Â∫îÁî®ÂØÜÁ†ÅÈôç‰Ωé‰∏ªÂØÜÁ†ÅÊ≥ÑÊºèÁöÑÈ£éÈô©„ÄÇ</li></ul></li><li><p>ÂèØÁî®ÊÄßÔºö</p><ul><li>Ê†áÂáÜÊúçÂä°ÂåÖÂê´IMAP„ÄÅPOP3„ÄÅSMTPÁ≠âÂçèËÆÆÔºåÊîØÊåÅÂ§öÁßçÈÇÆ‰ª∂Ê†ºÂºèÂíåÁºñÁ†Å„ÄÇ</li><li>ÊîØÊåÅÊó•ÂéÜÔºåËá™ÂÆö‰πâÂà´ÂêçÔºàÂÖçË¥π2‰∏™Ôºâ„ÄÇ</li></ul></li><li><p>‰ª∑Ê†ºÔºö</p><ul><li>ÂÖçË¥πÊúçÂä°ÔºöÊó†</li><li>Ê†áÂáÜÊúçÂä°: 1 EUR&#x2F;month</li></ul></li></ul><h2 id="How-to-apply-and-configure-POSTEO-mail-service-Â¶Ç‰ΩïÁî≥ËØ∑Âπ∂ÈÖçÁΩÆPOSTEO-mailÊúçÂä°Ôºü"><a href="#How-to-apply-and-configure-POSTEO-mail-service-Â¶Ç‰ΩïÁî≥ËØ∑Âπ∂ÈÖçÁΩÆPOSTEO-mailÊúçÂä°Ôºü" class="headerlink" title="How to apply and configure POSTEO-mail service? Â¶Ç‰ΩïÁî≥ËØ∑Âπ∂ÈÖçÁΩÆPOSTEO-mailÊúçÂä°Ôºü"></a>How to apply and configure POSTEO-mail service? Â¶Ç‰ΩïÁî≥ËØ∑Âπ∂ÈÖçÁΩÆPOSTEO-mailÊúçÂä°Ôºü</h2><h3 id="Step-1-Register-for-a-POSTEO-mail-account-Á¨¨‰∏ÄÊ≠•ÔºöÊ≥®ÂÜå‰∏Ä‰∏™POSTEO-mailË¥¶Êà∑"><a href="#Step-1-Register-for-a-POSTEO-mail-account-Á¨¨‰∏ÄÊ≠•ÔºöÊ≥®ÂÜå‰∏Ä‰∏™POSTEO-mailË¥¶Êà∑" class="headerlink" title="Step 1: Register for a POSTEO-mail account Á¨¨‰∏ÄÊ≠•ÔºöÊ≥®ÂÜå‰∏Ä‰∏™POSTEO-mailË¥¶Êà∑"></a>Step 1: Register for a POSTEO-mail account Á¨¨‰∏ÄÊ≠•ÔºöÊ≥®ÂÜå‰∏Ä‰∏™POSTEO-mailË¥¶Êà∑</h3><p><a href="https://posteo.de/en">https://posteo.de/en</a></p><p>Click sign up button and sign up as any other email service.<br>Êåâ‰∏ãÊ≥®ÂÜåÊåâÈíÆÂπ∂ÂÉèÂÖ∂‰ªñÈÇÆÁÆ±‰∏ÄÊ†∑Ê≥®ÂÜå„ÄÇ</p><h3 id="Step-2-Configure-MFA-Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆMFA"><a href="#Step-2-Configure-MFA-Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆMFA" class="headerlink" title="Step 2: Configure MFA Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆMFA"></a>Step 2: Configure MFA Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆMFA</h3><p>Login to your POSTEO-mail account and open MFA in password and security page. Don‚Äôt forget to setup app password at the bottom of the same page if you want to use it on third-party mail client.</p><p>ÁôªÈôÜÂà∞‰Ω†ÁöÑPOSTEO-mailË¥¶Êà∑ÔºåÂú®ÂØÜÁ†ÅÂíåÂÆâÂÖ®È°µÈù¢ÊâìÂºÄMFA„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶Å‰ΩøÁî®ÂÆÉÂú®Á¨¨‰∏âÊñπÈÇÆ‰ª∂ÂÆ¢Êà∑Á´Ø‰∏äÔºåËØ∑ËÆæÁΩÆÂ∫îÁî®ÂØÜÁ†Å„ÄÇ</p><h3 id="Step-3-Configure-Full-Disk-Encryption-Á¨¨‰∏âÊ≠•-ÈÖçÁΩÆÂÖ®ÁõòÂä†ÂØÜ"><a href="#Step-3-Configure-Full-Disk-Encryption-Á¨¨‰∏âÊ≠•-ÈÖçÁΩÆÂÖ®ÁõòÂä†ÂØÜ" class="headerlink" title="Step 3: Configure Full Disk Encryption Á¨¨‰∏âÊ≠•: ÈÖçÁΩÆÂÖ®ÁõòÂä†ÂØÜ"></a>Step 3: Configure Full Disk Encryption Á¨¨‰∏âÊ≠•: ÈÖçÁΩÆÂÖ®ÁõòÂä†ÂØÜ</h3><p>In the same page, select the ‚ÄúEncryption‚Äù section, enter a password, and enable encryption. Note that once enabled, if the user‚Äôs encryption key is lost, they will be unable to read the email content again, even after resetting the password, so be sure to save the password.</p><p>Âú®ÂêåÊ†∑ÁöÑÈ°µÈù¢‰∏ãÈÄâÊã©‚ÄùÂä†ÂØÜ‚ÄùËøô‰∏ÄÊ†è, ËæìÂÖ•ÂØÜÁ†ÅÂπ∂ÂºÄÂêØÂä†ÂØÜ. Ê≥®ÊÑèËøôÈáåÂºÄÂêØ‰πãÂêéÂ¶ÇÊûúÁî®Êà∑ÂØÜÈí•‰∏¢Â§±, Â∞ÜÊó†Ê≥ïÂÜçÈáçÊñ∞ËØªÂèñÈÇÆÁÆ±ÈáåÁöÑÂÜÖÂÆπ, Âç≥‰ΩøÈáçÁΩÆÂØÜÁ†Å‰πü‰∏ÄÊ†∑, ÊâÄ‰ª•ËØ∑Âä°ÂøÖ‰øùÂ≠òÂ•ΩÂØÜÁ†Å.</p><h3 id="Step-4-Configure-Inbound-Encryption-Á¨¨ÂõõÊ≠•-ÈÖçÁΩÆÂÖ•Á´ôÂä†ÂØÜ"><a href="#Step-4-Configure-Inbound-Encryption-Á¨¨ÂõõÊ≠•-ÈÖçÁΩÆÂÖ•Á´ôÂä†ÂØÜ" class="headerlink" title="Step 4: Configure Inbound Encryption Á¨¨ÂõõÊ≠•: ÈÖçÁΩÆÂÖ•Á´ôÂä†ÂØÜ"></a>Step 4: Configure Inbound Encryption Á¨¨ÂõõÊ≠•: ÈÖçÁΩÆÂÖ•Á´ôÂä†ÂØÜ</h3><p>In the same page, select ‚ÄúPGP Encryption.‚Äù Here, you need to generate a PGP key locally and then send the public key to the mail server using your own email:</p><p>Âú®ÂêåÊ†∑ÁöÑÈ°µÈù¢‰∏ãÈÄâÊã©‚ÄùPGPÂä†ÂØÜ‚Äù, ËøôÈáåÈúÄË¶ÅÂú®Êú¨Âú∞ÂÖàÁîüÊàêPGPÂØÜÈí•, ÂÜçÈÄöËøáËá™Â∑±ÁöÑÈÇÆÁÆ±ÊääÂÖ¨Èí•ÂèëÈÄÅÁªôÈÇÆ‰ª∂ÊúçÂä°Âô®:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gpg --full-generate-key<br></code></pre></td></tr></table></figure><p>When prompted for ‚ÄúReal name,‚Äù press Enter to skip, or enter your Posteo email address.</p><p>Âú®ÊèêÁ§∫ËæìÂÖ•‚ÄúReal name‚ÄùÊó∂ÔºåÁõ¥Êé•ÊåâÂõûËΩ¶ÈîÆË∑≥ËøáÔºåÊàñËæìÂÖ•ÊÇ®ÁöÑ Posteo ÈÇÆÁÆ±Âú∞ÂùÄ„ÄÇ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gpg --list-keys<br>gpg --armor --output public-key.asc --export &lt;the id showed in --listh-keys&gt;<br></code></pre></td></tr></table></figure><p>Finally, send this public key file to <a href="mailto:&#107;&#x65;&#121;&#x73;&#x40;&#x70;&#111;&#x73;&#116;&#101;&#x6f;&#46;&#x64;&#101;">keys@posteo.de</a> using your own Posteo email.</p><p>ÊúÄÂêéÂ∞ÜËøô‰∏™ÂÖ¨Èí•Êñá‰ª∂ÈÄöËøáËá™Â∑±ÁöÑposteoÈÇÆÁÆ±ÂèëÈÄÅÁªô<a href="mailto:&#107;&#x65;&#121;&#115;&#64;&#x70;&#x6f;&#x73;&#116;&#101;&#x6f;&#46;&#x64;&#x65;">keys@posteo.de</a>.</p><h2 id="Conclusion-ÊÄªÁªì"><a href="#Conclusion-ÊÄªÁªì" class="headerlink" title="Conclusion ÊÄªÁªì"></a>Conclusion ÊÄªÁªì</h2><p>‰ª•‰∏äÊ≠•È™§ÂàÜÂà´‰ªãÁªç‰∫ÜÂ¶Ç‰ΩïÂú®Posteo MailÊúçÂä°‰∏≠Áî≥ËØ∑Âπ∂Âä†ÂØÜPOSTEOÈÇÆ‰ª∂ÊúçÂä°Ôºå‰ª•ÂèäÂ¶Ç‰ΩïÈÖçÁΩÆÂÖ•Á´ôÂä†ÂØÜ„ÄÇÈÄöËøáËøô‰∫õÊ≠•È™§Ôºå‰Ω†ÂèØ‰ª•ÊàêÂäüÂú∞Âú®Posteo MailÊúçÂä°‰∏≠ÂÆûÁé∞ÈÇÆ‰ª∂ÁöÑÂä†ÂØÜÂäüËÉΩÔºåÂπ∂‰∏îÂèØ‰ª•Êñπ‰æøÂú∞ÁÆ°ÁêÜÂíåÁõëÊéßÈÇÆ‰ª∂ÂèëÈÄÅÂíåÊé•Êî∂ÊÉÖÂÜµ.</p>]]></content>
    
    
    
    <tags>
      
      <tag>Security</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Interview: Safe Distance | Èù¢ËØï: ÂÆâÂÖ®Ë∑ùÁ¶ª</title>
    <link href="/posts/3dfae82/"/>
    <url>/posts/3dfae82/</url>
    
    <content type="html"><![CDATA[<h2 id="Problem-È¢òÈù¢"><a href="#Problem-È¢òÈù¢" class="headerlink" title="Problem È¢òÈù¢"></a>Problem È¢òÈù¢</h2><p>In a classroom with n seats, numbered from 0 to n-1, a student must choose the seat with the largest minimum distance to any other occupied seat. If multiple seats satisfy this condition, choose the seat with the smallest number.</p><p>Implement a class Room with the following method:</p><p>Âú®‰∏Ä‰∏™ÊïôÂÆ§ÈáåÊúâ n ‰∏™Â∫ß‰Ωç, ÁºñÂè∑‰∏∫ 0,1,2,‚Ä¶,n‚àí1.<br>ÂΩìÊúâÂêåÂ≠¶ËøõÊïôÂÆ§Êó∂Ôºå‰ªñÂøÖÈ°ªÈÄâÊã©Ë∑ùÁ¶ªÊúÄËøëÁöÑÂêåÂ≠¶‰πãÈó¥ÁöÑË∑ùÁ¶ªÊúÄÂ§ßÁöÑ‰ΩçÁΩÆÂùê‰∏ã.<br>Â¶ÇÊûúÊúâÂ§ö‰∏™‰ΩçÁΩÆÊª°Ë∂≥Êù°‰ª∂, ÈÄâÊã©ÁºñÂè∑ÊúÄÂ∞èÁöÑÈÇ£‰∏™.</p><p>ÂÆûÁé∞‰∏Ä‰∏™Á±ªRoom, ÂåÖÂê´‰ª•‰∏ãÊñπÊ≥ï:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>):<br>    ...<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:  <span class="hljs-comment"># Return the index of the selected position ËøîÂõûÈÄâ‰∏≠ÁöÑ‰ΩçÁΩÆ</span><br>    ...<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, pos: <span class="hljs-built_in">int</span></span>):  <span class="hljs-comment"># The person leave the classroom at position pos pos‰ΩçÁΩÆ‰∏äÁöÑ‰∫∫Á¶ªÂºÄÊïôÂÆ§</span><br>    ...<br></code></pre></td></tr></table></figure><h2 id="Code-‰ª£Á†Å"><a href="#Code-‰ª£Á†Å" class="headerlink" title="Code ‰ª£Á†Å"></a>Code ‰ª£Á†Å</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> heapq<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Interval</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end, N</span>):<br>        <span class="hljs-variable language_">self</span>.start = start<br>        <span class="hljs-variable language_">self</span>.end = end<br>        <span class="hljs-variable language_">self</span>.N = N<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dist</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.start == -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.end<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.end == <span class="hljs-variable language_">self</span>.N:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span> - <span class="hljs-variable language_">self</span>.start<br>        <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">self</span>.end - <span class="hljs-variable language_">self</span>.start) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.dist() == other.dist():<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.start &lt; other.start<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.dist() &gt; other.dist()<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, N</span>):<br>        <span class="hljs-variable language_">self</span>.N = N<br>        <span class="hljs-variable language_">self</span>.heap = []<br>        <span class="hljs-variable language_">self</span>.start_map = &#123;&#125;<br>        <span class="hljs-variable language_">self</span>.end_map = &#123;&#125;<br>        <span class="hljs-variable language_">self</span>.seated = <span class="hljs-built_in">set</span>()<br><br>        initial = Interval(-<span class="hljs-number">1</span>, N, N)<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, initial)<br>        <span class="hljs-variable language_">self</span>.start_map[-<span class="hljs-number">1</span>] = initial<br>        <span class="hljs-variable language_">self</span>.end_map[N] = initial<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">while</span> <span class="hljs-variable language_">self</span>.heap:<br>            interval = heapq.heappop(<span class="hljs-variable language_">self</span>.heap)<br>            start, end = interval.start, interval.end<br>            <span class="hljs-keyword">if</span> start <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.start_map <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.start_map[start] == interval:<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> start == -<span class="hljs-number">1</span>:<br>            seat = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">elif</span> end == <span class="hljs-variable language_">self</span>.N:<br>            seat = <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            seat = (start + end) // <span class="hljs-number">2</span><br><br>        <span class="hljs-variable language_">self</span>.seated.add(seat)<br><br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[start]<br>        <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[end]<br><br>        left = Interval(start, seat, <span class="hljs-variable language_">self</span>.N)<br>        right = Interval(seat, end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[start] = left<br>        <span class="hljs-variable language_">self</span>.end_map[seat] = left<br>        <span class="hljs-variable language_">self</span>.start_map[seat] = right<br>        <span class="hljs-variable language_">self</span>.end_map[end] = right<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, left)<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, right)<br><br>        <span class="hljs-keyword">return</span> seat<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, p</span>):<br>        <span class="hljs-variable language_">self</span>.seated.remove(p)<br><br>        left = <span class="hljs-variable language_">self</span>.end_map.get(p)<br>        right = <span class="hljs-variable language_">self</span>.start_map.get(p)<br><br>        <span class="hljs-keyword">if</span> left:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[left.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[left.end]<br>        <span class="hljs-keyword">if</span> right:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[right.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[right.end]<br><br>        new_start = left.start <span class="hljs-keyword">if</span> left <span class="hljs-keyword">else</span> p<br>        new_end = right.end <span class="hljs-keyword">if</span> right <span class="hljs-keyword">else</span> p<br>        merged = Interval(new_start, new_end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[new_start] = merged<br>        <span class="hljs-variable language_">self</span>.end_map[new_end] = merged<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, merged)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    room = Room(<span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    <span class="hljs-built_in">print</span>(room.seat())<br>    room.leave(<span class="hljs-number">4</span>)<br>    <span class="hljs-built_in">print</span>(room.seat())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><h2 id="Analysis-Ëß£Êûê"><a href="#Analysis-Ëß£Êûê" class="headerlink" title="Analysis Ëß£Êûê"></a>Analysis Ëß£Êûê</h2><p>The key data structures for this problem are a heap and a dictionary. Initially, analyze the problem. Each time the seat() function is called, a seat must be found that offers the ‚Äúlargest minimum distance between neighboring students.‚Äù Although this constraint sounds complicated, it can be translated to: ‚ÄúFind the longest continuous unoccupied seat segment.‚Äù For each continuous unoccupied segment, the middle position is the position within that segment that offers the ‚Äúlargest minimum distance between neighboring students.‚Äù Thus, the distance is related only to the length of the current segment (specifically, half of the segment length, except for the initial and final segments, where the nearest distance is exactly twice the segment length).</p><p>ËøôÈ¢òËÄÉÂØüÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÂ†Ü+Â≠óÂÖ∏. ÂÖàÁÆÄÂçïÂàÜÊûê‰∏Ä‰∏ãÈ¢òÁõÆ, ÊØèÊ¨°Ë∞ÉÁî®seat()ÂáΩÊï∞Êó∂Ë¶ÅÊâæÂà∞‰∏Ä‰∏™‚ÄùË∑ùÁ¶ªÊúÄËøëÁöÑÂêåÂ≠¶‰πãÈó¥ÁöÑË∑ùÁ¶ªÊúÄÂ§ß‚ÄùÁöÑ‰ΩçÁΩÆ, Â∞ΩÁÆ°Ëøô‰∏™ÈôêÂà∂Êù°‰ª∂ËØªËµ∑Êù•Áõ∏ÂΩìÊãóÂè£, ÁøªËØëÊàê‰∫∫ËØùÂ∞±ÊòØ: ‚ÄúÊâæÂá∫ÊúÄÂ§ßÁöÑ‰∏ÄÊÆµËøûÁª≠Á©∫ÁùÄÁöÑÂ∫ß‰Ωç‚Äù. Âõ†‰∏∫ÂØπ‰∫éÊØè‰∏™ËøûÁª≠Á©∫ÁùÄÁöÑÂ∫ß‰ΩçÊÆµ, ‰∏≠Èó¥‰ΩçÁΩÆÂ∞±ÊòØËøô‰∏™ÊÆµÈáå‚ÄùË∑ùÁ¶ªÊúÄËøëÁöÑÂêåÂ≠¶‰πãÈó¥ÁöÑË∑ùÁ¶ªÊúÄÂ§ß‚ÄùÁöÑ‰ΩçÁΩÆ. ÊâÄ‰ª•ÂÆûÈôÖ‰∏äÁöÑË∑ùÁ¶ªÂè™ÂíåÂΩìÂâçÊÆµÈïøÂ∫¶ÊúâÂÖ≥, Êõ¥ÂÖ∑‰ΩìÁöÑËØ¥ÊòØÂΩìÂâçÊÆµÈïøÂ∫¶ÁöÑ‰∏ÄÂçä (ÂÖ∂‰∏≠ÊúÄÂºÄÂßãÁöÑÊúÄÂêéÁöÑÊÆµÊòØÁâπÊÆäÁöÑ, Âõ†‰∏∫‰∏§Â§¥Ê≤°Êúâ‰∫∫ÊâÄ‰ª•ÊúÄËøëÁöÑË∑ùÁ¶ª‰∏çÊòØÊÆµÈïøÂ∫¶ÁöÑ‰∏ÄÂçä, ËÄåÊòØÂàöÂ•Ω‰∏ÄÂÄç).</p><p>Therefore, the problem‚Äôs requirements become clear:</p><ol><li>Each call to seat() finds and returns the middle position of the longest continuous unoccupied segment. After returning, the segment is split into two halves at that position.</li><li>Each call to leave() removes the two segments separated by the leave() position and re-merges them.</li></ol><p>ÊâÄ‰ª•ËøôÈ¢òÁöÑÈúÄÊ±ÇÂ∞±ÂèòÂæóÂæàÊ∏ÖÊô∞‰∫Ü:</p><ol><li>ÊØèÊ¨°Ë∞ÉÁî®seatÂ∞±ÊääÊâÄÊúâÂå∫Èó¥ÈáåÊúÄÈïøÁöÑÊãøÂá∫Êù•, ËøîÂõû‰∏≠ÁÇπÂêéÊääÂå∫Èó¥‰ªéÈÇ£‰∏™‰ΩçÁΩÆÊé∞Êàê‰∏§Âçä</li><li>ÊØèÊ¨°Ë∞ÉÁî®leaveÂ∞±ÊääleaveÁöÑ‰ΩçÁΩÆÊâÄÂå∫ÂàÜÁöÑ‰∏§‰∏™Âå∫Èó¥ÈÉΩÂéªÊéâ, ÈáçÊñ∞ÊãºÊé•Ëµ∑Êù•</li></ol><p>The first function can be easily thought of using a heap data structure, but the second function cannot be implemented solely with a heap; it requires a dictionary for additional implementation.</p><p>Á¨¨‰∏Ä‰∏™ÂäüËÉΩÂèØ‰ª•ÂæàÂÆπÊòìÊÉ≥Âà∞Â†ÜÁöÑÊï∞ÊçÆÁªìÊûÑ, ‰ΩÜÊòØÁ¨¨‰∫å‰∏™ÂäüËÉΩÂè™Èù†Â†ÜÊòØÊó†Ê≥ïÂÆûÁé∞ÁöÑ, ÈúÄË¶ÅÈÄöËøáÂ≠óÂÖ∏Êù•È¢ùÂ§ñÂÆûÁé∞</p><h3 id="Initialization-ÂàùÂßãÂåñ"><a href="#Initialization-ÂàùÂßãÂåñ" class="headerlink" title="Initialization ÂàùÂßãÂåñ"></a>Initialization ÂàùÂßãÂåñ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Interval</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end, N</span>):<br>        <span class="hljs-variable language_">self</span>.start = start<br>        <span class="hljs-variable language_">self</span>.end = end<br>        <span class="hljs-variable language_">self</span>.N = N<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dist</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># No need need to divide by 2 because two heads nobody Âõ†‰∏∫‰∏§Â§¥Ê≤°‰∫∫ÊâÄ‰ª•ÈïøÂ∫¶‰∏çÈúÄË¶ÅÈô§‰ª•2</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.start == -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.end<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.end == <span class="hljs-variable language_">self</span>.N:<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span> - <span class="hljs-variable language_">self</span>.start<br>        <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">self</span>.end - <span class="hljs-variable language_">self</span>.start) // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__lt__</span>(<span class="hljs-params">self, other</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.dist() == other.dist():<br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.start &lt; other.start<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.dist() &gt; other.dist()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, N</span>):<br>    <span class="hljs-variable language_">self</span>.N = N<br>    <span class="hljs-variable language_">self</span>.heap = []<br>    <span class="hljs-variable language_">self</span>.start_map = &#123;&#125;<br>    <span class="hljs-variable language_">self</span>.end_map = &#123;&#125;<br>    <span class="hljs-variable language_">self</span>.seated = <span class="hljs-built_in">set</span>()<br><br>    initial = Interval(-<span class="hljs-number">1</span>, N, N)<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, initial)<br>    <span class="hljs-variable language_">self</span>.start_map[-<span class="hljs-number">1</span>] = initial<br>    <span class="hljs-variable language_">self</span>.end_map[N] = initial<br><br></code></pre></td></tr></table></figure><p>First, design an <code>Interval</code> class to represent each continuous empty seat segment. The <code>dist()</code> function is used to calculate the maximum distance to the nearest classmate within the current segment. <code>__lt__(self, other)</code> is for calling the Python <code>heappush</code> and <code>heappop</code> functions because Python‚Äôs heap operations are a min-heap by default, so the definition of <code>__lt__(self, other)</code> is actually the opposite of the actual definition.</p><p>Then, initialize the <code>Room</code> class, where <code>start_map</code> and <code>end_map</code> respectively store <code>Interval</code> objects starting&#x2F;ending at key points. <code>seated</code> is used to record the set of occupied seats.</p><p>È¶ñÂÖà, ËÆæËÆ°‰∏Ä‰∏™<code>Interval</code>Á±ª, Áî®‰∫éË°®Á§∫ÊØè‰∏™ËøûÁª≠ÁöÑÁ©∫Â∫ß‰ΩçÊÆµ. ÂÖ∂‰∏≠<code>dist()</code>ÂáΩÊï∞Áî®Êù•ËÆ°ÁÆó, ÂΩìÂâçÊÆµÂÜÖÊúÄÂ§ßÁöÑÂà∞ÊúÄËøëÁöÑÂêåÂ≠¶ÁöÑË∑ùÁ¶ª. <code>__lt__(self, other)</code>ÊòØ‰∏∫‰∫ÜË∞ÉÁî®ÂêéÈù¢pythonÁöÑ<code>heappush</code>Âíå<code>heappop</code>ÂáΩÊï∞, Âõ†‰∏∫pythonÁöÑÂ†ÜÊìç‰ΩúÈªòËÆ§ÊòØÂ∞èÊ†πÂ†Ü, ÊâÄ‰ª•ËøôÈáå<code>__lt__(self, other)</code>ÁöÑÂÆö‰πâÂÖ∂ÂÆûÊòØ‰∏éÂÆûÈôÖÂÆö‰πâÁõ∏ÂèçÁöÑ.</p><p>ÁÑ∂Âêé, ÂØπ<code>Room</code>Á±ªÂàùÂßãÂåñ, ÂÖ∂‰∏≠<code>start_map</code>Âíå<code>end_map</code>ÂàÜÂà´Â≠òÂÇ®‰ª•keyËøô‰∏™ÁÇπÂºÄÂßã&#x2F;ÁªìÊùüÁöÑ<code>Interval</code>.<code>seated</code>ÂàôÊòØÁî®Êù•ËÆ∞ÂΩïÂ∑≤ÁªèÊúâ‰∫∫ÁöÑÂ∫ß‰ΩçÁöÑÈõÜÂêà.</p><h3 id="Seat-Function-Seat-ÂáΩÊï∞"><a href="#Seat-Function-Seat-ÂáΩÊï∞" class="headerlink" title="Seat() Function Seat() ÂáΩÊï∞"></a>Seat() Function Seat() ÂáΩÊï∞</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">seat</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">while</span> <span class="hljs-variable language_">self</span>.heap:<br>        interval = heapq.heappop(<span class="hljs-variable language_">self</span>.heap)<br>        start, end = interval.start, interval.end<br>        <span class="hljs-keyword">if</span> start <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.start_map <span class="hljs-keyword">and</span> <span class="hljs-variable language_">self</span>.start_map[start] == interval:  <span class="hljs-comment"># Verify the interval is valid È™åËØÅËøô‰∏™Âå∫Èó¥ÊòØÂ≠òÂú®ÁöÑ</span><br>            <span class="hljs-keyword">return</span> seat<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> start == -<span class="hljs-number">1</span>:<br>        seat = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">elif</span> end == <span class="hljs-variable language_">self</span>.N:<br>        seat = <span class="hljs-variable language_">self</span>.N - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        seat = (start + end) // <span class="hljs-number">2</span><br><br>    <span class="hljs-variable language_">self</span>.seated.add(seat)<br><br>    <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[start]<br>    <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[end]<br><br>    left = Interval(start, seat, <span class="hljs-variable language_">self</span>.N)<br>    right = Interval(seat, end, <span class="hljs-variable language_">self</span>.N)<br>    <span class="hljs-variable language_">self</span>.start_map[start] = left<br>    <span class="hljs-variable language_">self</span>.end_map[seat] = left<br>    <span class="hljs-variable language_">self</span>.start_map[seat] = right<br>    <span class="hljs-variable language_">self</span>.end_map[end] = right<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, left)<br>    heapq.heappush(<span class="hljs-variable language_">self</span>.heap, right)<br></code></pre></td></tr></table></figure><p>First, take the largest interval from the <code>heap</code>, and simultaneously use <code>start_map</code> and <code>end_map</code> to determine whether the current interval actually exists (explained in the <code>leave</code> function). After taking out the largest interval, determine the position where the seat should be placed, then split the interval according to the seat‚Äôs position and update <code>start_map</code>, <code>end_map</code>, and <code>heap</code>.</p><p>È¶ñÂÖà‰ªé<code>heap</code>ÈáåÊãøÂá∫ÊúÄÂ§ßÁöÑÂå∫Èó¥, ÂêåÊó∂ÈÄöËøá<code>start_map</code>Âíå<code>end_map</code>Êù•Âà§Êñ≠ÂΩìÂâçÂèñÂá∫Êù•ÁöÑÂå∫Èó¥ÊòØÂê¶ÂÆûÈôÖÂ≠òÂú® (<code>leave</code>ÂáΩÊï∞‰∏≠‰ºöËß£Èáä‰∏∫‰ªÄ‰πàÊòØËøôÊ†∑ÂÅöÁöÑ). ÂèñÂá∫ÊúÄÂ§ßÂå∫Èó¥ÂêéÂà§Êñ≠seatÂ∫îËØ•ÊëÜÊîæÁöÑ‰ΩçÁΩÆ, ÂÜçÊääÂå∫Èó¥Ê†πÊçÆseatÁöÑ‰ΩçÁΩÆÂàÜ‰∏∫‰∏§ÂçäÂπ∂Êõ¥Êñ∞<code>start_map</code>, <code>end_map</code>‰∏é<code>heap</code>.</p><h3 id="Leave-Function-Leave-ÂáΩÊï∞"><a href="#Leave-Function-Leave-ÂáΩÊï∞" class="headerlink" title="Leave() Function Leave() ÂáΩÊï∞"></a>Leave() Function Leave() ÂáΩÊï∞</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Room</span>:<br>    ...<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">leave</span>(<span class="hljs-params">self, p</span>):<br>        <span class="hljs-variable language_">self</span>.seated.remove(p)<br><br>        left = <span class="hljs-variable language_">self</span>.end_map.get(p)<br>        right = <span class="hljs-variable language_">self</span>.start_map.get(p)<br><br>        <span class="hljs-keyword">if</span> left:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[left.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[left.end]<br>        <span class="hljs-keyword">if</span> right:<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.start_map[right.start]<br>            <span class="hljs-keyword">del</span> <span class="hljs-variable language_">self</span>.end_map[right.end]<br><br>        new_start = left.start <span class="hljs-keyword">if</span> left <span class="hljs-keyword">else</span> p<br>        new_end = right.end <span class="hljs-keyword">if</span> right <span class="hljs-keyword">else</span> p<br>        merged = Interval(new_start, new_end, <span class="hljs-variable language_">self</span>.N)<br>        <span class="hljs-variable language_">self</span>.start_map[new_start] = merged<br>        <span class="hljs-variable language_">self</span>.end_map[new_end] = merged<br>        heapq.heappush(<span class="hljs-variable language_">self</span>.heap, merged)<br></code></pre></td></tr></table></figure><p>First, find the two segments to be merged through <code>start_map</code> and <code>end_map</code>. Then merge these two segments into a new interval and add it to the heap. Theoretically, the algorithm should remove the original two intervals from the heap and then add the new interval to the heap. However, the heap does not natively support this operation, so simply ignore it here because the <code>seat()</code> function implements a verification process that checks whether the current interval corresponds to the intervals in <code>start_map</code> and <code>end_map</code>. If it doesn‚Äôt, it means that this interval no longer exists, so the algorithm will simply ignore it. This ensures the correctness of the answer even if the original interval is not deleted.</p><p>È¶ñÂÖà, ÈÄöËøá<code>start_map</code>Âíå<code>end_map</code>ÊâæÂà∞ÈúÄË¶ÅÊãºÊé•ÁöÑ‰∏§‰∏™ÊÆµ. ÁÑ∂ÂêéÊääËøô‰∏§‰∏™ÊÆµÂêàÂπ∂Êàê‰∏Ä‰∏™Êñ∞ÁöÑÂå∫Èó¥, Âπ∂Â∞ÜÂÖ∂Âä†ÂÖ•Âà∞Â†Ü‰∏≠. ÁêÜËÆ∫‰∏äËØ¥, ÁÆóÊ≥ïÂ∫îÂΩìÊääÂéüÊù•ÁöÑ‰∏§‰∏™Âå∫Èó¥‰ªéÂ†Ü‰∏≠ÂºπÂá∫, ÂêéÂ∞ÜÊñ∞ÁöÑÂå∫Èó¥Âä†ÂÖ•Â†Ü‰∏≠„ÄÇ‰ΩÜÊòØÂ†ÜÊó†Ê≥ïÂéüÁîüÊîØÊåÅËøôÁßçÊìç‰Ωú, ÊâÄ‰ª•ËøôÈáåÂπ≤ËÑÜÁõ¥Êé•‰∏çÂ§ÑÁêÜ, Âõ†‰∏∫Âú®‰πãÂâçÁöÑ<code>seat()</code>ÂáΩÊï∞‰∏≠ÁÆóÊ≥ïÂÆûÁé∞‰∫Ü‰∏Ä‰∏™È™åËØÅÂ§ÑÁêÜ, Êü•ÁúãÂΩìÂâçÂèñÂá∫Êù•ÁöÑÂå∫Èó¥ÊòØ‰∏çÊòØ<code>start_map</code>Âíå<code>end_map</code>ÂØπÂ∫îÁöÑÂå∫Èó¥. Â¶ÇÊûú‰∏çÊòØËØ¥ÊòéËøô‰∏™Âå∫Èó¥Â∑≤Áªè‰∏çÂ≠òÂú®‰∫Ü, ÈÇ£‰πàÁÆóÊ≥ïÂ∞±‰ºöÁõ¥Êé•ÂøΩÁï•ÂÆÉ. ËøôÊ†∑Â∞±ÁÆó‰∏çÂà†Èô§ÂéüÂå∫Èó¥‰πü‰∏çÂΩ±ÂìçÁ≠îÊ°àÁöÑÊ≠£Á°ÆÊÄß.</p><h3 id="Runtime-Analysis-Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûê"><a href="#Runtime-Analysis-Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûê" class="headerlink" title="Runtime Analysis Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûê"></a>Runtime Analysis Êó∂Èó¥Â§çÊùÇÂ∫¶ÂàÜÊûê</h3><p>ÁÆóÊ≥ïÈáåÊâÄÊúâÁöÑÂ†ÜÊìç‰ΩúÊó∂Èó¥Â§çÊùÇÂ∫¶ÈÉΩÊòØ<code>O(log n)</code>, ÊâÄ‰ª•ÊÄªÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ <code>O(n log n)</code>, ËøôÈáå<code>n</code>ÊåáÁöÑÊòØÊìç‰ΩúÊï∞Èáè.</p><p>All heap operations in the algorithm have a time complexity of <code>O(log n)</code>, so the total time complexity is <code>O(n log n)</code>. Here <code>n</code> is number of operations.</p><h2 id="Conclusion-ÊÄªÁªì"><a href="#Conclusion-ÊÄªÁªì" class="headerlink" title="Conclusion ÊÄªÁªì"></a>Conclusion ÊÄªÁªì</h2><p>This question is a moderately difficult data structure problem that involves slight modifications and optimizations to the original heap operations. It requires a good grasp of basic data structure operations and implementations, and is the type of problem that is easy to come up with an idea for but requires paying attention to many details in the actual implementation.</p><p>ËøôÈÅìÈ¢òÊòØ‰∏ÄÈÅìÈöæÂ∫¶ÈÄÇ‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑÈ¢òÁõÆ, Âú®ÂéüÊú¨Â†ÜÊìç‰ΩúÁöÑÂü∫Á°Ä‰∏äÁ®çÂä†‰øÆÊîπ‰ºòÂåñ. ÈúÄË¶ÅÁÜüÁªÉÊéåÊè°Êï∞ÊçÆÁªìÊûÑÁöÑÂü∫Êú¨Êìç‰ΩúÂíåÂÆûÁé∞, ÊòØÂÆπÊòìÊÉ≥Âá∫ÊÄùË∑Ø‰ΩÜÊòØÂÆûÈôÖÂÜôËµ∑Êù•ÈúÄË¶ÅÊ≥®ÊÑèÂæàÂ§öÁªÜËäÇÁöÑÁ±ªÂûã.</p><h2 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h2><p>Don‚Äôt forget about <code>RUST</code> time.</p><p>Êù•ÁÇπ<code>RUST</code></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">use</span> std::&#123;<br>    cmp::Reverse,<br>    collections::&#123;BinaryHeap, HashMap&#125;,<br>&#125;;<br><br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">room</span> = Room::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">10</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>    room.<span class="hljs-title function_ invoke__">leave</span>(<span class="hljs-number">4</span>);<br>    <span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;&#123;&#125;&quot;</span>, room.<span class="hljs-title function_ invoke__">seat</span>());<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Room</span> &#123;<br>    size: <span class="hljs-type">i32</span>,<br>    heap: BinaryHeap&lt;(<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>    start_map: HashMap&lt;<span class="hljs-type">i32</span>, (<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>    end_map: HashMap&lt;<span class="hljs-type">i32</span>, (<span class="hljs-type">i32</span>, Reverse&lt;<span class="hljs-type">i32</span>&gt;, Reverse&lt;<span class="hljs-type">i32</span>&gt;)&gt;,<br>&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Room</span> &#123;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(size: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">heap</span> = BinaryHeap::<span class="hljs-title function_ invoke__">new</span>();<br>        heap.<span class="hljs-title function_ invoke__">push</span>((size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">start_map</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>        start_map.<span class="hljs-title function_ invoke__">insert</span>(-<span class="hljs-number">1</span>, (size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">end_map</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();<br>        end_map.<span class="hljs-title function_ invoke__">insert</span>(size, (size, <span class="hljs-title function_ invoke__">Reverse</span>(-<span class="hljs-number">1</span>), <span class="hljs-title function_ invoke__">Reverse</span>(size)));<br>        Room &#123;<br>            size,<br>            heap,<br>            start_map,<br>            end_map,<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">dist</span>(&amp;<span class="hljs-keyword">self</span>, x: <span class="hljs-type">i32</span>, y: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">if</span> x == -<span class="hljs-number">1</span> || y == <span class="hljs-keyword">self</span>.size &#123;<br>            <span class="hljs-title function_ invoke__">return</span> (y - x).<span class="hljs-title function_ invoke__">abs</span>() - <span class="hljs-number">2</span>;<br>        &#125;<br>        ((y - x).<span class="hljs-title function_ invoke__">abs</span>() - <span class="hljs-number">2</span>) / <span class="hljs-number">2</span><br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">seat</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = <span class="hljs-keyword">self</span>.size;<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">len</span>() &gt; <span class="hljs-number">1</span> &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">interval</span> = <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">pop</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">contains_key</span>(&amp;interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>)<br>                &amp;&amp; *<span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">get</span>(&amp;interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>).<span class="hljs-title function_ invoke__">unwrap</span>() == interval<br>            &#123;<br>                x = interval.<span class="hljs-number">1</span> .<span class="hljs-number">0</span>;<br>                y = interval.<span class="hljs-number">2</span> .<span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">seat</span> = <span class="hljs-keyword">if</span> x == -<span class="hljs-number">1</span> &#123;<br>            <span class="hljs-number">0</span><br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> y == <span class="hljs-keyword">self</span>.size &#123;<br>                <span class="hljs-keyword">self</span>.size - <span class="hljs-number">1</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                (x + y) / <span class="hljs-number">2</span><br>            &#125;<br>        &#125;;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">left</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(x, seat), <span class="hljs-title function_ invoke__">Reverse</span>(x), <span class="hljs-title function_ invoke__">Reverse</span>(seat));<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">right</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(seat, y), <span class="hljs-title function_ invoke__">Reverse</span>(seat), <span class="hljs-title function_ invoke__">Reverse</span>(y));<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(x, left);<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(seat, right);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(seat, left);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(y, right);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(left);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(right);<br>        seat<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">leave</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, pos: <span class="hljs-type">i32</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">left</span> = <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">get</span>(&amp;pos).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-number">1</span> .<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">right</span> = <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">get</span>(&amp;pos).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-number">2</span> .<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;pos);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;pos);<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;left);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">remove</span>(&amp;right);<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">merge</span> = (<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dist</span>(left, right), <span class="hljs-title function_ invoke__">Reverse</span>(left), <span class="hljs-title function_ invoke__">Reverse</span>(right));<br>        <span class="hljs-keyword">self</span>.start_map.<span class="hljs-title function_ invoke__">insert</span>(left, merge);<br>        <span class="hljs-keyword">self</span>.end_map.<span class="hljs-title function_ invoke__">insert</span>(right, merge);<br>        <span class="hljs-keyword">self</span>.heap.<span class="hljs-title function_ invoke__">push</span>(merge);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Data Structure</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode: Integer to English Words | ÂäõÊâ£: Êï¥Êï∞ËΩ¨Êç¢Ëã±ÊñáË°®Á§∫</title>
    <link href="/posts/3911b54c/"/>
    <url>/posts/3911b54c/</url>
    
    <content type="html"><![CDATA[<h2 id="Problem-È¢òÈù¢"><a href="#Problem-È¢òÈù¢" class="headerlink" title="Problem È¢òÈù¢"></a>Problem È¢òÈù¢</h2><p><a href="https://leetcode.cn/problems/integer-to-english-words/description/">https://leetcode.cn/problems/integer-to-english-words/description/</a></p><h2 id="Code-‰ª£Á†Å"><a href="#Code-‰ª£Á†Å" class="headerlink" title="Code ‰ª£Á†Å"></a>Code ‰ª£Á†Å</h2><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_a_thousand</span>(num: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">use</span> std::collections::HashMap;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ans</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">nums</span> = <span class="hljs-built_in">vec!</span>[<br>            (<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>),<br>            (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;One&quot;</span>),<br>            (<span class="hljs-number">2</span>, <span class="hljs-string">&quot;Two&quot;</span>),<br>            (<span class="hljs-number">3</span>, <span class="hljs-string">&quot;Three&quot;</span>),<br>            (<span class="hljs-number">4</span>, <span class="hljs-string">&quot;Four&quot;</span>),<br>            (<span class="hljs-number">5</span>, <span class="hljs-string">&quot;Five&quot;</span>),<br>            (<span class="hljs-number">6</span>, <span class="hljs-string">&quot;Six&quot;</span>),<br>            (<span class="hljs-number">7</span>, <span class="hljs-string">&quot;Seven&quot;</span>),<br>            (<span class="hljs-number">8</span>, <span class="hljs-string">&quot;Eight&quot;</span>),<br>            (<span class="hljs-number">9</span>, <span class="hljs-string">&quot;Nine&quot;</span>),<br>            (<span class="hljs-number">10</span>, <span class="hljs-string">&quot;Ten&quot;</span>),<br>            (<span class="hljs-number">11</span>, <span class="hljs-string">&quot;Eleven&quot;</span>),<br>            (<span class="hljs-number">12</span>, <span class="hljs-string">&quot;Twelve&quot;</span>),<br>            (<span class="hljs-number">13</span>, <span class="hljs-string">&quot;Thirteen&quot;</span>),<br>            (<span class="hljs-number">14</span>, <span class="hljs-string">&quot;Fourteen&quot;</span>),<br>            (<span class="hljs-number">15</span>, <span class="hljs-string">&quot;Fifteen&quot;</span>),<br>            (<span class="hljs-number">16</span>, <span class="hljs-string">&quot;Sixteen&quot;</span>),<br>            (<span class="hljs-number">17</span>, <span class="hljs-string">&quot;Seventeen&quot;</span>),<br>            (<span class="hljs-number">18</span>, <span class="hljs-string">&quot;Eighteen&quot;</span>),<br>            (<span class="hljs-number">19</span>, <span class="hljs-string">&quot;Nineteen&quot;</span>),<br>            (<span class="hljs-number">20</span>, <span class="hljs-string">&quot;Twenty&quot;</span>),<br>            (<span class="hljs-number">30</span>, <span class="hljs-string">&quot;Thirty&quot;</span>),<br>            (<span class="hljs-number">40</span>, <span class="hljs-string">&quot;Forty&quot;</span>),<br>            (<span class="hljs-number">50</span>, <span class="hljs-string">&quot;Fifty&quot;</span>),<br>            (<span class="hljs-number">60</span>, <span class="hljs-string">&quot;Sixty&quot;</span>),<br>            (<span class="hljs-number">70</span>, <span class="hljs-string">&quot;Seventy&quot;</span>),<br>            (<span class="hljs-number">80</span>, <span class="hljs-string">&quot;Eighty&quot;</span>),<br>            (<span class="hljs-number">90</span>, <span class="hljs-string">&quot;Ninety&quot;</span>),<br>        ];<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">num_to_string</span>: HashMap&lt;_, _&gt; = nums.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>        <span class="hljs-keyword">if</span> num &gt;= <span class="hljs-number">100</span> &#123;<br>            ans += num_to_string[&amp;(num / <span class="hljs-number">100</span>)];<br>            ans += <span class="hljs-string">&quot; Hundred &quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> num % <span class="hljs-number">100</span> &lt; <span class="hljs-number">20</span> &#123;<br>            ans += num_to_string[&amp;(num % <span class="hljs-number">100</span>)];<br>            <span class="hljs-keyword">return</span> ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>();<br>        &#125;<br>        ans += num_to_string[&amp;(num % <span class="hljs-number">100</span> - num % <span class="hljs-number">10</span>)];<br>        ans += <span class="hljs-string">&quot; &quot;</span>;<br>        ans += num_to_string[&amp;(num % <span class="hljs-number">10</span>)];<br>        ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">number_to_words</span>(num: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>        <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Zero&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000000000</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ans</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>        <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>            ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; &#123;&#125; &quot;</span>, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Billion&quot;</span>); <br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000000</span> % <span class="hljs-number">1000</span>;<br>        <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>            ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125; &#123;&#125; &quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Million&quot;</span>); <br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000</span> % <span class="hljs-number">1000</span>;<br>        <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>            ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125; &#123;&#125; &quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Thousand&quot;</span>); <br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num % <span class="hljs-number">1000</span>;<br>        <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>            ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125;&quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out)); <br>        &#125;<br>        ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Analysis-ÂàÜÊûê"><a href="#Analysis-ÂàÜÊûê" class="headerlink" title="Analysis ÂàÜÊûê"></a>Analysis ÂàÜÊûê</h2><p>This problem implements an interesting feature: converting a number to its English representation. This feature is often used when writing articles, so I specifically implemented this problem.</p><p>First, check the problem‚Äôs data range. $2 ^ {31} - 1 &#x3D; 2147483647$, so the English magnitude needs to be sufficient for billion. Then, according to the English number expression, in English, billion, million, and thousand are represented by a number every three digits. So the entire program can be divided into two steps:</p><ol><li>Implement English representation of numbers within 1000</li><li>Call the above function every three digits to output, and connect all outputs with billion, million, and thousand.</li></ol><p>ËøôÈÅìÈ¢òÂÆûÁé∞‰∫Ü‰∏Ä‰∏™ÊúâÊÑèÊÄùÁöÑÂ∞èÂäüËÉΩ, Êää‰∏Ä‰∏™Êï∞Â≠óËΩ¨Êç¢‰∏∫Ëã±ÊñáË°®Á§∫. Ëøô‰∏™ÂäüËÉΩÂú®ÊàëÂÜôÊñáÁ´†ÁöÑÊó∂ÂÄôÁªèÂ∏∏Áî®Âà∞, ÊâÄ‰ª•ÁâπÂú∞ÂÆûÁé∞‰∫Ü‰∏Ä‰∏ãÊú¨È¢ò.</p><p>È¶ñÂÖàÊü•ÁúãÈ¢òÁõÆÁöÑÊï∞ÊçÆËåÉÂõ¥, $2 ^ {31} - 1 &#x3D; 2147483647$, ÊâÄ‰ª•Ëã±Êñá‰∏äÊï∞ÈáèÁ∫ßÂà∞billionË∂≥‰ª•. ÁÑ∂ÂêéÊ†πÊçÆËã±ÊñáÊï∞Â≠óÁöÑË°®ËææÊñπÂºè, Ëã±ËØ≠‰∏≠billion, million, thousandÊòØ‰ª•ÊØè‰∏â‰∏™‰Ωç‰∏∫‰∏Ä‰∏™Êï∞Â≠óÊù•Ë°®Á§∫ÁöÑ. ÊâÄ‰ª•Êï¥‰∏™Á®ãÂ∫èÂèØ‰ª•ÂàÜ‰∏∫‰∏§Ê≠•:</p><ol><li>ÂÆûÁé∞‰∫Ü1000‰ª•ÂÜÖÊï∞Â≠óÁöÑËã±ÊñáË°®Á§∫</li><li>ÊØè‰∏â‰ΩçË∞ÉÁî®‰∏äÈù¢ÁöÑÂáΩÊï∞Êù•ËæìÂá∫, Âπ∂ÊääÊâÄÊúâÁöÑËæìÂá∫ÈÄöËøábillion, millionÂíåthousandËøûÊé•Âú®‰∏ÄËµ∑</li></ol><h3 id="1-English-Representation-of-Numbers-smaller-than-1000-‰∏ÄÂçÉ‰ª•ÂÜÖÊï∞Â≠óÁöÑËã±ÊñáË°®Á§∫"><a href="#1-English-Representation-of-Numbers-smaller-than-1000-‰∏ÄÂçÉ‰ª•ÂÜÖÊï∞Â≠óÁöÑËã±ÊñáË°®Á§∫" class="headerlink" title="1. English Representation of Numbers smaller than 1000 ‰∏ÄÂçÉ‰ª•ÂÜÖÊï∞Â≠óÁöÑËã±ÊñáË°®Á§∫"></a>1. English Representation of Numbers smaller than 1000 ‰∏ÄÂçÉ‰ª•ÂÜÖÊï∞Â≠óÁöÑËã±ÊñáË°®Á§∫</h3><p>First, initialize the numbers that can be represented by a single word from 1 to 90 using a dictionary. Then extract the hundreds digit and output it with ‚ÄúHundred‚Äù, and extract the ones and tens digits. If it‚Äôs less than 20, output the corresponding word directly. Otherwise, output it by adding the tens digit and the ones digit.</p><p>È¶ñÂÖà, Êää1-90ËÉΩÁî®‰∏Ä‰∏™ÂçïËØçË°®Á§∫ÁöÑÊï∞Â≠óÁî®Â≠óÂÖ∏ÂàùÂßãÂåñ. ÁÑ∂ÂêéÂÖàÊèêÂèñÁôæÂàÜ‰ΩçËæìÂá∫Âπ∂Âä†‰∏äHundred, ÂÜçÊèêÂèñ‰∏™‰ΩçÂíåÂçÅ‰ΩçÁöÑÊï∞Â≠ó, Â¶ÇÊûúÂ∞è‰∫é20Â∞±Áõ¥Êé•ËæìÂá∫ÂØπÂ∫îÂçïËØç, Âê¶ÂàôÈÄöËøáÂçÅ‰ΩçÂä†‰∏™‰ΩçÁöÑÊñπÊ≥ïÊù•ËæìÂá∫.</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_a_thousand</span>(num: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">use</span> std::collections::HashMap;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ans</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">nums</span> = <span class="hljs-built_in">vec!</span>[<br>        (<span class="hljs-number">0</span>, <span class="hljs-string">&quot;&quot;</span>),<br>        (<span class="hljs-number">1</span>, <span class="hljs-string">&quot;One&quot;</span>),<br>        (<span class="hljs-number">2</span>, <span class="hljs-string">&quot;Two&quot;</span>),<br>        (<span class="hljs-number">3</span>, <span class="hljs-string">&quot;Three&quot;</span>),<br>        (<span class="hljs-number">4</span>, <span class="hljs-string">&quot;Four&quot;</span>),<br>        (<span class="hljs-number">5</span>, <span class="hljs-string">&quot;Five&quot;</span>),<br>        (<span class="hljs-number">6</span>, <span class="hljs-string">&quot;Six&quot;</span>),<br>        (<span class="hljs-number">7</span>, <span class="hljs-string">&quot;Seven&quot;</span>),<br>        (<span class="hljs-number">8</span>, <span class="hljs-string">&quot;Eight&quot;</span>),<br>        (<span class="hljs-number">9</span>, <span class="hljs-string">&quot;Nine&quot;</span>),<br>        (<span class="hljs-number">10</span>, <span class="hljs-string">&quot;Ten&quot;</span>),<br>        (<span class="hljs-number">11</span>, <span class="hljs-string">&quot;Eleven&quot;</span>),<br>        (<span class="hljs-number">12</span>, <span class="hljs-string">&quot;Twelve&quot;</span>),<br>        (<span class="hljs-number">13</span>, <span class="hljs-string">&quot;Thirteen&quot;</span>),<br>        (<span class="hljs-number">14</span>, <span class="hljs-string">&quot;Fourteen&quot;</span>),<br>        (<span class="hljs-number">15</span>, <span class="hljs-string">&quot;Fifteen&quot;</span>),<br>        (<span class="hljs-number">16</span>, <span class="hljs-string">&quot;Sixteen&quot;</span>),<br>        (<span class="hljs-number">17</span>, <span class="hljs-string">&quot;Seventeen&quot;</span>),<br>        (<span class="hljs-number">18</span>, <span class="hljs-string">&quot;Eighteen&quot;</span>),<br>        (<span class="hljs-number">19</span>, <span class="hljs-string">&quot;Nineteen&quot;</span>),<br>        (<span class="hljs-number">20</span>, <span class="hljs-string">&quot;Twenty&quot;</span>),<br>        (<span class="hljs-number">30</span>, <span class="hljs-string">&quot;Thirty&quot;</span>),<br>        (<span class="hljs-number">40</span>, <span class="hljs-string">&quot;Forty&quot;</span>),<br>        (<span class="hljs-number">50</span>, <span class="hljs-string">&quot;Fifty&quot;</span>),<br>        (<span class="hljs-number">60</span>, <span class="hljs-string">&quot;Sixty&quot;</span>),<br>        (<span class="hljs-number">70</span>, <span class="hljs-string">&quot;Seventy&quot;</span>),<br>        (<span class="hljs-number">80</span>, <span class="hljs-string">&quot;Eighty&quot;</span>),<br>        (<span class="hljs-number">90</span>, <span class="hljs-string">&quot;Ninety&quot;</span>),<br>    ];<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">num_to_string</span>: HashMap&lt;_, _&gt; = nums.<span class="hljs-title function_ invoke__">into_iter</span>().<span class="hljs-title function_ invoke__">collect</span>();<br>    <span class="hljs-keyword">if</span> num &gt;= <span class="hljs-number">100</span> &#123;<br>        ans += num_to_string[&amp;(num / <span class="hljs-number">100</span>)];<br>        ans += <span class="hljs-string">&quot; Hundred &quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> num % <span class="hljs-number">100</span> &lt; <span class="hljs-number">20</span> &#123;<br>        ans += num_to_string[&amp;(num % <span class="hljs-number">100</span>)];<br>        <span class="hljs-keyword">return</span> ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>();<br>    &#125;<br>    ans += num_to_string[&amp;(num % <span class="hljs-number">100</span> - num % <span class="hljs-number">10</span>)];<br>    ans += <span class="hljs-string">&quot; &quot;</span>;<br>    ans += num_to_string[&amp;(num % <span class="hljs-number">10</span>)];<br>    ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>()<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-Representation-of-the-whole-number-Êï¥‰∏™Êï∞Â≠óÁöÑË°®Á§∫"><a href="#2-Representation-of-the-whole-number-Êï¥‰∏™Êï∞Â≠óÁöÑË°®Á§∫" class="headerlink" title="2. Representation of the whole number Êï¥‰∏™Êï∞Â≠óÁöÑË°®Á§∫"></a>2. Representation of the whole number Êï¥‰∏™Êï∞Â≠óÁöÑË°®Á§∫</h3><p>Extract the digits every three digits, call the <code>num_to_string</code> function, then add billion, million, and thousand according to the number of digits. And connect them together. Pay attention to handling spaces and trailing blanks.</p><p>ÊØè‰∏â‰ΩçÊèêÂèñÂá∫Êï∞Â≠óË∞ÉÁî® <code>num_to_string</code> ÂáΩÊï∞ÔºåÁÑ∂ÂêéÊ†πÊçÆ‰ΩçÊï∞Êù•Ê∑ªÂä†billion, millionÂíåthousand. Âπ∂Â∞Ü‰ªñ‰ª¨ËøûÊé•Âú®‰∏ÄËµ∑. Ê≥®ÊÑèÂ§ÑÁêÜÁ©∫Ê†ºÂíåÊú´Â∞æÁ©∫ÁôΩ.</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs Rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">number_to_words</span>(num: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> &#123;<br>    <span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Zero&quot;</span>.<span class="hljs-title function_ invoke__">to_string</span>();<br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000000000</span>;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">ans</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();<br>    <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>        ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125; &#123;&#125; &quot;</span>, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Billion&quot;</span>); <br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000000</span> % <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>        ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125; &#123;&#125; &quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Million&quot;</span>); <br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num / <span class="hljs-number">1000</span> % <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>        ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125; &#123;&#125; &quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out), <span class="hljs-string">&quot;Thousand&quot;</span>); <br>    &#125;<br>    <span class="hljs-keyword">let</span> <span class="hljs-variable">out</span> = num % <span class="hljs-number">1000</span>;<br>    <span class="hljs-keyword">if</span> out &gt; <span class="hljs-number">0</span> &#123;<br>        ans = <span class="hljs-built_in">format!</span>(<span class="hljs-string">&quot;&#123;&#125;&#123;&#125;&quot;</span>, ans, Solution::<span class="hljs-title function_ invoke__">print_a_thousand</span>(out)); <br>    &#125;<br>    ans.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">to_string</span>()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Conclusion-ÊÄªÁªì"><a href="#Conclusion-ÊÄªÁªì" class="headerlink" title="Conclusion ÊÄªÁªì"></a>Conclusion ÊÄªÁªì</h2><p>This problem is a simple string processing problem with a medium-easy difficulty. Regarding the fact that this problem is in the mathematics section on LeetCode and has a hard difficulty rating, I am confused, but it is indeed a pretty interesting problem.</p><p>ËøôÈÅìÈ¢òÊòØ‰∏ÄÈÅìÁÆÄÂçïÁöÑÂ≠óÁ¨¶‰∏≤Â§ÑÁêÜÈ¢òÁõÆ, ÈöæÂ∫¶Âú®‰∏≠Á≠âÂÅèÁÆÄÂçï. Ëá≥‰∫éLeetCode‰∏äËøôÈÅìÈ¢òÊòØÊï∞Â≠¶ÂàÜÂå∫‰∏îÈöæÂ∫¶ÂàÜÁ∫ßÊòØHardÊàëË°®Á§∫ÁñëÊÉë, ‰∏çËøáÁ°ÆÂÆûÊòØÊå∫ÊúâÊÑèÊÄùÁöÑ‰∏ÄÈ¢ò.</p>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Quantum Error Correction: Shor Code</title>
    <link href="/posts/127662ed/"/>
    <url>/posts/127662ed/</url>
    
    <content type="html"><![CDATA[<p>Quantum error correction algorithms are a core technology in the field of quantum computing, designed to address the issue of quantum bits (qubits) being highly susceptible to environmental interference, which can lead to information loss or errors. Due to the characteristics of quantum systems, such as superposition and quantum entanglement, quantum information is extremely fragile, and even minor noise or phase shifts can compromise the accuracy of computations. Quantum error correction works by designing special encoding schemes to distribute the information of a single qubit across multiple physical qubits, enabling the detection and correction of errors without destroying the quantum state.</p><p>For example, classical quantum error correction codes include the Shor Code, Steane Code, and Surface Code. These algorithms can identify and repair bit-flip errors, phase-flip errors, or errors involving both, thereby providing a solid foundation for building reliable large-scale quantum computers. This article will introduce the architecture of the Shor Code.</p><h1 id="Bit-Flip"><a href="#Bit-Flip" class="headerlink" title="Bit Flip"></a>Bit Flip</h1><p>A bit-flip error is one of the most common types of errors in quantum computing. It refers to the unintended flipping of a qubit‚Äôs state from $ |0\rangle $ to $ |1\rangle $, or from $ |1\rangle $ to $ |0\rangle $. This type of error is analogous to a bit flip in classical computing but, in the context of quantum computing, it requires error-correcting codes to detect and correct the error in order to preserve the integrity of quantum information.</p><h2 id="Correction-Circuit"><a href="#Correction-Circuit" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><ul><li>First, a logical qubit is represented using three physical qubits through the use of controlled-X (CX) gates. The CX gate works as follows: if the control qubit‚Äôs state is $ |1\rangle $, it flips the value of the target qubit. In the setup described, this means that if $ q_0 $ (the control qubit) is in the state $ |1\rangle $, the corresponding target qubits, $ q_1 $ and $ q_2 $, will have their states flipped. This process encodes the logical qubit into a redundant form using three physical qubits, providing resilience against bit-flip errors.</li></ul><p><img src="/posts/127662ed/9fafab4b-f7f8-4815-8500-599576ae1f1f.png"></p><ul><li>If a bit-flip error occurs in one of the three physical qubits representing the logical qubit:</li></ul><p><img src="/posts/127662ed/45b58c05-d21f-4a36-9f33-671196ff3b3a.png"></p><ul><li>Check the parity of adjacent qubits pairwise using CX gates.</li></ul><p><img src="/posts/127662ed/d7264dce-dfce-4b61-b271-6fa0cbc19d94.png"></p><ul><li>Using $q_3$‚Äã and $q_4$‚Äã‚Äôs values, the location of the bit-flip error can be determined:</li></ul><table><thead><tr><th>$q_3q_4$</th><th>Err</th></tr></thead><tbody><tr><td>00</td><td>N&#x2F;A</td></tr><tr><td>10</td><td>q0</td></tr><tr><td>11</td><td>q1</td></tr><tr><td>01</td><td>q2</td></tr></tbody></table><p>In the example above, the measurement result of $q_3q_4$‚Äã is 11, which indicates that a bit-flip occurred on $q_1$.</p><ul><li>Based on the corresponding encoding, apply a corrective flip at the specified position. In this case, an $X$-gate is applied to $q_1$‚Äã.</li></ul><p><img src="/posts/127662ed/42e3e338-4727-4dd9-ab54-b5114bb509d5.png"></p><h2 id="Accuracy-Calculate"><a href="#Accuracy-Calculate" class="headerlink" title="Accuracy Calculate"></a>Accuracy Calculate</h2><p>Since this basic circuit uses only three qubits, it can tolerate at most one bit-flip error. If more than one bit-flip occurs, the circuit cannot correct the errors accurately. Assuming the probability of a bit-flip error for a single physical qubit is $ p $, the number of bit-flip errors in this circuit follows a $ Binary(3, p) $ distribution.</p><p>The probability of a logical qubit experiencing a bit-flip error is $ p^3 + 3p^2(1 - p) $, which is the sum of the probabilities of exactly three bit-flip errors and exactly two bit-flip errors.</p><p>If we plot these probabilities, the graph shows that for $ p &lt; 0.5 $, this logical qubit provides a lower error rate compared to a single physical qubit.</p><p><img src="/posts/127662ed/image_2025-01-08_10-14-29.png" alt="Graph of error probabilities"></p><h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p>Experiment with whether this circuit works as designed by testing it through simulating bit-flip errors by manually adding X-gates at predetermined positions.</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/d9c3ff0e-5556-4b29-8740-4df0e9c50cfc.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/76f9a782-3363-4f27-8c8f-763305a4802a.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/e0a0c764-909a-4ff1-8342-99f26597c7ee.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div></div><p>It can be observed that, in the simulated tests, a bit-flip error occurring on any one of $ q_0 $, $ q_1 $, or $ q_2 $ does not affect the state of the current logical qubit.</p><h1 id="Phase-Flip"><a href="#Phase-Flip" class="headerlink" title="Phase Flip"></a>Phase Flip</h1><p>Phase-flip error is another common type of error, which occurs when a quantum bit unintentionally has a $ Z $-gate applied to it ($ Z|0\rangle &#x3D; |0\rangle $, $ Z|1\rangle &#x3D; -|1\rangle $). This type of error cannot be detected using the bit-flip detection circuit described above. However, with a slight modification, the circuit can be adapted to detect phase-flip errors as well.</p><h2 id="Correction-Circuit-1"><a href="#Correction-Circuit-1" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><ul><li>Similar to the bit-flip correction circuit, a logical qubit is represented using three physical qubits, and a Hadamard gate is applied to each qubit. The purpose of using the Hadamard gate for encoding is that if a phase-flip occurs on any qubit, it will flip $ |+\rangle $ to $ |-\rangle $. Finally, by applying the Hadamard gate again for decoding, the state will return to $ |0\rangle $ and $ |1\rangle $. This way, the phase-flip error is transformed into a bit-flip error.</li></ul><p><img src="/posts/127662ed/41ff177e-2348-4be0-b561-467ab134d3f3.png"></p><ul><li>Use CX gates to check whether adjacent qubits are equal. Unlike the bit-flip detection circuit, in this case, a Hadamard gate is applied to the qubits being checked, and the direction of the CX gate is reversed.</li></ul><p><img src="/posts/127662ed/d6146133-e052-4969-ad0a-a0e178114040.png"></p><p>We can use the following equation to understand how phase-flip error detection for a qubit is implemented.<br>$$<br>|- +\rangle \xrightarrow{expand}<br>\frac{1}{2}(|00\rangle + |01\rangle - |10\rangle - |11\rangle)<br>\xrightarrow{cx(0, 1)} \frac{1}{2}(|00\rangle + |11\rangle - |10\rangle - |01\rangle)<br>\xrightarrow{reorder} |- -\rangle<br>$$</p><p>It can be seen that, through the CX gate, the $ |-\rangle $ state from the detected position is propagated to the qubit at the detection location. This achieves a similar effect to the bit-flip error detection described earlier.</p><ul><li>Similar to the bit-flip circuit, apply the corrective $ Z $-gate to the qubit at the position corresponding to the measurement result.</li></ul><p><img src="/posts/127662ed/8778f677-f027-47f7-bb13-c9f1d7ca98b1.png"></p><ul><li>Finally, decode the physically encoded qubits back to their original states using the Hadamard gate.</li></ul><p><img src="/posts/127662ed/7e19b997-e7cd-4c9c-abd0-7f162172c633.png"></p><h2 id="Test-1"><a href="#Test-1" class="headerlink" title="Test"></a>Test</h2><p>Experiment to check if the circuit works properly. Since Hadamard gates are used for encoding and decoding, any phase-flip that occurs in the middle will be converted into a bit-flip, which can then be detected through measurement.</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/9cc9d438-c438-46ee-a2a5-3921aa4b18aa.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/c6e37afa-84e2-4ae7-9bdb-c88a9406de39.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/127662ed/523bc553-fbe9-4f6c-97b6-edac3cf5d0c3.png"></div><div class="group-image-wrap"><img src="/posts/127662ed/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div></div><p>As shown in the diagram, if there is a phase-flip error on one of the three physical qubits, it can be corrected.</p><h2 id="Remain-Problem"><a href="#Remain-Problem" class="headerlink" title="Remain Problem"></a>Remain Problem</h2><p>So far, circuits have been provided to handle both bit-flip and phase-flip errors, but the common issue is that each circuit can only handle one type of error and cannot correct the other type. The following will introduce a complete solution to handle both types of errors.</p><h1 id="Shor-Code"><a href="#Shor-Code" class="headerlink" title="Shor Code"></a>Shor Code</h1><p>If both bit-flip and phase-flip errors occur simultaneously on a logical qubit, the solution is naturally to nest both error-correction circuits. Specifically, the three physical qubits in the phase-flip correction circuit are each represented by three bit-flip correction circuits. Of course, the reverse can also be done.</p><p>This approach results in the Shor Code, which can simultaneously handle both bit-flip and phase-flip errors.</p><h2 id="Correction-Circuit-2"><a href="#Correction-Circuit-2" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><p><img src="/posts/127662ed/2e3b9efd-0e2e-4f8f-8113-b061bec9f8c3.png"></p><h2 id="Accuracy-Calculate-1"><a href="#Accuracy-Calculate-1" class="headerlink" title="Accuracy Calculate"></a>Accuracy Calculate</h2><p>The accuracy of the Shor Code is the same as the previous two error-correction circuits, as it can correct any single bit-flip or phase-flip. Therefore, its error rate is given by:</p><p>$$1 - (1 - p) ^ 9 - 9 * p * (1 - p) ^ 8$$</p><p>where $p$ is the probability of a single physical qubit experiencing a bit-flip or phase-flip.</p><p> <img src="/posts/127662ed/image_2025-01-13_10-29-18.png"></p><p>As seen in the graph, when $ p &lt; 0.0323 $, the Shor Code performs better than a single physical qubit.</p>]]></content>
    
    
    
    <tags>
      
      <tag>Quantum Computing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Quantum Error Correction: Stablizer</title>
    <link href="/posts/b8221040/"/>
    <url>/posts/b8221040/</url>
    
    <content type="html"><![CDATA[<!-- @format --><p>After a simple example of Shor Code, this article will introduce stabilizer as a tool to build and analyze quantum error correction circuits.</p><h1 id="Why-do-we-need-stabilizers"><a href="#Why-do-we-need-stabilizers" class="headerlink" title="Why do we need stabilizers?"></a>Why do we need stabilizers?</h1><p>One key point of quantum error correction is to detect whether the logical qubit has been affected by errors or not without measuring the qubit directly. This is because measurement would destroy the quantum state and cause it to collapse, rendering the qubit unusable.</p><p>Stabilizers work by creating quantum entanglement between target qubits and ancilla (detector) qubits. By measuring the ancilla qubits, we can obtain information about the target qubits‚Äô state without destroying them‚Äîa mechanism similar to quantum teleportation.</p><h1 id="Measurement-via-Pauli-Operations"><a href="#Measurement-via-Pauli-Operations" class="headerlink" title="Measurement via Pauli Operations"></a>Measurement via Pauli Operations</h1><p>First we need to understand the most basic component of stablizer.</p><p>Consider the following circuit:</p><p><img src="/posts/b8221040/Quantum-Error-Correction-Stablizer/circ1.png"></p><p>Assume that $q_0$ is in an arbitrary quantum state. What information can we obtain by measuring $q_1$ in this circuit?</p><p>$$<br>\begin{align}<br>q_0 q_1 &amp;&#x3D; (a|0\rangle + b|1\rangle) \otimes |0\rangle \\<br>&amp;\xrightarrow{\text{H}(1)} (a|0\rangle + b|1\rangle) \otimes |+\rangle \\<br>&amp;\xrightarrow{\text{CNOT}(1,0)} \frac{1}{\sqrt{2}}(a|00\rangle + b|01\rangle + b|10\rangle + a|11\rangle) \\<br>&amp;\xrightarrow{\text{H}(1)} \frac{1}{\sqrt{2}}\left[(a + b)|+\rangle \otimes |0\rangle + (a - b)|-\rangle \otimes |1\rangle\right]<br>\end{align}<br>$$</p><p>Thus, measuring $q_1$ corresponds to measuring $q_0$ in the $\lbrace|+\rangle, |-\rangle\rbrace$ basis instead of the $\lbrace|0\rangle, |1\rangle\rbrace$ basis. The key feature of this circuit is that it avoids direct measurement of $q_0$, allowing it to remain usable for subsequent computations.</p><p>From the perspective of Pauli Matrixs, we can get</p><p>$$<br>X &#x3D; |+\rangle\langle+| - |-\rangle\langle-|<br>$$</p><p>therefore the projective measurement defined by X is:</p><p>$$<br>\lbrace‚à£+\rangle\langle+‚à£, ‚à£‚àí\rangle\langle‚àí‚à£\rbrace<br>$$</p><p>Similiarly, we get</p><p>$$<br>\begin{align}<br>&amp;Y &#x3D; |+i\rangle\langle+i| - |-i\rangle\langle-i| \\<br>&amp;Z &#x3D; |0\rangle\langle0| - |1\rangle\langle1|<br>\end{align}<br>$$</p><p>The measurements defined by $X, Y,$ and $Z,$ are viewed as pauli observables.</p><p>If we combine two pauli observables together:</p><p>$$<br>Z‚äóZ&#x3D;(‚à£0‚ü©‚ü®0‚à£‚àí‚à£1‚ü©‚ü®1‚à£)‚äó(‚à£0‚ü©‚ü®0‚à£‚àí‚à£1‚ü©‚ü®1‚à£)&#x3D;(‚à£00‚ü©‚ü®00‚à£+‚à£11‚ü©‚ü®11‚à£)‚àí(‚à£01‚ü©‚ü®01‚à£+‚à£10‚ü©‚ü®10‚à£)<br>$$</p><p>If, for instance, we were to measure a $‚à£œï^+‚ü©$ Bell state nondestructively using this measurement, then we would be certain to obtain the outcome 0, and the state would be unchanged as a result of the measurement. In particular, the state would not collapse to $‚à£00‚ü©$ or $‚à£11‚ü©$.</p><h1 id="Definition-of-stablizer"><a href="#Definition-of-stablizer" class="headerlink" title="Definition of stablizer"></a>Definition of stablizer</h1><p>An n-qubit stabilizer code is specified by a list of n-qubit Pauli operations, $P1,‚Ä¶,Pr$‚Äã. These operations are called stabilizer generators in this context, and they must satisfy the following three properties.</p><ol><li><p>The stabilizer generators all commute with one another.</p></li><li><p>The stabilizer generators form a minimal generating set.</p></li><li><p>At least one quantum state vector is fixed by all of the stabilizer generators.</p></li></ol><p>Now we can describe nine qubit shor code as:</p><p>$$<br>\begin{align}<br>Z‚äóZ‚äóI‚äóI‚äó&amp;I‚äóI‚äóI‚äóI‚äóI \\<br>I‚äóZ‚äóZ‚äóI‚äó&amp;I‚äóI‚äóI‚äóI‚äóI \\<br>I‚äóI‚äóI‚äóZ‚äó&amp;Z‚äóI‚äóI‚äóI‚äóI \\<br>I‚äóI‚äóI‚äóI‚äó&amp;Z‚äóZ‚äóI‚äóI‚äóI \\<br>I‚äóI‚äóI‚äóI‚äó&amp;I‚äóI‚äóZ‚äóZ‚äóI \\<br>I‚äóI‚äóI‚äóI‚äó&amp;I‚äóI‚äóI‚äóZ‚äóZ \\<br>X‚äóX‚äóX‚äóX‚äó&amp;X‚äóX‚äóI‚äóI‚äóI \\<br>I‚äóI‚äóI‚äóX‚äó&amp;X‚äóX‚äóX‚äóX‚äóX‚Äã<br>\end{align}<br>$$</p>]]></content>
    
    
    
    <tags>
      
      <tag>Quantum Computing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ÈáèÂ≠êÁ∫†Èîô: Shor Code</title>
    <link href="/posts/e600f8d3/"/>
    <url>/posts/e600f8d3/</url>
    
    <content type="html"><![CDATA[<p>ÈáèÂ≠êÁ∫†ÈîôÁÆóÊ≥ïÊòØÈáèÂ≠êËÆ°ÁÆóÈ¢ÜÂüüÁöÑÊ†∏ÂøÉÊäÄÊúØ‰πã‰∏Ä,Êó®Âú®Â∫îÂØπÈáèÂ≠êÊØîÁâπ(qubits)ÊòìÂèóÁéØÂ¢ÉÂπ≤Êâ∞ÂØºËá¥‰ø°ÊÅØ‰∏¢Â§±ÊàñÂá∫ÈîôÁöÑÈóÆÈ¢ò„ÄÇÁî±‰∫éÈáèÂ≠êÁ≥ªÁªüÁöÑÁâπÊÄß, Â¶ÇÂè†Âä†ÊÄÅÂíåÈáèÂ≠êÁ∫†Áº†, ‰ΩøÂæóÈáèÂ≠ê‰ø°ÊÅØÊûÅÂÖ∂ËÑÜÂº±, ‰ªª‰ΩïÂæÆÂ∞èÁöÑÂô™Â£∞ÊàñÁõ∏‰ΩçÂÅèÁßªÈÉΩÂèØËÉΩÁ†¥ÂùèËÆ°ÁÆóÁöÑÂáÜÁ°ÆÊÄß„ÄÇÈáèÂ≠êÁ∫†ÈîôÈÄöËøáËÆæËÆ°ÁâπÊÆäÁöÑÁºñÁ†ÅÊñπÊ°à, Â∞Ü‰∏Ä‰∏™ÈáèÂ≠êÊØîÁâπÁöÑ‰ø°ÊÅØÂàÜÂ∏ÉÂà∞Â§ö‰∏™Áâ©ÁêÜÈáèÂ≠êÊØîÁâπ‰∏ä, ‰ªéËÄåÊ£ÄÊµãÂíåÁ∫†Ê≠£ÈîôËØØ, ËÄå‰∏ç‰ºöÁ†¥ÂùèÈáèÂ≠êÊÄÅ„ÄÇ‰æãÂ¶Ç, ÁªèÂÖ∏ÁöÑÈáèÂ≠êÁ∫†ÈîôÁ†ÅÂåÖÊã¨ËÇñÂ∞îÁ†Å (Shor Code), ÊñØÂù¶ÊÅ©Á†Å (Steane Code) ÂíåË°®Èù¢Á†Å (Surface Code). Ëøô‰∫õÁÆóÊ≥ïËÉΩÂ§üËØÜÂà´Âíå‰øÆÂ§çÊØîÁâπÁøªËΩ¨ (bit-flip) ÈîôËØØ„ÄÅÁõ∏‰ΩçÁøªËΩ¨ (phase-flip) ÈîôËØØÊàñ‰∏§ËÄÖÂêåÊó∂ÂèëÁîüÁöÑÈîôËØØ, ‰∏∫ÊûÑÂª∫ÂèØÈù†ÁöÑÂ§ßËßÑÊ®°ÈáèÂ≠êËÆ°ÁÆóÊú∫Êèê‰æõ‰∫ÜÂùöÂÆûÁöÑÂü∫Á°Ä„ÄÇËøôÁØáÊñáÁ´†Â∞Ü‰ªãÁªçShor CodeÁöÑÊû∂ÊûÑ.</p><h1 id="Bit-Flip"><a href="#Bit-Flip" class="headerlink" title="Bit Flip"></a>Bit Flip</h1><p>bit flip error (ÊØîÁâπÁøªËΩ¨ÈîôËØØ) ÊòØÊúÄÂ∏∏ËßÅÁöÑ‰∏ÄÁßçÈîôËØØÁ±ªÂûãÔºåÂÆÉÊåáÁöÑÊòØ‰∏Ä‰∏™ÈáèÂ≠êÊØîÁâπÁöÑÁä∂ÊÄÅÊÑèÂ§ñ‰ªé $|0\rangle$ ÁøªËΩ¨‰∏∫ $|1\rangle$ÔºåÊàñËÄÖ‰ªé $|1\rangle$ ÁøªËΩ¨‰∏∫ $|0\rangle$„ÄÇËøôÁßçÈîôËØØÁ±ª‰ºº‰∫éÁªèÂÖ∏ËÆ°ÁÆó‰∏≠ÊØîÁâπÁöÑÁøªËΩ¨Ôºå‰ΩÜÂú®ÈáèÂ≠êËÆ°ÁÆó‰∏≠ÈúÄË¶ÅÈÄöËøáÁ∫†ÈîôÁºñÁ†ÅÊù•Ê£ÄÊµãÂíå‰øÆÊ≠£Ôºå‰ª•‰øùÊä§ÈáèÂ≠ê‰ø°ÊÅØÁöÑÂÆåÊï¥ÊÄß„ÄÇ</p><h2 id="Correction-Circuit"><a href="#Correction-Circuit" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><ul><li>È¶ñÂÖàÈÄöËøácxÂ∞Ü‰∏Ä‰∏™ÈÄªËæëÊØîÁâπÁî®‰∏â‰∏™Áâ©ÁêÜÊØîÁâπË°®Á§∫ (cx‰∏∫control-x, ÊïàÊûú‰∏∫Â¶ÇÊûúÊéßÂà∂‰ΩçÁöÑqubitÁöÑÂÄº‰∏∫1, ÂàôÁøªËΩ¨ÂØπÂ∫îÁöÑqubit, Âú®‰∏ãÂõæ‰∏≠Ë°®Áé∞‰∏∫Â¶ÇÊûúq0‰∏∫$|1\rangle$, ÂØπÂ∫îÁøªËΩ¨q1Âíåq2ÁöÑÂÄº)</li></ul><p><img src="/posts/e600f8d3/9fafab4b-f7f8-4815-8500-599576ae1f1f.png"></p><ul><li>ÂÅáËÆæ‰∏â‰∏™ÈÄªËæëÊØîÁâπ‰∏≠ÁöÑ‰∏Ä‰∏™Âá∫Áé∞‰∫ÜÊØîÁâπÁøªËΩ¨ÈîôËØØ</li></ul><p><img src="/posts/e600f8d3/45b58c05-d21f-4a36-9f33-671196ff3b3a.png"></p><ul><li>ÈÄöËøácxÊ£ÄÊü•‰∏§‰∏§Áõ∏ÈÇªÁöÑqubitÁöÑÂ•áÂÅ∂ÊÄß</li></ul><p><img src="/posts/e600f8d3/d7264dce-dfce-4b61-b271-6fa0cbc19d94.png"></p><ul><li>ËøôÊ†∑Ê†πÊçÆq3,q4ÁöÑÂÄº,Â∞±ÂèØ‰ª•Êé®ÂØºÂá∫ÊØîÁâπÁøªËΩ¨ÂèëÁîüÁöÑ‰ΩçÁΩÆ:</li></ul><table><thead><tr><th>q3q4</th><th>Err</th></tr></thead><tbody><tr><td>00</td><td>N&#x2F;A</td></tr><tr><td>10</td><td>q0</td></tr><tr><td>11</td><td>q1</td></tr><tr><td>01</td><td>q2</td></tr></tbody></table><p>Âú®‰∏äÈù¢ÁöÑÊ°à‰æãÈáå, q3q4 measureÁöÑÁªìÊûúÊòØ11, ‰πüÂ∞±ÊòØËØ¥q1Âá∫Áé∞‰∫ÜÊØîÁâπÁøªËΩ¨.</p><ul><li>Ê†πÊçÆÂØπÂ∫îÁöÑÁºñÁ†ÅÂØπÊåáÂÆöÁöÑ‰ΩçÁΩÆËøõË°åÂèçÂêëÁøªËΩ¨, Âú®‰∏äÈù¢ÁöÑÊ°à‰æãÈáåÂ∞±ÊòØÂú®q1‰∏äÂ∫îÁî®XÈó®</li></ul><p><img src="/posts/e600f8d3/42e3e338-4727-4dd9-ab54-b5114bb509d5.png"></p><h2 id="Accuracy-Calculate"><a href="#Accuracy-Calculate" class="headerlink" title="Accuracy Calculate"></a>Accuracy Calculate</h2><p>Âõ†‰∏∫Ëøô‰∏™ÊúÄÂü∫Êú¨ÁöÑÁîµË∑ØÂè™Êúâ‰∏â‰∏™ÊØîÁâπ, ÊâÄ‰ª•ÂÆÉÂè™ËÉΩÂÆπÂøç‰∏Ä‰∏™ÊØîÁâπÁöÑÁøªËΩ¨ÈîôËØØ, Ë∂ÖËøá‰∏Ä‰∏™ÊØîÁâπÂ∞±Êó†Ê≥ïÊ≠£Á°ÆÁöÑÁ∫†Èîô‰∫Ü. ÂÅáËÆæ‰∏Ä‰∏™Áâ©ÁêÜÊØîÁâπÁöÑÂá∫Áé∞ÁøªËΩ¨ÈîôËØØÁöÑÊ¶ÇÁéáÊòØp, ‰πüÂ∞±ÊòØËØ¥Ëøô‰∏™ÁîµË∑ØÂá∫Áé∞ÁøªËΩ¨ÈîôËØØÁöÑÊØîÁâπÁöÑÊï∞Èáè~$Binary(3, p)$. ÈÇ£‰πàËøô‰∏™ÈÄªËæëÊØîÁâπÁöÑÂá∫Áé∞ÁøªËΩ¨ÈîôËØØÁöÑÊ¶ÇÁéáÂ∞±ÊòØ$p^3 + 3 * p ^ 2 * (1 - p)$, Âç≥Âá∫Áé∞‰∏â‰∏™ÁøªËΩ¨ÈîôËØØÂíå‰∏§‰∏™ÁøªËΩ¨ÈîôËØØÁöÑÊ¶ÇÁéá‰πãÂíå. Â¶ÇÊûúÁªòÂà∂Âá∫Ëøô‰∏§‰∏™Ê¶ÇÁéáÁöÑÊõ≤Á∫ø, ÂèØ‰ª•ÁúãÂà∞:</p><p><img src="/posts/e600f8d3/image_2025-01-08_10-14-29.png"></p><p>Âú®p &lt; 0.5Êó∂, Ëøô‰∏™Logical BitËÉΩÁªôÊàë‰ª¨Â∏¶Êù•Êõ¥‰ΩéÁöÑÈîôËØØÁéá.</p><h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><p>ÂÆûÈ™å‰∏Ä‰∏ãËøô‰∏™ÁîµË∑ØËÉΩÂê¶ÊåâÁÖßËÆæËÆ°ÁöÑÂ∑•‰Ωú, ÊµãËØïÈÄöËøáÂú®È¢ÑÂÆö‰ΩçÁΩÆÊâãÂä®Ê∑ªÂä†XÈó®ÁöÑÊñπÂºèÊù•Ê®°Êãübit flip error.</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/d9c3ff0e-5556-4b29-8740-4df0e9c50cfc.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/76f9a782-3363-4f27-8c8f-763305a4802a.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/e0a0c764-909a-4ff1-8342-99f26597c7ee.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div></div><p>ÂèØ‰ª•ÁúãËßÅ, Âú®Ê®°ÊãüÊµãËØï‰∏ã, q0, q1, q2‰∏â‰∏™ÊØîÁâπ‰∏≠ÁöÑ‰ªªÊÑè‰∏Ä‰∏™ÊØîÁâπÂèëÁîübit flip errorÂπ∂‰∏ç‰ºöÂΩ±ÂìçÂΩìÂâçÈÄªËæëÊØîÁâπÁöÑÁä∂ÊÄÅ.</p><h1 id="Phase-Flip"><a href="#Phase-Flip" class="headerlink" title="Phase Flip"></a>Phase Flip</h1><p>phase flip errorÁõ∏‰ΩçÂèçËΩ¨ÈîôËØØÊòØÂè¶‰∏ÄÁßçÂ∏∏ËßÅÁöÑÈîôËØØÁ±ªÂûã, ÂèØ‰ª•Ë°®Á§∫‰∏∫‰∏Ä‰∏™ÈáèÂ≠êÊØîÁâπÊÑèÂ§ñË¢´Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™ZÈó® ($Z|0&gt; &#x3D; |0&gt;, Z|1&gt; &#x3D; -|1&gt;$).<br>ËøôÁßçÈîôËØØÁî®‰∏äÈù¢ÁöÑÁöÑÊØîÁâπÁøªËΩ¨ÁöÑÊ£ÄÊµãÁîµË∑ØÊó†Ê≥ïÊ£ÄÊµãÂà∞, ‰ΩÜÁ®çÂä†‰øÆÊîπÂ∞±ÂèØ‰ª•Âú®phase flip error‰∏äÂ∫îÁî®.</p><h2 id="Correction-Circuit-1"><a href="#Correction-Circuit-1" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><ul><li><p>‰∏ébit flip correction circuit‰∏ÄÊ†∑, Áî®‰∏â‰∏™Áâ©ÁêÜÊØîÁâπË°®Á§∫‰∏Ä‰∏™ÈÄªËæëÊØîÁâπ, Âπ∂‰∏î‰∏∫ÊØè‰∏™ÊØîÁâπÊ∑ªÂä†‰∏Ä‰∏™HadamardÈó®. Áî®HadamardÈó®ÁºñÁ†ÅÁöÑÁõÆÁöÑÊòØÂ¶ÇÊûúphase flipÂèëÁîüÂú®Êüê‰∏Ä‰∏™ÊØîÁâπ‰∏ä, ÂÆÉÂ∞±‰ºöÊää$|+\rangle$ÁøªËΩ¨‰∏∫$|-\rangle$, ÊúÄÂêéÂÜçÈÄöËøáHadamardÈó®Ëß£Á†ÅÂ∞±‰ºöÈáçÊñ∞ÂèòÂõû$|0\rangle$Âíå$|1\rangle$ÁöÑÁä∂ÊÄÅ. ËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÊääphase flipËΩ¨Âåñ‰∏∫‰∫Übit flip<br><img src="/posts/e600f8d3/41ff177e-2348-4be0-b561-467ab134d3f3.png"></p></li><li><p>‰ΩøÁî®cxÊ£ÄÊµãÁõ∏ÈÇªqubitÊòØÂê¶Áõ∏Á≠â, ‰∏ébit flipÁöÑÁîµË∑Ø‰∏çÂêåÁöÑÊòØ, ËøôÈáåÂØπÊ£ÄÊµãÁöÑqubitÊ∑ªÂä†‰∫ÜHadamardÈó®Âπ∂‰∏îÁøªËΩ¨‰∫ÜcxÁöÑÊñπÂêë.</p></li></ul><p><img src="/posts/e600f8d3/d6146133-e052-4969-ad0a-a0e178114040.png"></p><p>Êàë‰ª¨ÂèØ‰ª•Áî®‰∏ãÈù¢Ëøô‰∏™ÂºèÂ≠êÊù•ÁêÜËß£ÂØπ‰∫é‰∏Ä‰∏™ÊØîÁâπÁöÑphase flip errorÊ£ÄÊµãÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ<br>$$<br>|- +\rangle \xrightarrow{expand}<br>\frac{1}{2}(|00\rangle + |01\rangle - |10\rangle - |11\rangle)<br>\xrightarrow{cx(0, 1)} \frac{1}{2}(|00\rangle + |11\rangle - |10\rangle - |01\rangle)<br>\xrightarrow{reorder} |- -\rangle<br>$$</p><p>ÂèØ‰ª•ÁúãËßÅ, ÈÄöËøácxÈó®, Ë¢´Ê£ÄÊµã‰ΩçÁΩÆÁöÑ$|-\rangle$Ë¢´‰º†Êí≠Âà∞‰∫ÜÊ£ÄÊµã‰ΩçÁΩÆÁöÑÊØîÁâπ‰∏ä, ËøôÊ†∑Â∞±ÂÆûÁé∞‰∫Ü‰∏é‰∏äÈù¢bit flipÊ£ÄÊµãÁ±ª‰ººÁöÑÊïàÊûú</p><ul><li>‰∏ébit flip circuitÁ±ª‰ºº, Âú®measureÁªìÊûúÂØπÂ∫îÁöÑ‰ΩçÁΩÆÁöÑÊØîÁâπ‰∏äÂ∫îÁî®‰øÆÂ§çÁöÑZÈó®</li></ul><p><img src="/posts/e600f8d3/8778f677-f027-47f7-bb13-c9f1d7ca98b1.png"></p><ul><li>ÊúÄÂêéÊääÁî®HadamardÈó®ÁºñÁ†ÅÁöÑÁâ©ÁêÜÊØîÁâπËß£Á†Å‰∏∫ÂéüÊú¨ÁöÑÁä∂ÊÄÅ</li></ul><p><img src="/posts/e600f8d3/7e19b997-e7cd-4c9c-abd0-7f162172c633.png"></p><h2 id="Test-1"><a href="#Test-1" class="headerlink" title="Test"></a>Test</h2><p>ÂÆûÈ™åÁîµË∑ØÊòØÂê¶Ê≠£Â∏∏Â∑•‰Ωú, Âõ†‰∏∫‰ΩøÁî®‰∫ÜHadamardÈó®ÁºñÁ†ÅËß£Á†Å, ËøôÊ†∑Âú®‰∏≠Èó¥ÂèëÁîüÁöÑphase flipÂ∞Ü‰ºöË¢´ËΩ¨Êç¢‰∏∫bit flipÂπ∂ÂèØ‰ª•ÈÄöËøámeasureÊ£ÄÊµã.</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/9cc9d438-c438-46ee-a2a5-3921aa4b18aa.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/c6e37afa-84e2-4ae7-9bdb-c88a9406de39.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="/posts/e600f8d3/523bc553-fbe9-4f6c-97b6-edac3cf5d0c3.png"></div><div class="group-image-wrap"><img src="/posts/e600f8d3/a531af4b-85af-4bab-ad57-b0bc44aa41c1.png"></div></div></div><p>Â¶ÇÂõæÊâÄÁ§∫, ‰∏â‰∏™Áâ©ÁêÜÊØîÁâπ‰∏äÂ¶ÇÊûúÂ≠òÂú®‰∏Ä‰∏™phase flip errorÊòØÂèØ‰ª•Ë¢´Á∫†Ê≠£ÁöÑ</p><h2 id="Remain-Problem"><a href="#Remain-Problem" class="headerlink" title="Remain Problem"></a>Remain Problem</h2><p>Âà∞ÁõÆÂâç‰∏∫Ê≠¢, bit flip errorÂíåphase flip errorÈÉΩÊúâÂØπÂ∫îÁöÑÁîµË∑ØËß£ÂÜ≥‰∫Ü, ‰ΩÜÂÖ±ÊúâÁöÑÈóÆÈ¢òÂ∞±Âú®‰∫é‰ªªÊÑè‰∏ÄÁßçÁîµË∑ØÈÉΩÊ≤°Ê≥ïÂ§ÑÁêÜÂè¶‰∏ÄÁßçÁ±ªÂûãÁöÑÈîôËØØ. ËÄå‰∏ãÈù¢Â∞±‰ºö‰ªãÁªçÂÆåÂ§áÁöÑËß£ÂÜ≥ÊñπÊ°à.</p><h1 id="Shor-Code"><a href="#Shor-Code" class="headerlink" title="Shor Code"></a>Shor Code</h1><p>Â¶ÇÊûúÊØîÁâπÁøªËΩ¨ÂíåÁõ∏‰ΩçÁøªËΩ¨ÈîôËØØÂêåÊó∂ÂèëÁîüÂú®‰∏Ä‰∏™ÈÄªËæëÊØîÁâπ‰∏ä, Ëß£ÂÜ≥ÊñπÊ°àËá™ÁÑ∂ÊòØÂêß‰∏§ÁßçÁ∫†ÈîôÁîµË∑ØÂµåÂ•óËµ∑Êù•, ÂÖ∑‰ΩìÊù•ËØ¥Â∞±ÊòØÊääphase flip correction circuitÈáåÁöÑ‰∏â‰∏™Áâ©ÁêÜÊØîÁâπÂàÜÂà´Áî®‰∏â‰∏™bit flip correction circuitË°®Á§∫, ÂΩìÁÑ∂ÂèçËøáÊù•‰πüÂèØ‰ª•.<br>ËøôÊ†∑Â∞±ÂæóÂà∞‰∫ÜÂèØ‰ª•ÂêåÊó∂Â§ÑÁêÜbit flipÂíåphase flipÁöÑShor Code.</p><h2 id="Correction-Circuit-2"><a href="#Correction-Circuit-2" class="headerlink" title="Correction Circuit"></a>Correction Circuit</h2><p><img src="/posts/e600f8d3/2e3b9efd-0e2e-4f8f-8113-b061bec9f8c3.png"></p><h2 id="Accuracy-Calculate-1"><a href="#Accuracy-Calculate-1" class="headerlink" title="Accuracy Calculate"></a>Accuracy Calculate</h2><p>Shor CodeÁöÑÂáÜÁ°ÆÁéáÂíå‰πãÂâç‰∏§‰∏™Á∫†ÈîôÁîµË∑Ø‰∏ÄÊ†∑, ÂèØ‰ª•Á∫†Ê≠£‰ªª‰ΩïÂçï‰∏™ÊØîÁâπÁöÑÁøªËΩ¨. ÊâÄ‰ª•ÂÆÉÁöÑÈîôËØØÁéá‰∏∫$1 - (1 - p) ^ 9 - 9 * p * (1 - p) ^ 8$ (p ‰∏∫ÂçïÁâ©ÁêÜÊØîÁâπÂèëÁîübit flipÊàñphas flipÁöÑÊ¶ÇÁéá).</p><p> <img src="/posts/e600f8d3/image_2025-01-13_10-29-18.png"></p><p>ÂèØ‰ª•ÁúãÂà∞, ÂΩì $ p &lt; 0.0323 $ ÁöÑÊó∂ÂÄô, shor codeÂèØ‰ª•ÊúâÊØîÂçïÁâ©ÁêÜÊØîÁâπÊõ¥Â•ΩÁöÑË°®Áé∞.</p>]]></content>
    
    
    
    <tags>
      
      <tag>Quantum Computing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Network Flow</title>
    <link href="/posts/ea1c16df/"/>
    <url>/posts/ea1c16df/</url>
    
    <content type="html"><![CDATA[<h2 id="1-Problem-Description"><a href="#1-Problem-Description" class="headerlink" title="1: Problem Description"></a>1: Problem Description</h2><p>As stated, given a network graph with a source node and a sink node, calculate the maximum flow in the network.</p><h3 id="1-1-Input-Format"><a href="#1-1-Input-Format" class="headerlink" title="1.1: Input Format"></a>1.1: Input Format</h3><p>The first line contains four positive integers: $$n,m,s,t$$, representing the number of nodes, the number of directed edges, the source node index, and the sink node index, respectively.</p><p>The following mm lines each contain three positive integers: $u_i,v_i,w_i‚Äã$, representing the i-th directed edge starting from uiui‚Äã, ending at $v_i$‚Äã, with a weight $w_i$‚Äã (indicating the maximum flow capacity of the edge).</p><h3 id="1-2-Output-Format"><a href="#1-2-Output-Format" class="headerlink" title="1.2: Output Format"></a>1.2: Output Format</h3><p>A single line containing a single positive integer, which is the maximum flow in the network.</p><h3 id="1-3-Example"><a href="#1-3-Example" class="headerlink" title="1.3: Example"></a>1.3: Example</h3><h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">4 5 4 3<br>4 2 30<br>4 3 20<br>2 3 20<br>2 1 30<br>1 3 30<br></code></pre></td></tr></table></figure><h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">50<br></code></pre></td></tr></table></figure><h2 id="2-Solution-1-Edmonds‚ÄìKarp-Algorithm"><a href="#2-Solution-1-Edmonds‚ÄìKarp-Algorithm" class="headerlink" title="2: Solution 1: Edmonds‚ÄìKarp Algorithm"></a>2: Solution 1: Edmonds‚ÄìKarp Algorithm</h2><ol><li>Find a path from the source ss to the sink tt where all edges have remaining capacity ($capacity‚àíflow&gt;0$). Such a path is called ‚Äúconnected.‚Äù</li><li>Determine the bottleneck capacity along this path as $Augment&#x3D;min‚Å°(capacity‚àíflow)$.</li><li>Add the $Augment$ to the maxflow result</li><li>Repeat the previous steps until the algorithm cannot find any connected path from s to t</li></ol><h3 id="2-1-Code-Part"><a href="#2-1-Code-Part" class="headerlink" title="2.1: Code (Part)"></a>2.1: Code (Part)</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs rust">.....<br><span class="hljs-keyword">fn</span> <span class="hljs-title function_">max_flow</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, s: <span class="hljs-type">usize</span>, t: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">flow</span> = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">loop</span> &#123;<br>        <span class="hljs-comment">// Reset for BFS</span><br>        <span class="hljs-keyword">self</span>.a.<span class="hljs-title function_ invoke__">fill</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">queue</span> = VecDeque::<span class="hljs-title function_ invoke__">new</span>();<br>        queue.<span class="hljs-title function_ invoke__">push_back</span>(s);<br>        <span class="hljs-keyword">self</span>.a[s] = INF;<br><br>        <span class="hljs-comment">// Perform BFS</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(x) = queue.<span class="hljs-title function_ invoke__">pop_front</span>() &#123;<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(edges) = <span class="hljs-keyword">self</span>.graph.<span class="hljs-title function_ invoke__">get</span>(&amp;x) &#123;<br>                <span class="hljs-keyword">for</span> &amp;i <span class="hljs-keyword">in</span> edges &#123;<br>                    <span class="hljs-keyword">let</span> <span class="hljs-variable">edge</span> = &amp;<span class="hljs-keyword">self</span>.edges[i];<br>                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.a[edge.to] == <span class="hljs-number">0</span> &amp;&amp; edge.cap &gt; edge.flow &#123;<br>                        <span class="hljs-keyword">self</span>.p[edge.to] = <span class="hljs-title function_ invoke__">Some</span>(i);<br>                        <span class="hljs-keyword">self</span>.a[edge.to] = <span class="hljs-title function_ invoke__">min</span>(<span class="hljs-keyword">self</span>.a[x], edge.cap - edge.flow);<br>                        queue.<span class="hljs-title function_ invoke__">push_back</span>(edge.to);<br>                        <span class="hljs-keyword">if</span> edge.to == t &#123;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.a[t] == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// No more augmenting path found</span><br>        &#125;<br><br>        <span class="hljs-comment">// Augment flow along the path</span><br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">u</span> = t;<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-variable">Some</span>(edge_index) = <span class="hljs-keyword">self</span>.p[u] &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">edge</span> = &amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>.edges[edge_index];<br>            edge.flow += <span class="hljs-keyword">self</span>.a[t];<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">reverse_edge_index</span> = edge_index ^ <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">self</span>.edges[reverse_edge_index].flow -= <span class="hljs-keyword">self</span>.a[t];<br>            u = edge.from;<br>        &#125;<br><br>        flow += <span class="hljs-keyword">self</span>.a[t];<br>    &#125;<br><br>    flow<br>&#125;<br>.....<br></code></pre></td></tr></table></figure><h3 id="2-2-Time-Complexity-Analysis"><a href="#2-2-Time-Complexity-Analysis" class="headerlink" title="2.2: Time Complexity Analysis"></a>2.2: Time Complexity Analysis</h3><ul><li>The time complexity of finding augment path for one time is $O(m)$</li><li>The upper limit of times of Augument is $O(nm)$</li><li>So the time complexity of this algorithm is $O(nm^2)$</li></ul><h2 id="3-Solution-2-Dinic-Algorithm"><a href="#3-Solution-2-Dinic-Algorithm" class="headerlink" title="3: Solution 2: Dinic Algorithm"></a>3: Solution 2: Dinic Algorithm</h2><p>The Dinic algorithm works by dividing the graph into layers and repeatedly finding augmenting paths to increase the flow. Here‚Äôs the main idea:</p><ol><li><p><strong>BFS Layering:</strong> First, perform a Breadth-First Search (BFS) to divide the graph into layers. The distance from a node uu to the source ss determines its layer. Remove edges where the flow is equal to or exceeds the capacity to create the ‚Äúlevel graph‚Äù $G_L&#x3D;(V,E_L)$.</p></li><li><p><strong>Blocking Flow:</strong> In the level graph $G_L$‚Äã, find a maximal flow that cannot be further augmented. This is called the blocking flow.</p></li><li><p><strong>Repeat:</strong> Continue finding and adding blocking flows to the total flow until no augmenting path exists between the source s and the sink t.</p></li></ol><h3 id="3-1-Key-Optimization"><a href="#3-1-Key-Optimization" class="headerlink" title="3.1: Key Optimization"></a>3.1: Key Optimization</h3><p>While performing DFS to find blocking flows:</p><ul><li><p>If you encounter a node u where all outgoing edges are already saturated, skip u.</p></li><li><p>Maintain a pointer for each node uu to keep track of which edge to explore next. This prevents revisiting edges unnecessarily and improves efficiency.</p></li></ul><h3 id="3-2-Code-Part"><a href="#3-2-Code-Part" class="headerlink" title="3.2: Code (Part)"></a>3.2: Code (Part)</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-meta">#[derive(Clone)]</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span> &#123;<br>    to: <span class="hljs-type">usize</span>,<br>    nxt: <span class="hljs-type">usize</span>,<br>    cap: <span class="hljs-type">i32</span>,<br>    flow: <span class="hljs-type">i32</span>,<br>&#125;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MaxFlow</span> &#123;<br>    s: <span class="hljs-type">usize</span>,<br>    t: <span class="hljs-type">usize</span>,<br>    head: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;,<br>    edge: <span class="hljs-type">Vec</span>&lt;Edge&gt;,<br>    maxflow: <span class="hljs-type">isize</span>,<br>    depth: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;,<br>&#125;<br><span class="hljs-keyword">impl</span> <span class="hljs-title class_">MaxFlow</span> &#123;<br>    <span class="hljs-comment">/// Creates a new `MaxFlow` instance with `n` nodes, source node `s`, and sink node `t`.</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(n: <span class="hljs-type">usize</span>, s: <span class="hljs-type">usize</span>, t: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>        <span class="hljs-keyword">Self</span> &#123;<br>            s,<br>            t,<br>            head: <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0x3f3f3f3f</span>; n],<br>            edge: <span class="hljs-built_in">vec!</span>[],<br>            maxflow: <span class="hljs-number">0</span>,<br>            depth: <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; n],<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-comment">/// Adds a directed edge from `from` to `to` with capacity `cap` to the flow network.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// # Arguments</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// `from`: The node from which the edge originates.</span><br>    <span class="hljs-comment">/// `to`: The node to which the edge points.</span><br>    <span class="hljs-comment">/// `cap`: The capacity of the edge.</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_edge</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, from: <span class="hljs-type">usize</span>, to: <span class="hljs-type">usize</span>, cap: <span class="hljs-type">i32</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">m</span> = <span class="hljs-keyword">self</span>.edge.<span class="hljs-title function_ invoke__">len</span>();<br>        <span class="hljs-keyword">self</span>.edge.<span class="hljs-title function_ invoke__">push</span>(Edge &#123;<br>            to,<br>            nxt: <span class="hljs-keyword">self</span>.head[from],<br>            cap,<br>            flow: <span class="hljs-number">0</span>,<br>        &#125;);<br>        <span class="hljs-keyword">self</span>.head[from] = m;<br>        <span class="hljs-keyword">self</span>.edge.<span class="hljs-title function_ invoke__">push</span>(Edge &#123;<br>            to: from,<br>            nxt: <span class="hljs-keyword">self</span>.head[to],<br>            cap: <span class="hljs-number">0</span>,<br>            flow: <span class="hljs-number">0</span>,<br>        &#125;);<br>        <span class="hljs-keyword">self</span>.head[to] = m + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-comment">/// Performs a BFS traversal of the residual graph to mark static nodes and find a shortest path from the source `s` to the sink `t`.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// Returns `true` if a path is found, and `false` otherwise.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">bfs</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">q</span> = std::collections::VecDeque::<span class="hljs-title function_ invoke__">new</span>();<br>        q.<span class="hljs-title function_ invoke__">push_back</span>(<span class="hljs-keyword">self</span>.s);<br>        <span class="hljs-keyword">self</span>.depth.<span class="hljs-title function_ invoke__">fill</span>(<span class="hljs-number">0x3f3f3f3f</span>);<br>        <span class="hljs-keyword">self</span>.depth[<span class="hljs-keyword">self</span>.s] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> !q.<span class="hljs-title function_ invoke__">is_empty</span>() &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">u</span> = q.<span class="hljs-title function_ invoke__">pop_front</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">e</span> = <span class="hljs-keyword">self</span>.head[u];<br>            <span class="hljs-keyword">while</span> e != <span class="hljs-number">0x3f3f3f3f</span> &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = <span class="hljs-keyword">self</span>.edge[e].to;<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.edge[e].flow &lt; <span class="hljs-keyword">self</span>.edge[e].cap &amp;&amp; <span class="hljs-keyword">self</span>.depth[v] &gt; <span class="hljs-keyword">self</span>.depth[u] + <span class="hljs-number">1</span> &#123;<br>                    <span class="hljs-keyword">self</span>.depth[v] = <span class="hljs-keyword">self</span>.depth[u] + <span class="hljs-number">1</span>;<br>                    q.<span class="hljs-title function_ invoke__">push_back</span>(v);<br>                &#125;<br>                e = <span class="hljs-keyword">self</span>.edge[e].nxt;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">self</span>.depth[<span class="hljs-keyword">self</span>.t] != <span class="hljs-number">0x3f3f3f3f</span><br>    &#125;<br>    <span class="hljs-comment">/// Performs a DFS traversal of the residual graph to find a path from node `u` to the sink `t`.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// Returns the maximum flow that can be pushed along the path.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// # Arguments</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// `u`: The starting node of the path.</span><br>    <span class="hljs-comment">/// `flow`: The maximum flow to be pushed along the path.</span><br>    <span class="hljs-comment">/// `edges`: The vector of edges in the residual graph.</span><br>    <span class="hljs-comment">/// `cur`: The vector of current edges for each node in the residual graph.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">dfs</span>(&amp;<span class="hljs-keyword">self</span>, u: <span class="hljs-type">usize</span>, flow: <span class="hljs-type">i32</span>, edges: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;Edge&gt;, cur: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">if</span> u == <span class="hljs-keyword">self</span>.t || flow == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-keyword">return</span> flow;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">res</span> = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">e</span> = cur[u];<br>        <span class="hljs-keyword">while</span> e != <span class="hljs-number">0x3f3f3f3f</span> &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = edges[e].to;<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.depth[v] == <span class="hljs-keyword">self</span>.depth[u] + <span class="hljs-number">1</span> &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dfs</span>(<br>                    v,<br>                    std::cmp::<span class="hljs-title function_ invoke__">min</span>(flow - res, edges[e].cap - edges[e].flow),<br>                    edges,<br>                    cur,<br>                );<br>                edges[e].flow += f;<br>                edges[e ^ <span class="hljs-number">1</span>].flow -= f;<br>                res += f;<br>                <span class="hljs-keyword">if</span> res == flow &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            e = <span class="hljs-keyword">self</span>.edge[e].nxt;<br>            cur[u] = e;<br>        &#125;<br>        res<br>    &#125;<br>    <span class="hljs-comment">/// Computes the maximum flow in the flow network using the Dinic&#x27;s algorithm.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// This function repeatedly calls `bfs` to find a shortest augmenting path</span><br>    <span class="hljs-comment">/// and `dfs` to augment the flow along the path. The maximum flow is</span><br>    <span class="hljs-comment">/// accumulated in `maxflow` field.</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">dinic</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) &#123;<br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">bfs</span>() &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cur</span> = <span class="hljs-keyword">self</span>.head.<span class="hljs-title function_ invoke__">clone</span>();<br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">edge</span> = <span class="hljs-keyword">self</span>.edge.<span class="hljs-title function_ invoke__">clone</span>();<br>            <span class="hljs-keyword">self</span>.maxflow += <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">dfs</span>(<span class="hljs-keyword">self</span>.s, std::<span class="hljs-type">i32</span>::MAX, &amp;<span class="hljs-keyword">mut</span> edge, &amp;<span class="hljs-keyword">mut</span> cur) <span class="hljs-keyword">as</span> <span class="hljs-type">isize</span>;<br>            <span class="hljs-keyword">self</span>.edge = edge;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-Soluiton-3-ISAP-Algorithmn"><a href="#4-Soluiton-3-ISAP-Algorithmn" class="headerlink" title="4: Soluiton 3: ISAP Algorithmn"></a>4: Soluiton 3: ISAP Algorithmn</h2><ol><li><p>Perform a BFS from t to s and mark the depth (why it‚Äôs from t to s will be explained later).</p></li><li><p>Perform a DFS from s to t, similar to Dinic‚Äôs algorithm. However, after finishing processing a node, if the flow passed from the previous node exceeds the used capacity of the current node (for the current depth), the current node is considered ‚Äúwasted‚Äù for the remaining path. In this case, increment its depth by 1. If a gap (a depth level with no nodes) appears, terminate the algorithm.</p></li><li><p>If step 2 does not terminate the algorithm, repeat step 2.</p></li></ol><h3 id="4-1-Optimization"><a href="#4-1-Optimization" class="headerlink" title="4.1: Optimization"></a>4.1: Optimization</h3><p>Compare to Dinic Algorithm, ISAP doesnt require to run bfs several times.</p><h3 id="4-2-Code-Part"><a href="#4-2-Code-Part" class="headerlink" title="4.2: Code (Part)"></a>4.2: Code (Part)</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">mod</span> maxflow &#123;<br>    <span class="hljs-meta">#[derive(Clone)]</span><br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Edge</span> &#123;<br>        to: <span class="hljs-type">usize</span>,<br>        nxt: <span class="hljs-type">usize</span>,<br>        cap: <span class="hljs-type">i32</span>,<br>        flow: <span class="hljs-type">i32</span>,<br>    &#125;<br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Graph</span> &#123;<br>        n: <span class="hljs-type">usize</span>,<br>        s: <span class="hljs-type">usize</span>,<br>        t: <span class="hljs-type">usize</span>,<br>        head: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;,<br>        edge: <span class="hljs-type">Vec</span>&lt;Edge&gt;,<br>        <span class="hljs-keyword">pub</span> maxflow: <span class="hljs-type">isize</span>,<br>        depth: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;,<br>        gap: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;,<br>    &#125;<br>    <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Graph</span> &#123;<br>        <span class="hljs-comment">/// Creates a new `MaxFlow` instance with `n` nodes, source node `s`, and sink node `t`.</span><br>        <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(n: <span class="hljs-type">usize</span>, s: <span class="hljs-type">usize</span>, t: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> &#123;<br>            <span class="hljs-keyword">Self</span> &#123;<br>                n,<br>                s,<br>                t,<br>                head: <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0x3f3f3f3f</span>; n],<br>                edge: <span class="hljs-built_in">vec!</span>[],<br>                maxflow: <span class="hljs-number">0</span>,<br>                depth: <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0x3f3f3f3f</span>; n],<br>                gap: <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0</span>; n * <span class="hljs-number">2</span>],<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">/// Adds a directed edge from `from` to `to` with capacity `cap` to the flow network.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// # Arguments</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// `from`: The node from which the edge originates.</span><br>    <span class="hljs-comment">/// `to`: The node to which the edge points.</span><br>    <span class="hljs-comment">/// `cap`: The capacity of the edge.</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add_edge</span>(g: &amp;<span class="hljs-keyword">mut</span> Graph, from: <span class="hljs-type">usize</span>, to: <span class="hljs-type">usize</span>, cap: <span class="hljs-type">i32</span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-variable">m</span> = g.edge.<span class="hljs-title function_ invoke__">len</span>();<br>        g.edge.<span class="hljs-title function_ invoke__">push</span>(Edge &#123;<br>            to,<br>            nxt: g.head[from],<br>            cap,<br>            flow: <span class="hljs-number">0</span>,<br>        &#125;);<br>        g.head[from] = m;<br>        g.edge.<span class="hljs-title function_ invoke__">push</span>(Edge &#123;<br>            to: from,<br>            nxt: g.head[to],<br>            cap: <span class="hljs-number">0</span>,<br>            flow: <span class="hljs-number">0</span>,<br>        &#125;);<br>        g.head[to] = m + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-comment">/// Performs a BFS traversal of the residual graph to mark static nodes and find a shortest path from the source `s` to the sink `t`.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// Returns `true` if a path is found, and `false` otherwise.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">generate_depth</span>(g: &amp;<span class="hljs-keyword">mut</span> Graph) &#123;<br>        g.depth = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">0x3f3f3f3f</span>; g.n];<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">q</span> = std::collections::VecDeque::<span class="hljs-title function_ invoke__">new</span>();<br>        q.<span class="hljs-title function_ invoke__">push_back</span>(g.t);<br>        g.depth[g.t] = <span class="hljs-number">0</span>;<br>        g.gap[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> !q.<span class="hljs-title function_ invoke__">is_empty</span>() &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">u</span> = q.<span class="hljs-title function_ invoke__">pop_front</span>().<span class="hljs-title function_ invoke__">unwrap</span>();<br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">e</span> = g.head[u];<br>            <span class="hljs-keyword">while</span> e != <span class="hljs-number">0x3f3f3f3f</span> &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = g.edge[e].to;<br>                <span class="hljs-keyword">if</span> g.depth[v] != <span class="hljs-number">0x3f3f3f3f</span> &#123;<br>                    e = g.edge[e].nxt;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                g.depth[v] = g.depth[u] + <span class="hljs-number">1</span>;<br>                g.gap[g.depth[v]] += <span class="hljs-number">1</span>;<br>                q.<span class="hljs-title function_ invoke__">push_back</span>(v);<br>                e = g.edge[e].nxt;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">/// Performs a DFS traversal of the residual graph to find a path from node `u` to the sink `t`.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// Returns the maximum flow that can be pushed along the path.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// # Arguments</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// `u`: The starting node of the path.</span><br>    <span class="hljs-comment">/// `flow`: The maximum flow to be pushed along the path.</span><br>    <span class="hljs-comment">/// `edges`: The vector of edges in the residual graph.</span><br>    <span class="hljs-comment">/// `cur`: The vector of current edges for each node in the residual graph.</span><br>    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">dfs</span>(g: &amp;<span class="hljs-keyword">mut</span> Graph, u: <span class="hljs-type">usize</span>, flow: <span class="hljs-type">i32</span>, cur: &amp;<span class="hljs-keyword">mut</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> &#123;<br>        <span class="hljs-keyword">if</span> u == g.t || flow == <span class="hljs-number">0</span> &#123;<br>            <span class="hljs-keyword">return</span> flow;<br>        &#125;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">used</span> = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">e</span> = cur[u];<br>        <span class="hljs-keyword">while</span> e != <span class="hljs-number">0x3f3f3f3f</span> &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-variable">v</span> = g.edge[e].to;<br>            <span class="hljs-keyword">if</span> g.depth[v] == g.depth[u] - <span class="hljs-number">1</span> &#123;<br>                <span class="hljs-keyword">let</span> <span class="hljs-variable">f</span> = <span class="hljs-title function_ invoke__">dfs</span>(<br>                    g,<br>                    v,<br>                    std::cmp::<span class="hljs-title function_ invoke__">min</span>(flow - used, g.edge[e].cap - g.edge[e].flow),<br>                    cur,<br>                );<br>                g.edge[e].flow += f;<br>                g.edge[e ^ <span class="hljs-number">1</span>].flow -= f;<br>                used += f;<br>                <span class="hljs-keyword">if</span> used == flow &#123;<br>                    <span class="hljs-keyword">return</span> used;<br>                &#125;<br>            &#125;<br>            e = g.edge[e].nxt;<br>            cur[u] = e;<br>        &#125;<br>        g.gap[g.depth[u]] -= <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> g.gap[g.depth[u]] == <span class="hljs-number">0</span> &#123;<br>            g.depth[g.s] = g.n + <span class="hljs-number">1</span>;<br>        &#125;<br>        g.depth[u] += <span class="hljs-number">1</span>;<br>        g.gap[g.depth[u]] += <span class="hljs-number">1</span>;<br>        used<br>    &#125;<br>    <span class="hljs-comment">/// Computes the maximum flow in the flow network using the Dinic&#x27;s algorithm.</span><br>    <span class="hljs-comment">///</span><br>    <span class="hljs-comment">/// This function repeatedly calls `bfs` to find a shortest augmenting path</span><br>    <span class="hljs-comment">/// and `dfs` to augment the flow along the path. The maximum flow is</span><br>    <span class="hljs-comment">/// accumulated in `maxflow` field.</span><br>    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">isap</span>(g: &amp;<span class="hljs-keyword">mut</span> Graph) &#123;<br>        <span class="hljs-title function_ invoke__">generate_depth</span>(g);<br>        <span class="hljs-keyword">while</span> g.depth[g.s] &lt; g.n &#123;<br>            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">cur</span> = g.head.<span class="hljs-title function_ invoke__">clone</span>();<br>            g.maxflow += <span class="hljs-title function_ invoke__">dfs</span>(g, g.s, std::<span class="hljs-type">i32</span>::MAX, &amp;<span class="hljs-keyword">mut</span> cur) <span class="hljs-keyword">as</span> <span class="hljs-type">isize</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Basic Reverse Engineering by using GDB</title>
    <link href="/posts/d1d01c28/"/>
    <url>/posts/d1d01c28/</url>
    
    <content type="html"><![CDATA[<!-- @format --><h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><p>The challenge is to determine the correct set of five inputs expected by each of the four safes (s1, s2, s3, s4). Running the binary file prompts you to input guesses sequentially, as demonstrated below:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span><br>s1* s2* s3* s4*<br>$ ./s3<br>input 1 (of 5)? elephant-ears<br>input 2 (of 5)? one-two-three<br>input 3 (of 5)? at-the-end<br>input 4 (of 5)? open-two-door<br>***************************************<br>*********** ALARM TRIGGERED ***********<br>***************************************<br>$ ./s3<br>input 1 (of 5)? elephant-ears<br>input 2 (of 5)? one-two-three<br>input 3 (of 5)? at-the-end<br>input 4 (of 5)? open-the-door<br>input 5 (of 5)? alphabet-soup<br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>!!!!!!!!!!! SAFE OPENED !!!!!!!!!!!<br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br></code></pre></td></tr></table></figure><h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><h2 id="Step-1-Check-x86-instructions-by-using-objdump"><a href="#Step-1-Check-x86-instructions-by-using-objdump" class="headerlink" title="Step 1: Check x86 instructions by using objdump"></a>Step 1: Check x86 instructions by using objdump</h2><p>To analyze the binary, first convert it into human-readable assembly instructions:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">objdump -d s1 &gt; s1.txt<br></code></pre></td></tr></table></figure><p>This generates a text file, s1.txt, containing x86 assembly instructions. Focus on the main function, as it handles the input validation logic.</p><p>Here is a snippet of the main function from s1.txt:</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><br>    ...<br><br><span class="hljs-number">00001295</span> &lt;main&gt;:<br>    <span class="hljs-number">1295</span>: <span class="hljs-number">8</span>d <span class="hljs-number">4</span><span class="hljs-keyword">c</span> <span class="hljs-number">24</span> <span class="hljs-number">04</span>           lea    <span class="hljs-number">0x4</span>(<span class="hljs-variable">%esp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%ecx</span><br>    <span class="hljs-number">1299</span>: <span class="hljs-number">83</span> e<span class="hljs-number">4</span> f<span class="hljs-number">0</span>              <span class="hljs-keyword">and</span>    $<span class="hljs-number">0xfffffff0</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">129</span><span class="hljs-keyword">c</span>: ff <span class="hljs-number">71</span> fc              push   <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">4</span>(<span class="hljs-variable">%ecx</span>)<br>    <span class="hljs-number">129</span>f: <span class="hljs-number">55</span>                    push   <span class="hljs-variable">%ebp</span><br>    <span class="hljs-number">12</span>a<span class="hljs-number">0</span>: <span class="hljs-number">89</span> e<span class="hljs-number">5</span>                 mov    <span class="hljs-variable">%esp</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%ebp</span><br>    <span class="hljs-number">12</span>a<span class="hljs-number">2</span>: <span class="hljs-number">57</span>                    push   <span class="hljs-variable">%edi</span><br>    <span class="hljs-number">12</span>a<span class="hljs-number">3</span>: <span class="hljs-number">56</span>                    push   <span class="hljs-variable">%esi</span><br>    <span class="hljs-number">12</span>a<span class="hljs-number">4</span>: <span class="hljs-number">53</span>                    push   <span class="hljs-variable">%ebx</span><br>    <span class="hljs-number">12</span>a<span class="hljs-number">5</span>: <span class="hljs-number">51</span>                    push   <span class="hljs-variable">%ecx</span>  // prepare<br>    <span class="hljs-number">12</span>a<span class="hljs-number">6</span>: <span class="hljs-number">81</span> ec <span class="hljs-number">28</span> <span class="hljs-number">02</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>     <span class="hljs-keyword">sub</span>    $<span class="hljs-number">0x228</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">12</span>ac: e<span class="hljs-number">8</span> <span class="hljs-number">5</span>f fe ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">1110</span> &lt;__x<span class="hljs-number">86</span>.get_pc_thunk.bx&gt;<br>    <span class="hljs-number">12</span>b<span class="hljs-number">1</span>: <span class="hljs-number">81</span> <span class="hljs-keyword">c</span><span class="hljs-number">3</span> <span class="hljs-number">07</span> <span class="hljs-number">2</span>d <span class="hljs-number">00</span> <span class="hljs-number">00</span>     <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x2d07</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%ebx</span><br>    <span class="hljs-number">12</span>b<span class="hljs-number">7</span>: <span class="hljs-number">8</span>b <span class="hljs-number">51</span> <span class="hljs-number">04</span>              mov    <span class="hljs-number">0x4</span>(<span class="hljs-variable">%ecx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%edx</span><br>    <span class="hljs-number">12</span>ba: <span class="hljs-number">65</span> a<span class="hljs-number">1</span> <span class="hljs-number">14</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>     mov    <span class="hljs-variable">%gs</span>:<span class="hljs-number">0x14</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">12</span><span class="hljs-keyword">c</span><span class="hljs-number">0</span>: <span class="hljs-number">89</span> <span class="hljs-number">45</span> e<span class="hljs-number">4</span>              mov    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">1</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<br>    <span class="hljs-number">12</span><span class="hljs-keyword">c</span><span class="hljs-number">3</span>: <span class="hljs-number">31</span> <span class="hljs-keyword">c</span><span class="hljs-number">0</span>                 <span class="hljs-keyword">xor</span>    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span>  // <span class="hljs-variable">%eax</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>    <span class="hljs-number">12</span><span class="hljs-keyword">c</span><span class="hljs-number">5</span>: <span class="hljs-number">8</span>b <span class="hljs-number">83</span> <span class="hljs-number">3</span><span class="hljs-keyword">c</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>     mov    <span class="hljs-number">0x3c</span>(<span class="hljs-variable">%ebx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">12</span>cb: <span class="hljs-number">8</span>b <span class="hljs-number">38</span>                 mov    (<span class="hljs-variable">%eax</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%edi</span><br>    <span class="hljs-number">12</span>cd: <span class="hljs-number">83</span> <span class="hljs-number">39</span> <span class="hljs-number">02</span>              cmpl   $<span class="hljs-number">0x2</span><span class="hljs-punctuation">,</span>(<span class="hljs-variable">%ecx</span>)<br>    <span class="hljs-number">12</span>d<span class="hljs-number">0</span>: <span class="hljs-number">74</span> <span class="hljs-number">6</span>f                 je     <span class="hljs-number">1341</span> &lt;main<span class="hljs-number">+0</span>xac&gt;<br>    <span class="hljs-number">12</span>d<span class="hljs-number">2</span>: be <span class="hljs-number">01</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>        mov    $<span class="hljs-number">0x1</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esi</span><br>    <span class="hljs-number">12</span>d<span class="hljs-number">7</span>: <span class="hljs-number">8</span>b <span class="hljs-number">83</span> <span class="hljs-number">3</span><span class="hljs-keyword">c</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>     mov    <span class="hljs-number">0x3c</span>(<span class="hljs-variable">%ebx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">12</span>dd: <span class="hljs-number">89</span> <span class="hljs-number">85</span> d<span class="hljs-number">4</span> fd ff ff     mov    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">22</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<br>    <span class="hljs-number">12e3</span>: <span class="hljs-number">8</span>d <span class="hljs-number">83</span> ea e<span class="hljs-number">0</span> ff ff     lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">1</span>f<span class="hljs-number">16</span>(<span class="hljs-variable">%ebx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">12e9</span>: <span class="hljs-number">89</span> <span class="hljs-number">85</span> d<span class="hljs-number">0</span> fd ff ff     mov    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">230</span>(<span class="hljs-variable">%ebp</span>)<br>    <span class="hljs-number">12</span>ef: <span class="hljs-number">83</span> fe <span class="hljs-number">06</span>              cmp    $<span class="hljs-number">0x6</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esi</span><br>    <span class="hljs-number">12</span>f<span class="hljs-number">2</span>: <span class="hljs-number">74</span> <span class="hljs-number">7</span>f                 je     <span class="hljs-number">1373</span> &lt;main<span class="hljs-number">+0</span>xde&gt;<br>    <span class="hljs-number">12</span>f<span class="hljs-number">4</span>: <span class="hljs-number">8</span>b <span class="hljs-number">85</span> d<span class="hljs-number">4</span> fd ff ff     mov    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">22</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">12</span>fa: <span class="hljs-number">39</span> <span class="hljs-number">38</span>                 cmp    <span class="hljs-variable">%edi</span><span class="hljs-punctuation">,</span>(<span class="hljs-variable">%eax</span>)<br>    <span class="hljs-number">12</span>fc: <span class="hljs-number">74</span> <span class="hljs-number">5</span>f                 je     <span class="hljs-number">135</span>d &lt;main<span class="hljs-number">+0</span>xc<span class="hljs-number">8</span>&gt;<br>    <span class="hljs-number">12</span>fe: <span class="hljs-number">83</span> ec <span class="hljs-number">04</span>              <span class="hljs-keyword">sub</span>    $<span class="hljs-number">0x4</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1301</span>: <span class="hljs-number">57</span>                    push   <span class="hljs-variable">%edi</span><br>    <span class="hljs-number">1302</span>: <span class="hljs-number">68</span> <span class="hljs-number">00</span> <span class="hljs-number">02</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>        push   $<span class="hljs-number">0x200</span><br>    <span class="hljs-number">1307</span>: <span class="hljs-number">8</span>d <span class="hljs-number">85</span> e<span class="hljs-number">4</span> fd ff ff     lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">21</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">130</span>d: <span class="hljs-number">50</span>                    push   <span class="hljs-variable">%eax</span><br>    <span class="hljs-number">130</span>e: e<span class="hljs-number">8</span> <span class="hljs-number">3</span>d fd ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">1050</span> &lt;fgets<span class="hljs-title">@plt</span>&gt;<br>    <span class="hljs-number">1313</span>: <span class="hljs-number">83</span> <span class="hljs-keyword">c</span><span class="hljs-number">4</span> <span class="hljs-number">10</span>              <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x10</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1316</span>: <span class="hljs-number">85</span> <span class="hljs-keyword">c</span><span class="hljs-number">0</span>                 test   <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">1318</span>: <span class="hljs-number">74</span> d<span class="hljs-number">5</span>                 je     <span class="hljs-number">12</span>ef &lt;main<span class="hljs-number">+0</span><span class="hljs-keyword">x</span><span class="hljs-number">5</span>a&gt;<br>    <span class="hljs-number">131</span>a: <span class="hljs-number">83</span> ec <span class="hljs-number">04</span>              <span class="hljs-keyword">sub</span>    $<span class="hljs-number">0x4</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">131</span>d: <span class="hljs-number">6</span>a <span class="hljs-number">0</span>a                 push   $<span class="hljs-number">0xa</span><br>    <span class="hljs-number">131</span>f: <span class="hljs-number">6</span>a <span class="hljs-number">00</span>                 push   $<span class="hljs-number">0x0</span><br>    <span class="hljs-number">1321</span>: <span class="hljs-number">8</span>d <span class="hljs-number">85</span> e<span class="hljs-number">4</span> fd ff ff     lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">21</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">1327</span>: <span class="hljs-number">50</span>                    push   <span class="hljs-variable">%eax</span><br>    <span class="hljs-number">1328</span>: e<span class="hljs-number">8</span> <span class="hljs-number">93</span> fd ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">10</span><span class="hljs-keyword">c</span><span class="hljs-number">0</span> &lt;strtol<span class="hljs-title">@plt</span>&gt;<br>    <span class="hljs-number">132</span>d: <span class="hljs-number">83</span> <span class="hljs-keyword">c</span><span class="hljs-number">6</span> <span class="hljs-number">01</span>              <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x1</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esi</span><br>    <span class="hljs-number">1330</span>: <span class="hljs-number">83</span> <span class="hljs-keyword">c</span><span class="hljs-number">4</span> <span class="hljs-number">10</span>              <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x10</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1333</span>: <span class="hljs-number">39</span> <span class="hljs-number">84</span> b<span class="hljs-number">3</span> <span class="hljs-number">50</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>  cmp    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-number">0x50</span>(<span class="hljs-variable">%ebx</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esi</span><span class="hljs-punctuation">,</span><span class="hljs-number">4</span>)<br>    <span class="hljs-number">133</span>a: <span class="hljs-number">74</span> a<span class="hljs-number">7</span>                 je     <span class="hljs-number">12e3</span> &lt;main<span class="hljs-number">+0</span><span class="hljs-keyword">x</span><span class="hljs-number">4</span>e&gt;<br>    <span class="hljs-number">133</span><span class="hljs-keyword">c</span>: e<span class="hljs-number">8</span> <span class="hljs-keyword">cc</span> fe ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">120</span>d &lt;fail&gt;<br>    <span class="hljs-number">1341</span>: <span class="hljs-number">83</span> ec <span class="hljs-number">08</span>              <span class="hljs-keyword">sub</span>    $<span class="hljs-number">0x8</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1344</span>: <span class="hljs-number">8</span>d <span class="hljs-number">83</span> e<span class="hljs-number">8</span> e<span class="hljs-number">0</span> ff ff     lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">1</span>f<span class="hljs-number">18</span>(<span class="hljs-variable">%ebx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">134</span>a: <span class="hljs-number">50</span>                    push   <span class="hljs-variable">%eax</span><br>    <span class="hljs-number">134</span>b: ff <span class="hljs-number">72</span> <span class="hljs-number">04</span>              push   <span class="hljs-number">0x4</span>(<span class="hljs-variable">%edx</span>)<br>    <span class="hljs-number">134</span>e: e<span class="hljs-number">8</span> <span class="hljs-number">4</span>d fd ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">10</span>a<span class="hljs-number">0</span> &lt;fopen<span class="hljs-title">@plt</span>&gt;<br>    <span class="hljs-number">1353</span>: <span class="hljs-number">89</span> <span class="hljs-keyword">c</span><span class="hljs-number">7</span>                 mov    <span class="hljs-variable">%eax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%edi</span><br>    <span class="hljs-number">1355</span>: <span class="hljs-number">83</span> <span class="hljs-keyword">c</span><span class="hljs-number">4</span> <span class="hljs-number">10</span>              <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x10</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1358</span>: e<span class="hljs-number">9</span> <span class="hljs-number">75</span> ff ff ff        jmp    <span class="hljs-number">12</span>d<span class="hljs-number">2</span> &lt;main<span class="hljs-number">+0</span><span class="hljs-keyword">x</span><span class="hljs-number">3</span>d&gt;<br>    <span class="hljs-number">135</span>d: <span class="hljs-number">83</span> ec <span class="hljs-number">04</span>              <span class="hljs-keyword">sub</span>    $<span class="hljs-number">0x4</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1360</span>: <span class="hljs-number">56</span>                    push   <span class="hljs-variable">%esi</span><br>    <span class="hljs-number">1361</span>: ff b<span class="hljs-number">5</span> d<span class="hljs-number">0</span> fd ff ff     push   <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">230</span>(<span class="hljs-variable">%ebp</span>)<br>    <span class="hljs-number">1367</span>: <span class="hljs-number">6</span>a <span class="hljs-number">01</span>                 push   $<span class="hljs-number">0x1</span><br>    <span class="hljs-number">1369</span>: e<span class="hljs-number">8</span> <span class="hljs-number">42</span> fd ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">10</span>b<span class="hljs-number">0</span> &lt;__printf_chk<span class="hljs-title">@plt</span>&gt;<br>    <span class="hljs-number">136</span>e: <span class="hljs-number">83</span> <span class="hljs-keyword">c</span><span class="hljs-number">4</span> <span class="hljs-number">10</span>              <span class="hljs-keyword">add</span>    $<span class="hljs-number">0x10</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1371</span>: eb <span class="hljs-number">8</span>b                 jmp    <span class="hljs-number">12</span>fe &lt;main<span class="hljs-number">+0</span><span class="hljs-keyword">x</span><span class="hljs-number">69</span>&gt;<br>    <span class="hljs-number">1373</span>: e<span class="hljs-number">8</span> dc fe ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">1254</span> &lt;success&gt;<br>    <span class="hljs-number">1378</span>: <span class="hljs-number">8</span>b <span class="hljs-number">45</span> e<span class="hljs-number">4</span>              mov    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">1</span><span class="hljs-keyword">c</span>(<span class="hljs-variable">%ebp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">137</span>b: <span class="hljs-number">65</span> <span class="hljs-number">2</span>b <span class="hljs-number">05</span> <span class="hljs-number">14</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>  <span class="hljs-keyword">sub</span>    <span class="hljs-variable">%gs</span>:<span class="hljs-number">0x14</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">1382</span>: <span class="hljs-number">75</span> <span class="hljs-number">11</span>                 jne    <span class="hljs-number">1395</span> &lt;main<span class="hljs-number">+0</span><span class="hljs-keyword">x</span><span class="hljs-number">100</span>&gt;<br>    <span class="hljs-number">1384</span>: b<span class="hljs-number">8</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>        mov    $<span class="hljs-number">0x0</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%eax</span><br>    <span class="hljs-number">1389</span>: <span class="hljs-number">8</span>d <span class="hljs-number">65</span> f<span class="hljs-number">0</span>              lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">10</span>(<span class="hljs-variable">%ebp</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">138</span><span class="hljs-keyword">c</span>: <span class="hljs-number">59</span>                    pop    <span class="hljs-variable">%ecx</span><br>    <span class="hljs-number">138</span>d: <span class="hljs-number">5</span>b                    pop    <span class="hljs-variable">%ebx</span><br>    <span class="hljs-number">138</span>e: <span class="hljs-number">5</span>e                    pop    <span class="hljs-variable">%esi</span><br>    <span class="hljs-number">138</span>f: <span class="hljs-number">5</span>f                    pop    <span class="hljs-variable">%edi</span><br>    <span class="hljs-number">1390</span>: <span class="hljs-number">5</span>d                    pop    <span class="hljs-variable">%ebp</span><br>    <span class="hljs-number">1391</span>: <span class="hljs-number">8</span>d <span class="hljs-number">61</span> fc              lea    <span class="hljs-number">-0</span><span class="hljs-keyword">x</span><span class="hljs-number">4</span>(<span class="hljs-variable">%ecx</span>)<span class="hljs-punctuation">,</span><span class="hljs-variable">%esp</span><br>    <span class="hljs-number">1394</span>: <span class="hljs-keyword">c</span><span class="hljs-number">3</span>                    <span class="hljs-keyword">ret</span><br>    <span class="hljs-number">1395</span>: e<span class="hljs-number">8</span> <span class="hljs-number">06</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>        <span class="hljs-keyword">call</span>   <span class="hljs-number">13</span>a<span class="hljs-number">0</span> &lt;__stack_chk_fail_local&gt;<br>    <span class="hljs-number">139</span>a: <span class="hljs-number">66</span> <span class="hljs-number">90</span>                 <span class="hljs-keyword">xchg</span>   <span class="hljs-variable">%ax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%ax</span><br>    <span class="hljs-number">139</span><span class="hljs-keyword">c</span>: <span class="hljs-number">66</span> <span class="hljs-number">90</span>                 <span class="hljs-keyword">xchg</span>   <span class="hljs-variable">%ax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%ax</span><br>    <span class="hljs-number">139</span>e: <span class="hljs-number">66</span> <span class="hljs-number">90</span>                 <span class="hljs-keyword">xchg</span>   <span class="hljs-variable">%ax</span><span class="hljs-punctuation">,</span><span class="hljs-variable">%ax</span><br><br>    ...<br></code></pre></td></tr></table></figure><h2 id="Step-2-Analysis-main-function"><a href="#Step-2-Analysis-main-function" class="headerlink" title="Step 2: Analysis main function"></a>Step 2: Analysis main function</h2><p>Now we have two choices of reading this list of instructions. First is translating these instructions one by one. Second is rebulid the control flow reversely. I choose the second way.</p><p>By observation, we can see there two sentences call success and fail functions:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">1373:</span> <span class="hljs-string">e8</span> <span class="hljs-string">dc</span> <span class="hljs-string">fe</span> <span class="hljs-string">ff</span> <span class="hljs-string">ff</span>        <span class="hljs-string">call</span>   <span class="hljs-number">1254</span> <span class="hljs-string">&lt;success&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-number">133</span><span class="hljs-keyword">c</span>: e<span class="hljs-number">8</span> <span class="hljs-keyword">cc</span> fe ff ff        <span class="hljs-keyword">call</span>   <span class="hljs-number">120</span>d &lt;fail&gt;<br></code></pre></td></tr></table></figure><p>Looking into it, we can find the sentence before the success function call is a jmp instruction to previous lines. So success function cannot be entered by sequence control flow. So we check the jmp instruction that jumps to 1373.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">12e3</span>: <span class="hljs-number">8</span>d <span class="hljs-number">83</span> ea e0 ff ff     lea    -<span class="hljs-number">0</span>x1f16(%ebx),%eax<br><span class="hljs-attribute">12e9</span>: <span class="hljs-number">89</span> <span class="hljs-number">85</span> d0 fd ff ff     mov    %eax,-<span class="hljs-number">0</span>x230(%ebp)<br><span class="hljs-attribute">12ef</span>: <span class="hljs-number">83</span> fe <span class="hljs-number">06</span>              cmp    $<span class="hljs-number">0</span>x6,%esi<br><span class="hljs-attribute">12f2</span>: <span class="hljs-number">74</span> <span class="hljs-number">7</span>f                 je     <span class="hljs-number">1373</span> &lt;main+<span class="hljs-number">0</span>xde&gt;<br></code></pre></td></tr></table></figure><p>So these are sentences jumps to 1373 and its requirements. We can see ‚Äú%esi &#x3D;&#x3D; 6‚Äù is the key point to trigger success function. So we continue looking into sentences that change register %esi.</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">132d</span>: <span class="hljs-number">83</span> c6 <span class="hljs-number">01</span>              add    $<span class="hljs-number">0</span>x1,%esi<br><span class="hljs-attribute">1330</span>: <span class="hljs-number">83</span> c4 <span class="hljs-number">10</span>              add    $<span class="hljs-number">0</span>x10,%esp<br><span class="hljs-attribute">1333</span>: <span class="hljs-number">39</span> <span class="hljs-number">84</span> b3 <span class="hljs-number">50</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span> <span class="hljs-number">00</span>  cmp    %eax,<span class="hljs-number">0</span>x50(%ebx,%esi,<span class="hljs-number">4</span>)<br><span class="hljs-attribute">133a</span>: <span class="hljs-number">74</span> a7                 je     <span class="hljs-number">12</span>e3 &lt;main+<span class="hljs-number">0</span>x4e&gt;<br></code></pre></td></tr></table></figure><p>These instructions is the only place that changes %esi‚Äôs value and jump to the previous block. So the requirements of this block is ‚Äú%eax &#x3D;&#x3D; %ebx + %esi _ 4 + 0x50‚Äù, which %eax is the result of strtol of our inputs. Now the requirement is clear: our inputs must be an integer and equals to value in ‚Äú%ebx + %esi * 4 + 0x50‚Äù.</p><h2 id="Step-3-Using-GDB-to-get-password"><a href="#Step-3-Using-GDB-to-get-password" class="headerlink" title="Step 3: Using GDB to get password"></a>Step 3: Using GDB to get password</h2><p>The last step is adding a break point at instruction 1333, which is the compare operation. Can print the value in ‚Äú0x50(%ebx,%esi,4)‚Äù so we can get the answer.</p><ol><li>Use gdb to open the file and add a breakpoint at main function:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gdb ./s1<br>(gdb) <span class="hljs-built_in">break</span> main<br>Breakpoint 1 at 0x12a6<br></code></pre></td></tr></table></figure><ol start="2"><li>Start to run:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) run<br>Starting program: /home/hyjing/Onedrive/ClassFiles/Comp Sci 354/p5/s1<br>[Thread debugging using libthread_db enabled]<br>Using host libthread_db library <span class="hljs-string">&quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;</span>.<br><br>Breakpoint 1, 0x565562a6 <span class="hljs-keyword">in</span> main ()<br></code></pre></td></tr></table></figure><ol start="3"><li>Add the second breakpoint at 1333:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) <span class="hljs-built_in">break</span> *0x56556333<br>Breakpoint 2 at 0x56556333<br>(gdb) <span class="hljs-built_in">continue</span><br>Continuing.<br>input 1 (of 5)? [Any Input]<br><br>Breakpoint 2, 0x56556333 <span class="hljs-keyword">in</span> main ()<br></code></pre></td></tr></table></figure><ol start="4"><li>Get the point and start to print the result:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">(gdb) <span class="hljs-built_in">print</span> *(0x50 + <span class="hljs-variable">$ebx</span> + 4*<span class="hljs-variable">$esi</span>)<br><span class="hljs-variable">$1</span> = 352303<br>(gdb) <span class="hljs-built_in">print</span> *(0x50 + <span class="hljs-variable">$ebx</span> + 4*(<span class="hljs-variable">$esi</span> + 1))<br><span class="hljs-variable">$2</span> = 855053<br>(gdb) <span class="hljs-built_in">print</span> *(0x50 + <span class="hljs-variable">$ebx</span> + 4*(<span class="hljs-variable">$esi</span> + 2))<br><span class="hljs-variable">$3</span> = 170240<br>(gdb) <span class="hljs-built_in">print</span> *(0x50 + <span class="hljs-variable">$ebx</span> + 4*(<span class="hljs-variable">$esi</span> + 3))<br><span class="hljs-variable">$4</span> = 4961<br>(gdb) <span class="hljs-built_in">print</span> *(0x50 + <span class="hljs-variable">$ebx</span> + 4*(<span class="hljs-variable">$esi</span> + 4))<br><span class="hljs-variable">$5</span> = 108932<br></code></pre></td></tr></table></figure><ol start="5"><li>Get the five passwords, save them in s1.solution and check them.</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ./s1 &lt; s1.solution<br>input 1 (of 5)? input 2 (of 5)? input 3 (of 5)? input 4 (of 5)? input 5 (of 5)? !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>!!!!!!!!!!! SAFE OPENED !!!!!!!!!!!<br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Reverse Engineering</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
